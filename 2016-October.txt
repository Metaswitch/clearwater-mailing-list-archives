From surender.s at hcl.com  Mon Oct  3 02:10:30 2016
From: surender.s at hcl.com (Surender Singh)
Date: Mon, 3 Oct 2016 06:10:30 +0000
Subject: [Project Clearwater] Integration of Open HSS_All-in-one
Message-ID: <16AE9ED83DBA5B4D85B058EAF39C918107E1CD5D@NDA-HCLT-MBS05.hclt.corp.hcl.in>

Hello,

I deployed the All in one solution in VMware machine .My IN-OUT calls are working to other network using BGCF/IBCF feature .

Now i want Integrate the Open HSS with Homestead node .Can you suggest me where I need to make the entry in aio solution .

I having some below query..


1)      Can we provision the basic supplementary  service (CF Service, Three Party, Call-Transfer , Call park  etc .) in open HSS.

2)      Any other drawbacks of the all-in-one solution apart from Performance /Production.

3)      Can i integrate the other DNS for DNS query .

Regards
Surender Singh








::DISCLAIMER::
----------------------------------------------------------------------------------------------------------------------------------------------------

The contents of this e-mail and any attachment(s) are confidential and intended for the named recipient(s) only.
E-mail transmission is not guaranteed to be secure or error-free as information could be intercepted, corrupted,
lost, destroyed, arrive late or incomplete, or may contain viruses in transmission. The e mail and its contents
(with or without referred errors) shall therefore not attach any liability on the originator or HCL or its affiliates.
Views or opinions, if any, presented in this email are solely those of the author and may not necessarily reflect the
views or opinions of HCL or its affiliates. Any form of reproduction, dissemination, copying, disclosure, modification,
distribution and / or publication of this message without the prior written consent of authorized representative of
HCL is strictly prohibited. If you have received this email in error please delete it and notify the sender immediately.
Before opening any email and/or attachments, please check them for viruses and other defects.

----------------------------------------------------------------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161003/7d5053e7/attachment.html>

From gerard.ratcliffe at nec.co.nz  Mon Oct  3 22:18:20 2016
From: gerard.ratcliffe at nec.co.nz (Gerard Ratcliffe)
Date: Tue, 4 Oct 2016 02:18:20 +0000
Subject: [Project Clearwater] ibcf (bono) VM using up a lot of memory
Message-ID: <824d19d0292048fe95cad64014b4aa8d@ex15w.necnz.internal>

Hi,

This is my first post on this forum I am also new to Clearwater IMS.  In fact I am babysitting our Clearwater IMS while our developer is on leave.

We have a manual install of bono/sprout/homestead/ibcf/dns being used as an
interface between Voip UE?s and a PSTN, running on 5 VM?s. They are connected
via a private virtual switch, and only the bono and ibcf nodes are connected to
an external network interface for external sip signalling. This setup is
working with no problems.  At present we have four of these IMSs setup.  Two of them in test sites (one for us one for the customer) and two in production sites.  Only one production site is carrying live traffic.

Last week I got an alert to say that one of the production ibcf VMs was running out of free memory.  Fortunately this was on the production IMS that was not carrying live traffic. My colleague had warned me that the VMs were slowly using up memory and that I should check them periodically to make sure that the free memory was not getting to low.

The ibcf free memory was down to less than 6%.  I restarted the VM and this sorted out the problem.  I also checked the other VMs in the both the production IMSs and they were all above 30%.  At this point I thought that the problem had been resolved.

However, today we received the same alaert for the ibcf VM.  Once again, the VM, was down to less than 6% free memory.

[bono]nec at ibcf:~$ free
             total       used       free     shared    buffers     cached
Mem:       4041496    3809652     231844        224     151596    3247032
-/+ buffers/cache:     411024    3630472
Swap:      2093052        320    2092732
[bono]nec at ibcf:~$


I restarted the VM again and this dropped the free memory back to about 90%

[bono]nec at ibcf:~$ free
             total       used       free     shared    buffers     cached
Mem:       4041496     386116    3655380        444      14528     150728
-/+ buffers/cache:     220860    3820636
Swap:      2093052          0    2093052
[bono]nec at ibcf:~$

I have attached a file with some of the checking that I did before and after the restart.

Has anyone else experienced this problem and are there any checks that can be done to try and isolate the leaky process.

Regards,
Gerard




Gerard Ratcliffe

Technical Specialist
NEC New Zealand Limited
NEC House, Level 6, 40 Taranaki Street, PO Box: 1936, Wellington 6011, New Zealand
T: 043816235, M: 0275037273, F: +6443811110
gerard.ratcliffe at nec.co.nz<mailto:gerard.ratcliffe at nec.co.nz>
nz.nec.com<http://nz.nec.com>

[cid:imaged4ec5b.JPG at a67f1d87.49b01b71]

Please consider the environment before printing this email

Attention:
The information contained in this message and or attachments is intended only for the person or entity to which it is addressed and may contain confidential and/or privileged material.  Any review, retransmission, dissemination, copying or other use of, or taking of any action in reliance upon, this information by persons or entities other than the intended recipient is prohibited. If you received this in error, please contact the sender and delete the material from any system and destroy any copies. NEC has no liability for any act or omission in reliance on the email or any attachment.  Before opening this email or any attachment(s), please check them for viruses. NEC is not responsible for any viruses in this email or any attachment(s); any changes made to this  email or any attachment(s) after they are sent; or any effects this email or any attachment(s) have on your network or computer system.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161004/a018cee0/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: imaged4ec5b.JPG
Type: image/jpeg
Size: 14513 bytes
Desc: imaged4ec5b.JPG
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161004/a018cee0/attachment.jpe>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: WN-ibcf-memory-checks-041016.txt
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161004/a018cee0/attachment.txt>

From eleanor at projectclearwater.org  Wed Oct  5 12:03:08 2016
From: eleanor at projectclearwater.org (Eleanor Merry (projectclearwater.org))
Date: Wed, 5 Oct 2016 16:03:08 +0000
Subject: [Project Clearwater] Clearwater IMS in docker
In-Reply-To: <AT5PR84MB00194F77295D81642B3002D6E1C10@AT5PR84MB0019.NAMPRD84.PROD.OUTLOOK.COM>
References: <AT5PR84MB00194F77295D81642B3002D6E1C10@AT5PR84MB0019.NAMPRD84.PROD.OUTLOOK.COM>
Message-ID: <BY2PR02MB208688A966FE42900BC1BEC89BC40@BY2PR02MB2086.namprd02.prod.outlook.com>

Hi Linda,

Our current source at https://github.com/Metaswitch/clearwater-docker will allow you to spin up a distributed Clearwater deployment. We're making some enhancements to clearwater-docker over the next couple of weeks as well to improve our docker support.

We don't have our code integrated with the docker registry at this moment.

Ellie

From: Clearwater [mailto:clearwater-bounces at lists.projectclearwater.org] On Behalf Of Zhu, Liu-Juan (Linda, CMS CoE China)
Sent: 30 September 2016 06:22
To: clearwater at lists.projectclearwater.org
Subject: [Project Clearwater] Clearwater IMS in docker

Dear all,

I would like to consult 2 questions:


1)      Is it possible for us to get the docker image (all-in-one or distributed) officially ?

2)      Does the current source code provided from https://github.com/Metaswitch/clearwater-docker is good enough for installing the Clearwater IMS in docker successfully?

Thank you very much for your support and look forward our response at your earliest.


Best Regards,
Linda

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161005/693fa0a5/attachment.html>

From eleanor at projectclearwater.org  Wed Oct  5 12:03:31 2016
From: eleanor at projectclearwater.org (Eleanor Merry (projectclearwater.org))
Date: Wed, 5 Oct 2016 16:03:31 +0000
Subject: [Project Clearwater] ibcf (bono) VM using up a lot of memory
In-Reply-To: <824d19d0292048fe95cad64014b4aa8d@ex15w.necnz.internal>
References: <824d19d0292048fe95cad64014b4aa8d@ex15w.necnz.internal>
Message-ID: <BY2PR02MB208612A24CE8DB049A4AE3F59BC40@BY2PR02MB2086.namprd02.prod.outlook.com>

Hi,

I don?t think the output you?ve put below shows that there?s only 6% free memory. You want the value in the -/+ buffers/cache (which includes memory that Linux is using for disk caching, but can be taken by applications if they need more memory).

There?s possibly a memory leak somewhere though, as you had 3820636 available after the restart compared to 3630472, but it?s not as severe as you might think. To track down the memory leak, you can run Bono under a profiling tool (we use massif ? see http://clearwater.readthedocs.io/en/stable/Debugging_Bono_Sprout_and_Homestead_with_GDB_and_Valgrind.html for more details).

Also, it?s worth noting that we wouldn?t typically expect Bono to be used in a production environment. We?d normally deploy Clearwater with Perimeta (http://www.metaswitch.com/perimeta-session-border-controller-sbc) rather than Bono.

Ellie


From: Clearwater [mailto:clearwater-bounces at lists.projectclearwater.org] On Behalf Of Gerard Ratcliffe
Sent: 04 October 2016 03:18
To: clearwater at lists.projectclearwater.org
Cc: Rene Anino; Bill Clemens; Richard Lawrence
Subject: [Project Clearwater] ibcf (bono) VM using up a lot of memory

Hi,

This is my first post on this forum I am also new to Clearwater IMS.  In fact I am babysitting our Clearwater IMS while our developer is on leave.

We have a manual install of bono/sprout/homestead/ibcf/dns being used as an
interface between Voip UE?s and a PSTN, running on 5 VM?s. They are connected
via a private virtual switch, and only the bono and ibcf nodes are connected to
an external network interface for external sip signalling. This setup is
working with no problems.  At present we have four of these IMSs setup.  Two of them in test sites (one for us one for the customer) and two in production sites.  Only one production site is carrying live traffic.

Last week I got an alert to say that one of the production ibcf VMs was running out of free memory.  Fortunately this was on the production IMS that was not carrying live traffic. My colleague had warned me that the VMs were slowly using up memory and that I should check them periodically to make sure that the free memory was not getting to low.

The ibcf free memory was down to less than 6%.  I restarted the VM and this sorted out the problem.  I also checked the other VMs in the both the production IMSs and they were all above 30%.  At this point I thought that the problem had been resolved.

However, today we received the same alaert for the ibcf VM.  Once again, the VM, was down to less than 6% free memory.

[bono]nec at ibcf:~$ free
             total       used       free     shared    buffers     cached
Mem:       4041496    3809652     231844        224     151596    3247032
-/+ buffers/cache:     411024    3630472
Swap:      2093052        320    2092732
[bono]nec at ibcf:~$


I restarted the VM again and this dropped the free memory back to about 90%

[bono]nec at ibcf:~$ free
             total       used       free     shared    buffers     cached
Mem:       4041496     386116    3655380        444      14528     150728
-/+ buffers/cache:     220860    3820636
Swap:      2093052          0    2093052
[bono]nec at ibcf:~$

I have attached a file with some of the checking that I did before and after the restart.

Has anyone else experienced this problem and are there any checks that can be done to try and isolate the leaky process.

Regards,
Gerard




Gerard Ratcliffe
Technical Specialist
NEC New Zealand Limited
NEC House, Level 6, 40 Taranaki Street, PO Box: 1936, Wellington 6011, New Zealand
T: 043816235, M: 0275037273, F: +6443811110
gerard.ratcliffe at nec.co.nz<mailto:gerard.ratcliffe at nec.co.nz>
nz.nec.com<http://nz.nec.com>

[cid:image002.jpg at 01D21F24.1960BE60]

Please consider the environment before printing this email

Attention:
The information contained in this message and or attachments is intended only for the person or entity to which it is addressed and may contain confidential and/or privileged material.  Any review, retransmission, dissemination, copying or other use of, or taking of any action in reliance upon, this information by persons or entities other than the intended recipient is prohibited. If you received this in error, please contact the sender and delete the material from any system and destroy any copies. NEC has no liability for any act or omission in reliance on the email or any attachment.  Before opening this email or any attachment(s), please check them for viruses. NEC is not responsible for any viruses in this email or any attachment(s); any changes made to this  email or any attachment(s) after they are sent; or any effects this email or any attachment(s) have on your network or computer system.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161005/580bbb0f/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.jpg
Type: image/jpeg
Size: 7574 bytes
Desc: image002.jpg
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161005/580bbb0f/attachment.jpg>

From eleanor at projectclearwater.org  Wed Oct  5 12:03:13 2016
From: eleanor at projectclearwater.org (Eleanor Merry (projectclearwater.org))
Date: Wed, 5 Oct 2016 16:03:13 +0000
Subject: [Project Clearwater] Integration of Open HSS_All-in-one
In-Reply-To: <16AE9ED83DBA5B4D85B058EAF39C918107E1CD5D@NDA-HCLT-MBS05.hclt.corp.hcl.in>
References: <16AE9ED83DBA5B4D85B058EAF39C918107E1CD5D@NDA-HCLT-MBS05.hclt.corp.hcl.in>
Message-ID: <BY2PR02MB208601E0BE02E519E388BE8A9BC40@BY2PR02MB2086.namprd02.prod.outlook.com>

Hi Surender,

To use an external HSS you'll need to set the following settings in /etc/clearwater/shared_config

hss_hostname=<address of your HSS>
hss_realm=<realm your HSS is located in>
hss_port=<port of your HSS's Cx interface>

Both hss_hostname and hss_realm are optional. If a realm is configured, homestead will try NAPTR/SRV resolution on the realm to find and connect to (2 by default) diameter peers in the realm.
If a hostname is also configured, this will be used in the Destination-Host field on the diameter messages, so that the messages will be routed to that host.
If just a hostname is configured, homestead will just attempt to create and maintain a single connection to that host.

You can find more information on this at http://clearwater.readthedocs.io/en/latest/External_HSS_Integration.html, and you may also find http://clearwater.readthedocs.io/en/latest/OpenIMSCore_HSS_Integration.html useful.

For your other queries:

1. You can configure subscribers to use an application server that provides these functions by setting their IFCs in the HSS. You can use the MMTel application server built into Clearwater for this - see the details at http://clearwater.readthedocs.io/en/latest/OpenIMSCore_HSS_Integration.html#adding-the-mmtel-application-server for more information.

2. The key restrictions of the all-in-one solutions are:
* hard-coded realm - the all-in-one image uses a hard-coded realm of example.com so your SIP URI might be sip:6505551234 at example.com - by default, SIP uses this realm for routing but example.com won't resolve to your host so you need to configure an outbound proxy on all your SIP clients
* performance - since all software runs on a single virtual machine, performance is significantly lower than even the smallest scale deployment
* scalability - there is no option to scale up and add more virtual machines to boost capacity - for this, you must create a normal deployment
* fault-tolerance - since everything runs on a single virtual machine, if that virtual machine fails, the service as a whole fails.

3. I didn't understand this question. What's the 'other DNS'?

Ellie

From: Clearwater [mailto:clearwater-bounces at lists.projectclearwater.org] On Behalf Of Surender Singh
Sent: 03 October 2016 07:11
To: clearwater at lists.projectclearwater.org
Subject: [Project Clearwater] Integration of Open HSS_All-in-one

Hello,

I deployed the All in one solution in VMware machine .My IN-OUT calls are working to other network using BGCF/IBCF feature .

Now i want Integrate the Open HSS with Homestead node .Can you suggest me where I need to make the entry in aio solution .

I having some below query..


1)      Can we provision the basic supplementary  service (CF Service, Three Party, Call-Transfer , Call park  etc .) in open HSS.

2)      Any other drawbacks of the all-in-one solution apart from Performance /Production.

3)      Can i integrate the other DNS for DNS query .

Regards
Surender Singh








::DISCLAIMER::
----------------------------------------------------------------------------------------------------------------------------------------------------
The contents of this e-mail and any attachment(s) are confidential and intended for the named recipient(s) only.
E-mail transmission is not guaranteed to be secure or error-free as information could be intercepted, corrupted,
lost, destroyed, arrive late or incomplete, or may contain viruses in transmission. The e mail and its contents
(with or without referred errors) shall therefore not attach any liability on the originator or HCL or its affiliates.
Views or opinions, if any, presented in this email are solely those of the author and may not necessarily reflect the
views or opinions of HCL or its affiliates. Any form of reproduction, dissemination, copying, disclosure, modification,
distribution and / or publication of this message without the prior written consent of authorized representative of
HCL is strictly prohibited. If you have received this email in error please delete it and notify the sender immediately.
Before opening any email and/or attachments, please check them for viruses and other defects.
----------------------------------------------------------------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161005/2ddbd5cf/attachment.html>

From surender.s at hcl.com  Fri Oct  7 04:05:30 2016
From: surender.s at hcl.com (Surender Singh)
Date: Fri, 7 Oct 2016 08:05:30 +0000
Subject: [Project Clearwater] Integration of Open HSS_All-in-one
Message-ID: <16AE9ED83DBA5B4D85B058EAF39C918107E1D2BA@NDA-HCLT-MBS05.hclt.corp.hcl.in>

Hi Eliie,

Thanks for support..

I followed  the instruction but I having confusion ,In which machine (Clearwater deployed machine or Open HSS machine ) need to execute the below  commands. 

http://clearwater.readthedocs.io/en/stable/OpenIMSCore_HSS_Integration.html?highlight=hss

sudo apt-get update; 
sudo apt-get install openimscore-fhoss

If I need to execute the above commands in Clearwater IMS machine ,then what is use of commands because HSS is deployed in another machine.



I also having one more issue while deploying the open HSS, not able to Check out the SVN repository . I followed the below link .Getting connection time out error.

http://www.openimscore.org/documentation/installation-guide/

Regards
Surender Singh
8826292018



Message: 1
Date: Wed, 5 Oct 2016 16:03:13 +0000
From: "Eleanor Merry (projectclearwater.org)"
	<eleanor at projectclearwater.org>
To: "clearwater at lists.projectclearwater.org"
	<clearwater at lists.projectclearwater.org>
Subject: Re: [Project Clearwater] Integration of Open HSS_All-in-one
Message-ID:
	<BY2PR02MB208601E0BE02E519E388BE8A9BC40 at BY2PR02MB2086.namprd02.prod.outlook.com>
	
Content-Type: text/plain; charset="us-ascii"

Hi Surender,

To use an external HSS you'll need to set the following settings in /etc/clearwater/shared_config

hss_hostname=<address of your HSS>
hss_realm=<realm your HSS is located in> hss_port=<port of your HSS's Cx interface>

Both hss_hostname and hss_realm are optional. If a realm is configured, homestead will try NAPTR/SRV resolution on the realm to find and connect to (2 by default) diameter peers in the realm.
If a hostname is also configured, this will be used in the Destination-Host field on the diameter messages, so that the messages will be routed to that host.
If just a hostname is configured, homestead will just attempt to create and maintain a single connection to that host.

You can find more information on this at http://clearwater.readthedocs.io/en/latest/External_HSS_Integration.html, and you may also find http://clearwater.readthedocs.io/en/latest/OpenIMSCore_HSS_Integration.html useful.

For your other queries:

1. You can configure subscribers to use an application server that provides these functions by setting their IFCs in the HSS. You can use the MMTel application server built into Clearwater for this - see the details at http://clearwater.readthedocs.io/en/latest/OpenIMSCore_HSS_Integration.html#adding-the-mmtel-application-server for more information.

2. The key restrictions of the all-in-one solutions are:
* hard-coded realm - the all-in-one image uses a hard-coded realm of example.com so your SIP URI might be sip:6505551234 at example.com - by default, SIP uses this realm for routing but example.com won't resolve to your host so you need to configure an outbound proxy on all your SIP clients
* performance - since all software runs on a single virtual machine, performance is significantly lower than even the smallest scale deployment
* scalability - there is no option to scale up and add more virtual machines to boost capacity - for this, you must create a normal deployment
* fault-tolerance - since everything runs on a single virtual machine, if that virtual machine fails, the service as a whole fails.

3. I didn't understand this question. What's the 'other DNS'?

Ellie

From: Clearwater [mailto:clearwater-bounces at lists.projectclearwater.org] On Behalf Of Surender Singh
Sent: 03 October 2016 07:11
To: clearwater at lists.projectclearwater.org
Subject: [Project Clearwater] Integration of Open HSS_All-in-one

Hello,

I deployed the All in one solution in VMware machine .My IN-OUT calls are working to other network using BGCF/IBCF feature .

Now i want Integrate the Open HSS with Homestead node .Can you suggest me where I need to make the entry in aio solution .

I having some below query..


1)      Can we provision the basic supplementary  service (CF Service, Three Party, Call-Transfer , Call park  etc .) in open HSS.

2)      Any other drawbacks of the all-in-one solution apart from Performance /Production.

3)      Can i integrate the other DNS for DNS query .

Regards
Surender Singh








::DISCLAIMER::
----------------------------------------------------------------------------------------------------------------------------------------------------
The contents of this e-mail and any attachment(s) are confidential and intended for the named recipient(s) only.
E-mail transmission is not guaranteed to be secure or error-free as information could be intercepted, corrupted, lost, destroyed, arrive late or incomplete, or may contain viruses in transmission. The e mail and its contents (with or without referred errors) shall therefore not attach any liability on the originator or HCL or its affiliates.
Views or opinions, if any, presented in this email are solely those of the author and may not necessarily reflect the views or opinions of HCL or its affiliates. Any form of reproduction, dissemination, copying, disclosure, modification, distribution and / or publication of this message without the prior written consent of authorized representative of HCL is strictly prohibited. If you have received this email in error please delete it and notify the sender immediately.
Before opening any email and/or attachments, please check them for viruses and other defects.
----------------------------------------------------------------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161005/2ddbd5cf/attachment-0001.html>

------------------------------

Subject: Digest Footer

_______________________________________________
Clearwater mailing list
Clearwater at lists.projectclearwater.org
http://lists.projectclearwater.org/mailman/listinfo/clearwater_lists.projectclearwater.org


------------------------------

End of Clearwater Digest, Vol 42, Issue 4
*****************************************



From adinan.sousa at gmail.com  Fri Oct  7 19:56:05 2016
From: adinan.sousa at gmail.com (Adinan Sousa)
Date: Fri, 7 Oct 2016 20:56:05 -0300
Subject: [Project Clearwater] Installation support
Message-ID: <CAM2_mL5CerFJLsS6uqw4ONenXZzmiH5kO6D+wArNGT4n+X6dXQ@mail.gmail.com>

Hello,

  I am trying to install Clearwater project (manual) by following the steps
from  http://clearwater.readthedocs.io/en/stable/Manual_Install.html, but
I am facing the following problem, then could you please support me on that:


On each machine was defined the local_config file as described on the
tutorial as example depicts below:

[image: Imagem inline 1]

and installed the specif software for each node, but when given the command
sudo clearwater-etcdctl cluster-health I got the following error message
for the node ellis, homer, homestead and Ralf, considering the respective
IPs on the error. It is possible to ping between the nodes.

[image: Imagem inline 2]

When given the command sudo monit summary for ellis, I have seen that
etcd_process does not exist.

[image: Imagem inline 3]

in the case of homer, the homer process failed.

[image: Imagem inline 4]


Thanks in advance,
Adinan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161007/3e0580e6/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 6252 bytes
Desc: not available
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161007/3e0580e6/attachment.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 5903 bytes
Desc: not available
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161007/3e0580e6/attachment-0001.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 30551 bytes
Desc: not available
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161007/3e0580e6/attachment-0002.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 29738 bytes
Desc: not available
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161007/3e0580e6/attachment-0003.png>

From surender.s at hcl.com  Mon Oct 10 04:36:55 2016
From: surender.s at hcl.com (Surender Singh)
Date: Mon, 10 Oct 2016 08:36:55 +0000
Subject: [Project Clearwater] Integration of Open HSS_All-in-one
Message-ID: <16AE9ED83DBA5B4D85B058EAF39C918107E1D538@NDA-HCLT-MBS05.hclt.corp.hcl.in>

Hello,

Please help to deploy the Openims FHoSS.

I followed the below link only 

http://www.openimscore.org/documentation/installation-guide/

but I having confusion in below link 

http://clearwater.readthedocs.io/en/stable/OpenIMSCore_HSS_Integration.html?highlight=hss

My Open IMS FhoSS side xml file is ..

<?xml version="1.0" encoding="UTF-8"?>
<!-- HSS Server config -->
<DiameterPeer 
	FQDN="hss.open-ims.test"
	Realm="example.com"
	Vendor_Id="10415"
	Product_Name="JavaDiameterPeer"
	AcceptUnknownPeers="1"
	DropUnknownOnDisconnect="1"
	Tc="30"
	Workers="4"
	QueueLength="32"
>
	
	<Acceptor port="3868" bind="10.112.87.250" />
	
	<Auth id="16777216" vendor="10415"/><!-- 3GPP Cx -->
	<Auth id="16777216" vendor="4491"/><!-- CableLabs Cx -->
	<Auth id="16777216" vendor="13019"/><!-- ETSI/TISPAN Cx -->
	<Auth id="16777216" vendor="0"/><!-- ETSI/TISPAN Cx -->
	<Auth id="16777217" vendor="10415"/><!-- 3GPP Sh -->
	<Auth id="16777221" vendor="10415"/>

</DiameterPeer>

And Shared config File is .


# Deployment definitions
home_domain=example.com
sprout_hostname=cw-aio
hs_hostname=10.112.87.132:3868
hs_provisioning_hostname=10.112.87.250:8889
xdms_hostname=10.112.87.250:7888
ralf_hostname=

# Email server configuration
smtp_smarthost=127.0.0.1
smtp_username=username
smtp_password=password
email_recovery_sender=clearwater at example.com

# I-CSCF/S-CSCF configuration
upstream_hostname=scscf.cw-aio

# Keys
signup_key=secret
turn_workaround=secret
ellis_api_key=secret
ellis_cookie_key=secret

reduce_cassandra_mem_usage=Y

enum_file=enum.json


Regards
Surender Singh

-----Original Message-----
From: Surender Singh 
Sent: 07 October 2016 13:35
To: clearwater at lists.projectclearwater.org
Subject: Integration of Open HSS_All-in-one

Hi Eliie,

Thanks for support..

I followed  the instruction but I having confusion ,In which machine (Clearwater deployed machine or Open HSS machine ) need to execute the below  commands. 

http://clearwater.readthedocs.io/en/stable/OpenIMSCore_HSS_Integration.html?highlight=hss

sudo apt-get update; 
sudo apt-get install openimscore-fhoss

If I need to execute the above commands in Clearwater IMS machine ,then what is use of commands because HSS is deployed in another machine.



I also having one more issue while deploying the open HSS, not able to Check out the SVN repository . I followed the below link .Getting connection time out error.

http://www.openimscore.org/documentation/installation-guide/

Regards
Surender Singh
8826292018



Message: 1
Date: Wed, 5 Oct 2016 16:03:13 +0000
From: "Eleanor Merry (projectclearwater.org)"
	<eleanor at projectclearwater.org>
To: "clearwater at lists.projectclearwater.org"
	<clearwater at lists.projectclearwater.org>
Subject: Re: [Project Clearwater] Integration of Open HSS_All-in-one
Message-ID:
	<BY2PR02MB208601E0BE02E519E388BE8A9BC40 at BY2PR02MB2086.namprd02.prod.outlook.com>
	
Content-Type: text/plain; charset="us-ascii"

Hi Surender,

To use an external HSS you'll need to set the following settings in /etc/clearwater/shared_config

hss_hostname=<address of your HSS>
hss_realm=<realm your HSS is located in> hss_port=<port of your HSS's Cx interface>

Both hss_hostname and hss_realm are optional. If a realm is configured, homestead will try NAPTR/SRV resolution on the realm to find and connect to (2 by default) diameter peers in the realm.
If a hostname is also configured, this will be used in the Destination-Host field on the diameter messages, so that the messages will be routed to that host.
If just a hostname is configured, homestead will just attempt to create and maintain a single connection to that host.

You can find more information on this at http://clearwater.readthedocs.io/en/latest/External_HSS_Integration.html, and you may also find http://clearwater.readthedocs.io/en/latest/OpenIMSCore_HSS_Integration.html useful.

For your other queries:

1. You can configure subscribers to use an application server that provides these functions by setting their IFCs in the HSS. You can use the MMTel application server built into Clearwater for this - see the details at http://clearwater.readthedocs.io/en/latest/OpenIMSCore_HSS_Integration.html#adding-the-mmtel-application-server for more information.

2. The key restrictions of the all-in-one solutions are:
* hard-coded realm - the all-in-one image uses a hard-coded realm of example.com so your SIP URI might be sip:6505551234 at example.com - by default, SIP uses this realm for routing but example.com won't resolve to your host so you need to configure an outbound proxy on all your SIP clients
* performance - since all software runs on a single virtual machine, performance is significantly lower than even the smallest scale deployment
* scalability - there is no option to scale up and add more virtual machines to boost capacity - for this, you must create a normal deployment
* fault-tolerance - since everything runs on a single virtual machine, if that virtual machine fails, the service as a whole fails.

3. I didn't understand this question. What's the 'other DNS'?

Ellie

From: Clearwater [mailto:clearwater-bounces at lists.projectclearwater.org] On Behalf Of Surender Singh
Sent: 03 October 2016 07:11
To: clearwater at lists.projectclearwater.org
Subject: [Project Clearwater] Integration of Open HSS_All-in-one

Hello,

I deployed the All in one solution in VMware machine .My IN-OUT calls are working to other network using BGCF/IBCF feature .

Now i want Integrate the Open HSS with Homestead node .Can you suggest me where I need to make the entry in aio solution .

I having some below query..


1)      Can we provision the basic supplementary  service (CF Service, Three Party, Call-Transfer , Call park  etc .) in open HSS.

2)      Any other drawbacks of the all-in-one solution apart from Performance /Production.

3)      Can i integrate the other DNS for DNS query .

Regards
Surender Singh








::DISCLAIMER::
----------------------------------------------------------------------------------------------------------------------------------------------------
The contents of this e-mail and any attachment(s) are confidential and intended for the named recipient(s) only.
E-mail transmission is not guaranteed to be secure or error-free as information could be intercepted, corrupted, lost, destroyed, arrive late or incomplete, or may contain viruses in transmission. The e mail and its contents (with or without referred errors) shall therefore not attach any liability on the originator or HCL or its affiliates.
Views or opinions, if any, presented in this email are solely those of the author and may not necessarily reflect the views or opinions of HCL or its affiliates. Any form of reproduction, dissemination, copying, disclosure, modification, distribution and / or publication of this message without the prior written consent of authorized representative of HCL is strictly prohibited. If you have received this email in error please delete it and notify the sender immediately.
Before opening any email and/or attachments, please check them for viruses and other defects.
----------------------------------------------------------------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161005/2ddbd5cf/attachment-0001.html>

------------------------------

Subject: Digest Footer

_______________________________________________
Clearwater mailing list
Clearwater at lists.projectclearwater.org
http://lists.projectclearwater.org/mailman/listinfo/clearwater_lists.projectclearwater.org


------------------------------

End of Clearwater Digest, Vol 42, Issue 4
*****************************************



From surender.s at hcl.com  Wed Oct 12 02:45:52 2016
From: surender.s at hcl.com (Surender Singh)
Date: Wed, 12 Oct 2016 06:45:52 +0000
Subject: [Project Clearwater] Integration of Open HSS_All-in-one
Message-ID: <16AE9ED83DBA5B4D85B058EAF39C918107E1D5F3@NDA-HCLT-MBS05.hclt.corp.hcl.in>

Hi Ellie,

I am unable to establish diameter link with Open HSS.  Please find below logs (homestead) and configuration .

12-10-2016 12:00:03.815 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 12:00:03.821 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 12:00:03.821 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 12:00:03.821 UTC Debug realmmanager.cpp:381: Adding peer: 10.112.87.132
12-10-2016 12:00:03.821 UTC Debug freeDiameter: Diameter peer 10.112.87.132 added
12-10-2016 12:00:03.821 UTC Debug freeDiameter: New global list of peers:
{peer}(@0x7f2acc016070): 10.112.87.132 [STATE_ZOMBIE, cnt:0sr,0pa]
{peer}(@0x7f2acc010f80): 10.112.87.132 [STATE_ZOMBIE, cnt:0sr,0pa]
{peer}(@0x7f2acc0124b0): 10.112.87.132 [STATE_ZOMBIE, cnt:0sr,0pa]
{peer}(@0x7f2acc010a40): 10.112.87.132 [STATE_ZOMBIE, cnt:0sr,0pa]
{peer}(@0x7f2acc0104c0): 10.112.87.132 [STATE_ZOMBIE, cnt:0sr,0pa]
{peer}(@0x7f2acc0113d0): 10.112.87.132 [STATE_ZOMBIE, cnt:0sr,0pa]
{peer}(@0x7f2acc011f80): 10.112.87.132 [STATE_ZOMBIE, cnt:0sr,0pa]
{peer}(@0x7f2acc011c60): 10.112.87.132 [STATE_ZOMBIE, cnt:0sr,0pa]
{peer}(@0x7f2acc0131b0): 10.112.87.132 [STATE_NEW, cnt:0sr,0pa]
12-10-2016 12:00:03.821 UTC Warning diameterstack.cpp:858: No connected Diameter peers have been found
12-10-2016 12:00:03.821 UTC Debug freeDiameter: Peer timeout reset to 0 seconds (+/- 2)
12-10-2016 12:00:03.821 UTC Debug freeDiameter: '10.112.87.132' in state 'STATE_CLOSED' waiting for next event.
12-10-2016 12:00:04.792 UTC Debug freeDiameter: 'STATE_CLOSED'	<-- 'FDEVP_PSM_TIMEOUT'	((nil),0)	'10.112.87.132'
12-10-2016 12:00:04.792 UTC Debug freeDiameter: 10.112.87.132: Connecting...
12-10-2016 12:00:04.792 UTC Debug freeDiameter: 'STATE_CLOSED'	-> 'STATE_WAITCNXACK'	'10.112.87.132'
12-10-2016 12:00:04.792 UTC Debug freeDiameter: Peer timeout reset to 10 seconds
12-10-2016 12:00:04.792 UTC Debug freeDiameter: '10.112.87.132' in state 'STATE_WAITCNXACK' waiting for next event.
12-10-2016 12:00:04.792 UTC Debug freeDiameter: Prepared 1 sets of connection parameters to peer 10.112.87.132
12-10-2016 12:00:04.793 UTC Debug freeDiameter: Connecting to TCP 10.112.87.132(3868)...
12-10-2016 12:00:04.793 UTC Debug freeDiameter: TCP connection to 10.112.87.132(3868) failed: Connection refused
12-10-2016 12:00:04.793 UTC Debug diameterstack.cpp:371: Callback (type 11) from freeDiameter: 10.112.87.132
12-10-2016 12:00:04.793 UTC Error realmmanager.cpp:142: Failed to connect to 10.112.87.132
12-10-2016 12:00:04.793 UTC Debug baseresolver.cpp:498: Add 10.112.87.132:3868 transport 132 to blacklist for 30 seconds, graylist for 0 seconds
12-10-2016 12:00:04.793 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 12:00:04.793 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 12:00:04.793 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 12:00:04.793 UTC Debug realmmanager.cpp:381: Adding peer: 10.112.87.132
12-10-2016 12:00:04.793 UTC Info diameterstack.cpp:833: Peer already exists
12-10-2016 12:00:04.793 UTC Debug realmmanager.cpp:389: Peer already exists: 10.112.87.132
12-10-2016 12:00:04.793 UTC Warning diameterstack.cpp:858: No connected Diameter peers have been found
12-10-2016 12:00:04.793 UTC Debug freeDiameter: 'STATE_WAITCNXACK'	<-- 'FDEVP_CNX_FAILED'	((nil),0)	'10.112.87.132'
12-10-2016 12:00:04.793 UTC Debug freeDiameter: Peer timeout reset to 30 seconds (+/- 2)
12-10-2016 12:00:04.793 UTC Debug freeDiameter: 'STATE_WAITCNXACK'	-> 'STATE_CLOSED'	'10.112.87.132'
12-10-2016 12:00:04.793 UTC Debug freeDiameter: '10.112.87.132' in state 'STATE_CLOSED' waiting for next event.
12-10-2016 12:00:04.793 UTC Debug freeDiameter: 'STATE_CLOSED'	<-- 'FDEVP_TERMINATE'	((nil),0)	'10.112.87.132'
12-10-2016 12:00:04.793 UTC Status freeDiameter: 10.112.87.132: Going to ZOMBIE state (no more activity)
12-10-2016 12:00:04.793 UTC Status freeDiameter: 'STATE_CLOSED'	-> STATE_ZOMBIE (terminated)	'10.112.87.132'
12-10-2016 12:00:04.964 UTC Verbose httpstack.cpp:293: Process request for URL /ping, args (null)
12-10-2016 12:00:04.964 UTC Verbose httpstack.cpp:69: Sending response 200 to request for URL /ping, args (null)
12-10-2016 12:00:05.228 UTC Debug alarm.cpp:253: Reraising all alarms with a known state
12-10-2016 12:00:09.793 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 12:00:09.793 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 12:00:09.793 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 12:00:09.793 UTC Debug realmmanager.cpp:381: Adding peer: 10.112.87.132
12-10-2016 12:00:09.793 UTC Debug freeDiameter: Diameter peer 10.112.87.132 added
12-10-2016 12:00:09.793 UTC Debug freeDiameter: New global list of peers:
{peer}(@0x7f2acc016070): 10.112.87.132 [STATE_ZOMBIE, cnt:0sr,0pa]
{peer}(@0x7f2acc010f80): 10.112.87.132 [STATE_ZOMBIE, cnt:0sr,0pa]
{peer}(@0x7f2acc0124b0): 10.112.87.132 [STATE_ZOMBIE, cnt:0sr,0pa]
{peer}(@0x7f2acc010a40): 10.112.87.132 [STATE_ZOMBIE, cnt:0sr,0pa]
{peer}(@0x7f2acc0104c0): 10.112.87.132 [STATE_ZOMBIE, cnt:0sr,0pa]
{peer}(@0x7f2acc0113d0): 10.112.87.132 [STATE_ZOMBIE, cnt:0sr,0pa]
{peer}(@0x7f2acc011f80): 10.112.87.132 [STATE_ZOMBIE, cnt:0sr,0pa]
{peer}(@0x7f2acc011c60): 10.112.87.132 [STATE_ZOMBIE, cnt:0sr,0pa]
{peer}(@0x7f2acc0131b0): 10.112.87.132 [STATE_ZOMBIE, cnt:0sr,0pa]
{peer}(@0x7f2acc013860): 10.112.87.132 [STATE_NEW, cnt:0sr,0pa]

-------------------------------------------------------Shared_config-----------------------------------------

# Deployment definitions
home_domain=open-ims.test
sprout_hostname=cw-aio
hs_hostname=10.112.87.250:8888
hs_provisioning_hostname=10.112.87.250:8889
xdms_hostname=10.112.87.250:7888
ralf_hostname=

# Email server configuration
smtp_smarthost=127.0.0.1
smtp_username=username
smtp_password=password
email_recovery_sender=clearwater at example.com

# I-CSCF/S-CSCF configuration
upstream_hostname=scscf.cw-aio

# Keys
signup_key=secret
turn_workaround=secret
ellis_api_key=secret
ellis_cookie_key=secret

reduce_cassandra_mem_usage=Y

# HSS configuration
hss_hostname=10.112.87.132
hss_port=3868

enum_file=enum.json


--------------------------------------DaimeterPeerHSS.xml------------------------------

<?xml version="1.0" encoding="UTF-8"?>
<!-- HSS Server config -->
<DiameterPeer 
	FQDN="hss.open-ims.test"
	Realm="open-ims.test"
	Vendor_Id="10415"
	Product_Name="JavaDiameterPeer"
	AcceptUnknownPeers="1"
	DropUnknownOnDisconnect="1"
	Tc="30"
	Workers="4"
	QueueLength="32"
>
	
	<Acceptor port="3868" bind="10.112.87.132" />
	
	<Auth id="16777216" vendor="10415"/><!-- 3GPP Cx -->
	<Auth id="16777216" vendor="4491"/><!-- CableLabs Cx -->
	<Auth id="16777216" vendor="13019"/><!-- ETSI/TISPAN Cx -->
	<Auth id="16777216" vendor="0"/><!-- ETSI/TISPAN Cx -->
	<Auth id="16777217" vendor="10415"/><!-- 3GPP Sh -->
	<Auth id="16777221" vendor="10415"/>

</DiameterPeer>



Message: 1
Date: Wed, 5 Oct 2016 16:03:13 +0000
From: "Eleanor Merry (projectclearwater.org)"
	<eleanor at projectclearwater.org>
To: "clearwater at lists.projectclearwater.org"
	<clearwater at lists.projectclearwater.org>
Subject: Re: [Project Clearwater] Integration of Open HSS_All-in-one
Message-ID:
	<BY2PR02MB208601E0BE02E519E388BE8A9BC40 at BY2PR02MB2086.namprd02.prod.outlook.com>
	
Content-Type: text/plain; charset="us-ascii"

Hi Surender,

To use an external HSS you'll need to set the following settings in /etc/clearwater/shared_config

hss_hostname=<address of your HSS>
hss_realm=<realm your HSS is located in> hss_port=<port of your HSS's Cx interface>

Both hss_hostname and hss_realm are optional. If a realm is configured, homestead will try NAPTR/SRV resolution on the realm to find and connect to (2 by default) diameter peers in the realm.
If a hostname is also configured, this will be used in the Destination-Host field on the diameter messages, so that the messages will be routed to that host.
If just a hostname is configured, homestead will just attempt to create and maintain a single connection to that host.

You can find more information on this at http://clearwater.readthedocs.io/en/latest/External_HSS_Integration.html, and you may also find http://clearwater.readthedocs.io/en/latest/OpenIMSCore_HSS_Integration.html useful.

For your other queries:

1. You can configure subscribers to use an application server that provides these functions by setting their IFCs in the HSS. You can use the MMTel application server built into Clearwater for this - see the details at http://clearwater.readthedocs.io/en/latest/OpenIMSCore_HSS_Integration.html#adding-the-mmtel-application-server for more information.

2. The key restrictions of the all-in-one solutions are:
* hard-coded realm - the all-in-one image uses a hard-coded realm of example.com so your SIP URI might be sip:6505551234 at example.com - by default, SIP uses this realm for routing but example.com won't resolve to your host so you need to configure an outbound proxy on all your SIP clients
* performance - since all software runs on a single virtual machine, performance is significantly lower than even the smallest scale deployment
* scalability - there is no option to scale up and add more virtual machines to boost capacity - for this, you must create a normal deployment
* fault-tolerance - since everything runs on a single virtual machine, if that virtual machine fails, the service as a whole fails.

3. I didn't understand this question. What's the 'other DNS'?

Ellie

From: Clearwater [mailto:clearwater-bounces at lists.projectclearwater.org] On Behalf Of Surender Singh
Sent: 03 October 2016 07:11
To: clearwater at lists.projectclearwater.org
Subject: [Project Clearwater] Integration of Open HSS_All-in-one

Hello,

I deployed the All in one solution in VMware machine .My IN-OUT calls are working to other network using BGCF/IBCF feature .

Now i want Integrate the Open HSS with Homestead node .Can you suggest me where I need to make the entry in aio solution .

I having some below query..


1)      Can we provision the basic supplementary  service (CF Service, Three Party, Call-Transfer , Call park  etc .) in open HSS.

2)      Any other drawbacks of the all-in-one solution apart from Performance /Production.

3)      Can i integrate the other DNS for DNS query .

Regards
Surender Singh








::DISCLAIMER::
----------------------------------------------------------------------------------------------------------------------------------------------------
The contents of this e-mail and any attachment(s) are confidential and intended for the named recipient(s) only.
E-mail transmission is not guaranteed to be secure or error-free as information could be intercepted, corrupted, lost, destroyed, arrive late or incomplete, or may contain viruses in transmission. The e mail and its contents (with or without referred errors) shall therefore not attach any liability on the originator or HCL or its affiliates.
Views or opinions, if any, presented in this email are solely those of the author and may not necessarily reflect the views or opinions of HCL or its affiliates. Any form of reproduction, dissemination, copying, disclosure, modification, distribution and / or publication of this message without the prior written consent of authorized representative of HCL is strictly prohibited. If you have received this email in error please delete it and notify the sender immediately.
Before opening any email and/or attachments, please check them for viruses and other defects.
----------------------------------------------------------------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161005/2ddbd5cf/attachment-0001.html>

------------------------------

Subject: Digest Footer

_______________________________________________
Clearwater mailing list
Clearwater at lists.projectclearwater.org
http://lists.projectclearwater.org/mailman/listinfo/clearwater_lists.projectclearwater.org


------------------------------

End of Clearwater Digest, Vol 42, Issue 4
*****************************************



From surender.s at hcl.com  Wed Oct 12 08:44:40 2016
From: surender.s at hcl.com (Surender Singh)
Date: Wed, 12 Oct 2016 12:44:40 +0000
Subject: [Project Clearwater] Integration of Open HSS_All-in-one
Message-ID: <16AE9ED83DBA5B4D85B058EAF39C918107E1D699@NDA-HCLT-MBS05.hclt.corp.hcl.in>

Hi Ellie,

Now I am able to see UAR,MAR message but still getting issue in registering the users. I am using Zoiper client .


Please find below logs at homestead nodes;


12-10-2016 18:01:11.103 UTC Debug freeDiameter: GOING TO SEND TO '10.112.87.132': 'Device-Watchdog-Answer'0/280 f:---- src:'(nil)' len:20 {C:268/l:12,C:264/l:8,C:296/l:8,C:278/l:12}
12-10-2016 18:01:11.103 UTC Debug freeDiameter: Sending 84b data on connection {----} TCP,#1236->10.112.87.132(3868)
12-10-2016 18:01:13.877 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:13.877 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:13.877 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:16.657 UTC Verbose httpstack.cpp:293: Process request for URL /ping, args (null)
12-10-2016 18:01:16.657 UTC Verbose httpstack.cpp:69: Sending response 200 to request for URL /ping, args (null)
12-10-2016 18:01:18.877 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:18.877 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:18.877 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:23.877 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:23.877 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:23.878 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:26.689 UTC Verbose httpstack.cpp:293: Process request for URL /ping, args (null)
12-10-2016 18:01:26.689 UTC Verbose httpstack.cpp:69: Sending response 200 to request for URL /ping, args (null)
12-10-2016 18:01:27.848 UTC Verbose httpstack.cpp:293: Process request for URL /impu/sip%3A8310%40open-ims.test/reg-data, args (null)
12-10-2016 18:01:27.848 UTC Debug handlers.cpp:1080: Parsed HTTP request: private ID , public ID sip:8310 at open-ims.test, server name sip:scscf.cw-aio:5054;transport=TCP
12-10-2016 18:01:27.848 UTC Debug handlers.cpp:1004: Determining request type from '{"reqtype": "call", "server_name": "sip:scscf.cw-aio:5054;transport=TCP"}'
12-10-2016 18:01:27.848 UTC Debug handlers.cpp:1048: New value of _type is 2
12-10-2016 18:01:27.848 UTC Debug handlers.cpp:1118: Try to find IMS Subscription information in the cache
12-10-2016 18:01:27.848 UTC Debug cassandra_store.cpp:284: Getting thread-local Client
12-10-2016 18:01:27.848 UTC Debug cassandra_store.cpp:129: Generated Cassandra timestamp 1476295287848423
12-10-2016 18:01:27.848 UTC Debug cache.cpp:347: Issuing get for key sip:8310 at open-ims.test
12-10-2016 18:01:27.848 UTC Debug cassandra_store.cpp:755: Failed TWO read for get_row. Try ONE
12-10-2016 18:01:27.849 UTC Debug cache.cpp:367: Retrieved XML column with TTL 1014 and value <?xml version="1.0" encoding="UTF-8"?><IMSSubscription><PrivateID>null</PrivateID><ServiceProfile><PublicIdentity><Identity>sip:8310 at open-ims.test</Identity><Extension><IdentityType>0</IdentityType><Extension><DisplayName>8310</DisplayName></Extension></Extension></PublicIdentity><InitialFilterCriteria><Priority>0</Priority><TriggerPoint><ConditionTypeCNF>1</ConditionTypeCNF><SPT><ConditionNegated>0</ConditionNegated><Group>0</Group><RequestURI>INVITE</RequestURI><Extension></Extension></SPT></TriggerPoint><ApplicationServer><ServerName>sip:mmtel.open-ims.test</ServerName><DefaultHandling>0</DefaultHandling></ApplicationServer></InitialFilterCriteria></ServiceProfile></IMSSubscription>
12-10-2016 18:01:27.849 UTC Debug cache.cpp:408: Retrived primary_ccf column with value pri_ccf_address
12-10-2016 18:01:27.849 UTC Debug cache.cpp:435: Found stored XML for subscriber, treating as UNREGISTERED state
12-10-2016 18:01:27.849 UTC Debug communicationmonitor.cpp:82: Checking communication changes - successful attempts 2, failures 0
12-10-2016 18:01:27.849 UTC Debug handlers.cpp:1147: Got IMS subscription from cache
12-10-2016 18:01:27.849 UTC Debug handlers.cpp:1162: TTL for this database record is 0, IMS Subscription XML is not empty, registration state is UNREGISTERED, and the charging addresses are Primary CCF: pri_ccf_address
12-10-2016 18:01:27.849 UTC Debug handlers.cpp:1272: Handling call
12-10-2016 18:01:27.849 UTC Debug handlers.cpp:1469: Sending 200 response (body was {"reqtype": "call", "server_name": "sip:scscf.cw-aio:5054;transport=TCP"})
12-10-2016 18:01:27.849 UTC Verbose httpstack.cpp:69: Sending response 200 to request for URL /impu/sip%3A8310%40open-ims.test/reg-data, args (null)
12-10-2016 18:01:27.850 UTC Verbose httpstack.cpp:293: Process request for URL /impi/8310%40open-ims.test/registration-status, args impu=sip%3A8310%40open-ims.test&visited-network=open-ims.test&auth-type=REG
12-10-2016 18:01:27.850 UTC Debug handlers.cpp:591: Parsed HTTP request: private ID 8310 at open-ims.test, public ID sip:8310 at open-ims.test, visited network open-ims.test, authorization type REG
12-10-2016 18:01:27.850 UTC Debug cx.cpp:109: Building User-Authorization request for 8310 at open-ims.test/sip:8310 at open-ims.test
12-10-2016 18:01:27.850 UTC Debug freeDiameter: No Session-Id AVP found in message 0x7f2a6c002140
12-10-2016 18:01:27.850 UTC Verbose diameterstack.cpp:1427: Sending Diameter message of type 300 on transaction 0x7f2a6c001f20 with timeout 200
12-10-2016 18:01:27.850 UTC Debug diameterstack.cpp:397: Routing out callback from freeDiameter
12-10-2016 18:01:27.850 UTC Debug realmmanager.cpp:189: freeDiameter routing score for candidate 10.112.87.132 is changing from 13 to 12
12-10-2016 18:01:27.850 UTC Debug freeDiameter: GOING TO SEND TO '10.112.87.132': '3GPP/User-Authorization-Request'16777216/300 f:RP-- src:'(nil)' len:20 {C:263/l:8,C:260/l:8,C:277/l:12,C:264/l:8,C:296/l:8,C:293/l:8,C:283/l:8,C:1/l:8,V:10415/C:601/l:12,V:10415/C:600/l:12,V:10415/C:623/l:16}
12-10-2016 18:01:27.850 UTC Debug diameterstack.cpp:908: Processing a sent diameter message
12-10-2016 18:01:27.850 UTC Debug diameterstack.cpp:910: Got existing trail ID: 2630
12-10-2016 18:01:27.850 UTC Debug diameterstack.cpp:969: Raising correlating marker with diameter session ID = cw-aio;1476270305;103
12-10-2016 18:01:27.850 UTC Debug freeDiameter: Sending 292b data on connection {----} TCP,#1236->10.112.87.132(3868)
12-10-2016 18:01:27.857 UTC Debug freeDiameter: 'STATE_OPEN'	<-- 'FDEVP_CNX_MSG_RECV'	(0x7f2ae000b560,228)	'10.112.87.132'
12-10-2016 18:01:27.857 UTC Debug diameterstack.cpp:888: Processing a received diameter message
12-10-2016 18:01:27.857 UTC Debug diameterstack.cpp:901: Got existing trail ID: 2630
12-10-2016 18:01:27.857 UTC Debug diameterstack.cpp:969: Raising correlating marker with diameter session ID = cw-aio;1476270305;103
12-10-2016 18:01:27.857 UTC Debug freeDiameter: Peer timeout reset to 30 seconds (+/- 2)
12-10-2016 18:01:27.857 UTC Debug freeDiameter: '10.112.87.132' in state 'STATE_OPEN' waiting for next event.
12-10-2016 18:01:27.857 UTC Debug freeDiameter: Iterating on rules of AVP: 'Vendor-Specific-Application-Id'.
12-10-2016 18:01:27.857 UTC Debug freeDiameter: Iterating on rules of AVP: 'Experimental-Result'.
12-10-2016 18:01:27.857 UTC Debug freeDiameter: Iterating on rules of COMMAND: '3GPP/User-Authorization-Answer'.
12-10-2016 18:01:27.857 UTC Debug freeDiameter: Calling callback registered when query was sent (0x45c5d0, 0x7f2a6c001f20)
12-10-2016 18:01:27.857 UTC Verbose diameterstack.cpp:1097: Got Diameter response of type 300 - calling callback on transaction 0x7f2a6c001f20
12-10-2016 18:01:27.857 UTC Debug communicationmonitor.cpp:82: Checking communication changes - successful attempts 2, failures 0
12-10-2016 18:01:27.857 UTC Debug diameterstack.cpp:1375: Got Experimental-Result-Code 2002
12-10-2016 18:01:27.857 UTC Debug handlers.cpp:647: Received User-Authorization answer with result 0/2002
12-10-2016 18:01:27.857 UTC Debug handlers.cpp:662: Got Server-Name sip:scscf.cw-aio:5054;transport=TCP
12-10-2016 18:01:27.857 UTC Verbose httpstack.cpp:69: Sending response 200 to request for URL /impi/8310%40open-ims.test/registration-status, args impu=sip%3A8310%40open-ims.test&visited-network=open-ims.test&auth-type=REG
12-10-2016 18:01:27.859 UTC Verbose httpstack.cpp:293: Process request for URL /impi/8310%40open-ims.test/av, args impu=sip%3A8310%40open-ims.test
12-10-2016 18:01:27.859 UTC Debug handlers.cpp:148: Parsed HTTP request: private ID 8310 at open-ims.test, public ID sip:8310 at open-ims.test, scheme Unknown, authorization 
12-10-2016 18:01:27.859 UTC Debug handlers.cpp:155: Authentication vector cache query disabled - query HSS
12-10-2016 18:01:27.859 UTC Debug cx.cpp:375: Building Multimedia-Auth request for 8310 at open-ims.test/sip:8310 at open-ims.test
12-10-2016 18:01:27.859 UTC Debug freeDiameter: No Session-Id AVP found in message 0x7f2a6c002070
12-10-2016 18:01:27.859 UTC Verbose diameterstack.cpp:1427: Sending Diameter message of type 303 on transaction 0x7f2a6c002d70 with timeout 200
12-10-2016 18:01:27.859 UTC Debug diameterstack.cpp:397: Routing out callback from freeDiameter
12-10-2016 18:01:27.859 UTC Debug realmmanager.cpp:189: freeDiameter routing score for candidate 10.112.87.132 is changing from 13 to 12
12-10-2016 18:01:27.859 UTC Debug freeDiameter: GOING TO SEND TO '10.112.87.132': '3GPP/Multimedia-Auth-Request'16777216/303 f:RP-- src:'(nil)' len:20 {C:263/l:8,C:260/l:8,C:277/l:12,C:283/l:8,C:293/l:8,C:264/l:8,C:296/l:8,C:1/l:8,V:10415/C:601/l:12,V:10415/C:612/l:12,V:10415/C:607/l:16,V:10415/C:602/l:12}
12-10-2016 18:01:27.859 UTC Debug diameterstack.cpp:908: Processing a sent diameter message
12-10-2016 18:01:27.859 UTC Debug diameterstack.cpp:910: Got existing trail ID: 2631
12-10-2016 18:01:27.859 UTC Debug diameterstack.cpp:969: Raising correlating marker with diameter session ID = cw-aio;1476270305;104
12-10-2016 18:01:27.859 UTC Debug freeDiameter: Sending 344b data on connection {----} TCP,#1236->10.112.87.132(3868)
12-10-2016 18:01:27.864 UTC Debug freeDiameter: 'STATE_OPEN'	<-- 'FDEVP_CNX_MSG_RECV'	(0x7f2ae001e4f0,552)	'10.112.87.132'
12-10-2016 18:01:27.864 UTC Debug diameterstack.cpp:888: Processing a received diameter message
12-10-2016 18:01:27.864 UTC Debug diameterstack.cpp:901: Got existing trail ID: 2631
12-10-2016 18:01:27.864 UTC Debug diameterstack.cpp:969: Raising correlating marker with diameter session ID = cw-aio;1476270305;104
12-10-2016 18:01:27.864 UTC Debug freeDiameter: Peer timeout reset to 30 seconds (+/- 2)
12-10-2016 18:01:27.864 UTC Debug freeDiameter: '10.112.87.132' in state 'STATE_OPEN' waiting for next event.
12-10-2016 18:01:27.864 UTC Status freeDiameter: Unsupported mandatory AVP found
12-10-2016 18:01:27.864 UTC Error freeDiameter: ERROR: in '((parsedict_do_avp(dict, ((struct avp *)(avpch->o)), mandatory, error_info)))' :	Operation not supported
12-10-2016 18:01:27.864 UTC Error freeDiameter: ERROR: in '((parsedict_do_avp(dict, ((struct avp *)(avpch->o)), mandatory, error_info)))' :	Operation not supported
12-10-2016 18:01:27.864 UTC Error freeDiameter: ERROR: in '((fd_msg_parse_dict ( object, dict, error_info )))' :	Operation not supported
12-10-2016 18:01:27.864 UTC Error freeDiameter: Parsing error: 'DIAMETER_AVP_UNSUPPORTED' for the following message received from '<error getting source>':
12-10-2016 18:01:27.864 UTC Error freeDiameter:    '3GPP/Multimedia-Auth-Answer'
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Version: 0x01
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Length: 552
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Flags: 0x40 (-P--)
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Command Code: 303
12-10-2016 18:01:27.864 UTC Error freeDiameter:      ApplicationId: 16777216
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Hop-by-Hop Identifier: 0x512F5AC0
12-10-2016 18:01:27.864 UTC Error freeDiameter:      End-to-End Identifier: 0x8E19124A
12-10-2016 18:01:27.864 UTC Error freeDiameter:       {internal data}: src:10.112.87.132(13) rwb:0x7f2ae001e4f0 rt:1 cb:(nil),(nil)((nil)) qry:0x7f2a6c002070 asso:0 sess:0x7f2a6c0021b0
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Session-Id'(263) l=29 f=-M val="cw-aio;1476270305;104"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Origin-Host'(264) l=25 f=-M val="hss.open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Origin-Realm'(296) l=21 f=-M val="open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Auth-Session-State'(277) l=12 f=-M val='NO_STATE_MAINTAINED' (1 (0x1))
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Vendor-Specific-Application-Id'(260) l=32 f=-M val=(grouped)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'Vendor-Id'(266) l=12 f=-M val=10415 (0x28af)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'Auth-Application-Id'(258) l=12 f=-M val=16777216 (0x1000000)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Public-Identity'(601) vend='3GPP'(10415) l=34 f=VM val="sip:8310 at open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'User-Name'(1) l=26 f=-M val="8310 at open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'SIP-Number-Auth-Items'(607) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'SIP-Auth-Data-Item'(612) vend='3GPP'(10415) l=312 f=VM val=(grouped)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'SIP-Item-Number'(613) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'SIP-Authentication-Scheme'(608) vend='3GPP'(10415) l=27 f=VM val="HTTP_DIGEST_MD5"
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 504(not found in dictionary) vend=4491 l=44 f=VM val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 501(not searched in dictionary) vend=13019 l=156 f=VM val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 503(not searched in dictionary) vend=13019 l=56 f=VM val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 268(not searched in dictionary) l=12 f=-M val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Route-Record'(282) l=8 f=-M val="10.112.87.132"
12-10-2016 18:01:27.864 UTC Error freeDiameter: ERROR: in '(fd_msg_parse_or_error( &msgptr, &error ))' :	Bad message
12-10-2016 18:01:27.864 UTC Error freeDiameter: Message discarded ('Received answer failed the dictionary / rules parsing'):
12-10-2016 18:01:27.864 UTC Error freeDiameter:    '3GPP/Multimedia-Auth-Answer'
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Version: 0x01
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Length: 552
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Flags: 0x40 (-P--)
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Command Code: 303
12-10-2016 18:01:27.864 UTC Error freeDiameter:      ApplicationId: 16777216
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Hop-by-Hop Identifier: 0x512F5AC0
12-10-2016 18:01:27.864 UTC Error freeDiameter:      End-to-End Identifier: 0x8E19124A
12-10-2016 18:01:27.864 UTC Error freeDiameter:       {internal data}: src:10.112.87.132(13) rwb:0x7f2ae001e4f0 rt:1 cb:(nil),(nil)((nil)) qry:0x7f2a6c002070 asso:0 sess:0x7f2a6c0021b0
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Session-Id'(263) l=29 f=-M val="cw-aio;1476270305;104"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Origin-Host'(264) l=25 f=-M val="hss.open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Origin-Realm'(296) l=21 f=-M val="open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Auth-Session-State'(277) l=12 f=-M val='NO_STATE_MAINTAINED' (1 (0x1))
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Vendor-Specific-Application-Id'(260) l=32 f=-M val=(grouped)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'Vendor-Id'(266) l=12 f=-M val=10415 (0x28af)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'Auth-Application-Id'(258) l=12 f=-M val=16777216 (0x1000000)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Public-Identity'(601) vend='3GPP'(10415) l=34 f=VM val="sip:8310 at open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'User-Name'(1) l=26 f=-M val="8310 at open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'SIP-Number-Auth-Items'(607) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'SIP-Auth-Data-Item'(612) vend='3GPP'(10415) l=312 f=VM val=(grouped)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'SIP-Item-Number'(613) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'SIP-Authentication-Scheme'(608) vend='3GPP'(10415) l=27 f=VM val="HTTP_DIGEST_MD5"
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 504(not found in dictionary) vend=4491 l=44 f=VM val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 501(not searched in dictionary) vend=13019 l=156 f=VM val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 503(not searched in dictionary) vend=13019 l=56 f=VM val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 268(not searched in dictionary) l=12 f=-M val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Route-Record'(282) l=8 f=-M val="10.112.87.132"
12-10-2016 18:01:28.360 UTC Verbose httpstack.cpp:293: Process request for URL /impi/8310%40open-ims.test/av, args impu=sip%3A8310%40open-ims.test
12-10-2016 18:01:28.360 UTC Debug handlers.cpp:148: Parsed HTTP request: private ID 8310 at open-ims.test, public ID sip:8310 at open-ims.test, scheme Unknown, authorization 
12-10-2016 18:01:28.360 UTC Debug handlers.cpp:155: Authentication vector cache query disabled - query HSS
12-10-2016 18:01:28.360 UTC Debug cx.cpp:375: Building Multimedia-Auth request for 8310 at open-ims.test/sip:8310 at open-ims.test
12-10-2016 18:01:28.360 UTC Debug freeDiameter: No Session-Id AVP found in message 0x7f2a6801f0c0
12-10-2016 18:01:28.360 UTC Verbose diameterstack.cpp:1427: Sending Diameter message of type 303 on transaction 0x7f2a68002d50 with timeout 200
12-10-2016 18:01:28.360 UTC Debug diameterstack.cpp:397: Routing out callback from freeDiameter
12-10-2016 18:01:28.360 UTC Debug realmmanager.cpp:189: freeDiameter routing score for candidate 10.112.87.132 is changing from 13 to 12
12-10-2016 18:01:28.360 UTC Debug freeDiameter: GOING TO SEND TO '10.112.87.132': '3GPP/Multimedia-Auth-Request'16777216/303 f:RP-- src:'(nil)' len:20 {C:263/l:8,C:260/l:8,C:277/l:12,C:283/l:8,C:293/l:8,C:264/l:8,C:296/l:8,C:1/l:8,V:10415/C:601/l:12,V:10415/C:612/l:12,V:10415/C:607/l:16,V:10415/C:602/l:12}
12-10-2016 18:01:28.360 UTC Debug diameterstack.cpp:908: Processing a sent diameter message
12-10-2016 18:01:28.360 UTC Debug diameterstack.cpp:910: Got existing trail ID: 2632
12-10-2016 18:01:28.360 UTC Debug diameterstack.cpp:969: Raising correlating marker with diameter session ID = cw-aio;1476270305;105
12-10-2016 18:01:28.360 UTC Debug freeDiameter: Sending 344b data on connection {----} TCP,#1236->10.112.87.132(3868)
12-10-2016 18:01:28.366 UTC Debug freeDiameter: 'STATE_OPEN'	<-- 'FDEVP_CNX_MSG_RECV'	(0x7f2ae001e4f0,552)	'10.112.87.132'
12-10-2016 18:01:28.366 UTC Debug diameterstack.cpp:888: Processing a received diameter message
12-10-2016 18:01:28.366 UTC Debug diameterstack.cpp:901: Got existing trail ID: 2632
12-10-2016 18:01:28.366 UTC Debug diameterstack.cpp:969: Raising correlating marker with diameter session ID = cw-aio;1476270305;105
12-10-2016 18:01:28.366 UTC Debug freeDiameter: Peer timeout reset to 30 seconds (+/- 2)
12-10-2016 18:01:28.366 UTC Debug freeDiameter: '10.112.87.132' in state 'STATE_OPEN' waiting for next event.
12-10-2016 18:01:28.366 UTC Status freeDiameter: Unsupported mandatory AVP found
12-10-2016 18:01:28.366 UTC Error freeDiameter: ERROR: in '((parsedict_do_avp(dict, ((struct avp *)(avpch->o)), mandatory, error_info)))' :	Operation not supported
12-10-2016 18:01:28.366 UTC Error freeDiameter: ERROR: in '((parsedict_do_avp(dict, ((struct avp *)(avpch->o)), mandatory, error_info)))' :	Operation not supported
12-10-2016 18:01:28.366 UTC Error freeDiameter: ERROR: in '((fd_msg_parse_dict ( object, dict, error_info )))' :	Operation not supported
12-10-2016 18:01:28.367 UTC Error freeDiameter: Parsing error: 'DIAMETER_AVP_UNSUPPORTED' for the following message received from '<error getting source>':
12-10-2016 18:01:28.367 UTC Error freeDiameter:    '3GPP/Multimedia-Auth-Answer'
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Version: 0x01
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Length: 552
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Flags: 0x40 (-P--)
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Command Code: 303
12-10-2016 18:01:28.367 UTC Error freeDiameter:      ApplicationId: 16777216
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Hop-by-Hop Identifier: 0x512F5AC1
12-10-2016 18:01:28.367 UTC Error freeDiameter:      End-to-End Identifier: 0x8E19124B
12-10-2016 18:01:28.367 UTC Error freeDiameter:       {internal data}: src:10.112.87.132(13) rwb:0x7f2ae001e4f0 rt:1 cb:(nil),(nil)((nil)) qry:0x7f2a6801f0c0 asso:0 sess:0x7f2a6801f200
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Session-Id'(263) l=29 f=-M val="cw-aio;1476270305;105"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Origin-Host'(264) l=25 f=-M val="hss.open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Origin-Realm'(296) l=21 f=-M val="open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Auth-Session-State'(277) l=12 f=-M val='NO_STATE_MAINTAINED' (1 (0x1))
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Vendor-Specific-Application-Id'(260) l=32 f=-M val=(grouped)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'Vendor-Id'(266) l=12 f=-M val=10415 (0x28af)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'Auth-Application-Id'(258) l=12 f=-M val=16777216 (0x1000000)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Public-Identity'(601) vend='3GPP'(10415) l=34 f=VM val="sip:8310 at open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'User-Name'(1) l=26 f=-M val="8310 at open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'SIP-Number-Auth-Items'(607) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'SIP-Auth-Data-Item'(612) vend='3GPP'(10415) l=312 f=VM val=(grouped)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'SIP-Item-Number'(613) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'SIP-Authentication-Scheme'(608) vend='3GPP'(10415) l=27 f=VM val="HTTP_DIGEST_MD5"
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 504(not found in dictionary) vend=4491 l=44 f=VM val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 501(not searched in dictionary) vend=13019 l=156 f=VM val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 503(not searched in dictionary) vend=13019 l=56 f=VM val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 268(not searched in dictionary) l=12 f=-M val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Route-Record'(282) l=8 f=-M val="10.112.87.132"
12-10-2016 18:01:28.367 UTC Error freeDiameter: ERROR: in '(fd_msg_parse_or_error( &msgptr, &error ))' :	Bad message
12-10-2016 18:01:28.367 UTC Error freeDiameter: Message discarded ('Received answer failed the dictionary / rules parsing'):
12-10-2016 18:01:28.367 UTC Error freeDiameter:    '3GPP/Multimedia-Auth-Answer'
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Version: 0x01
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Length: 552
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Flags: 0x40 (-P--)
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Command Code: 303
12-10-2016 18:01:28.367 UTC Error freeDiameter:      ApplicationId: 16777216
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Hop-by-Hop Identifier: 0x512F5AC1
12-10-2016 18:01:28.367 UTC Error freeDiameter:      End-to-End Identifier: 0x8E19124B
12-10-2016 18:01:28.367 UTC Error freeDiameter:       {internal data}: src:10.112.87.132(13) rwb:0x7f2ae001e4f0 rt:1 cb:(nil),(nil)((nil)) qry:0x7f2a6801f0c0 asso:0 sess:0x7f2a6801f200
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Session-Id'(263) l=29 f=-M val="cw-aio;1476270305;105"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Origin-Host'(264) l=25 f=-M val="hss.open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Origin-Realm'(296) l=21 f=-M val="open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Auth-Session-State'(277) l=12 f=-M val='NO_STATE_MAINTAINED' (1 (0x1))
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Vendor-Specific-Application-Id'(260) l=32 f=-M val=(grouped)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'Vendor-Id'(266) l=12 f=-M val=10415 (0x28af)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'Auth-Application-Id'(258) l=12 f=-M val=16777216 (0x1000000)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Public-Identity'(601) vend='3GPP'(10415) l=34 f=VM val="sip:8310 at open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'User-Name'(1) l=26 f=-M val="8310 at open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'SIP-Number-Auth-Items'(607) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'SIP-Auth-Data-Item'(612) vend='3GPP'(10415) l=312 f=VM val=(grouped)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'SIP-Item-Number'(613) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'SIP-Authentication-Scheme'(608) vend='3GPP'(10415) l=27 f=VM val="HTTP_DIGEST_MD5"
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 504(not found in dictionary) vend=4491 l=44 f=VM val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 501(not searched in dictionary) vend=13019 l=156 f=VM val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 503(not searched in dictionary) vend=13019 l=56 f=VM val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 268(not searched in dictionary) l=12 f=-M val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Route-Record'(282) l=8 f=-M val="10.112.87.132"
12-10-2016 18:01:28.878 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:28.878 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:28.878 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:33.878 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:33.878 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:33.878 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:35.274 UTC Debug alarm.cpp:253: Reraising all alarms with a known state
12-10-2016 18:01:35.274 UTC Debug alarm.cpp:312: AlarmReqAgent: queue overflowed
12-10-2016 18:01:35.274 UTC Status alarm.cpp:62: homestead issued 1502.1 alarm
12-10-2016 18:01:35.274 UTC Debug alarm.cpp:312: AlarmReqAgent: queue overflowed
12-10-2016 18:01:35.274 UTC Status alarm.cpp:62: homestead issued 1501.1 alarm
12-10-2016 18:01:36.734 UTC Verbose httpstack.cpp:293: Process request for URL /ping, args (null)
12-10-2016 18:01:36.734 UTC Verbose httpstack.cpp:69: Sending response 200 to request for URL /ping, args (null)
12-10-2016 18:01:38.878 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:38.878 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:38.878 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:43.878 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:43.878 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:43.878 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:46.782 UTC Verbose httpstack.cpp:293: Process request for URL /ping, args (null)




Message: 1
Date: Wed, 5 Oct 2016 16:03:13 +0000
From: "Eleanor Merry (projectclearwater.org)"
	<eleanor at projectclearwater.org>
To: "clearwater at lists.projectclearwater.org"
	<clearwater at lists.projectclearwater.org>
Subject: Re: [Project Clearwater] Integration of Open HSS_All-in-one
Message-ID:
	<BY2PR02MB208601E0BE02E519E388BE8A9BC40 at BY2PR02MB2086.namprd02.prod.outlook.com>
	
Content-Type: text/plain; charset="us-ascii"

Hi Surender,

To use an external HSS you'll need to set the following settings in /etc/clearwater/shared_config

hss_hostname=<address of your HSS>
hss_realm=<realm your HSS is located in> hss_port=<port of your HSS's Cx interface>

Both hss_hostname and hss_realm are optional. If a realm is configured, homestead will try NAPTR/SRV resolution on the realm to find and connect to (2 by default) diameter peers in the realm.
If a hostname is also configured, this will be used in the Destination-Host field on the diameter messages, so that the messages will be routed to that host.
If just a hostname is configured, homestead will just attempt to create and maintain a single connection to that host.

You can find more information on this at http://clearwater.readthedocs.io/en/latest/External_HSS_Integration.html, and you may also find http://clearwater.readthedocs.io/en/latest/OpenIMSCore_HSS_Integration.html useful.

For your other queries:

1. You can configure subscribers to use an application server that provides these functions by setting their IFCs in the HSS. You can use the MMTel application server built into Clearwater for this - see the details at http://clearwater.readthedocs.io/en/latest/OpenIMSCore_HSS_Integration.html#adding-the-mmtel-application-server for more information.

2. The key restrictions of the all-in-one solutions are:
* hard-coded realm - the all-in-one image uses a hard-coded realm of example.com so your SIP URI might be sip:6505551234 at example.com - by default, SIP uses this realm for routing but example.com won't resolve to your host so you need to configure an outbound proxy on all your SIP clients
* performance - since all software runs on a single virtual machine, performance is significantly lower than even the smallest scale deployment
* scalability - there is no option to scale up and add more virtual machines to boost capacity - for this, you must create a normal deployment
* fault-tolerance - since everything runs on a single virtual machine, if that virtual machine fails, the service as a whole fails.

3. I didn't understand this question. What's the 'other DNS'?

Ellie

From: Clearwater [mailto:clearwater-bounces at lists.projectclearwater.org] On Behalf Of Surender Singh
Sent: 03 October 2016 07:11
To: clearwater at lists.projectclearwater.org
Subject: [Project Clearwater] Integration of Open HSS_All-in-one

Hello,

I deployed the All in one solution in VMware machine .My IN-OUT calls are working to other network using BGCF/IBCF feature .

Now i want Integrate the Open HSS with Homestead node .Can you suggest me where I need to make the entry in aio solution .

I having some below query..


1)      Can we provision the basic supplementary  service (CF Service, Three Party, Call-Transfer , Call park  etc .) in open HSS.

2)      Any other drawbacks of the all-in-one solution apart from Performance /Production.

3)      Can i integrate the other DNS for DNS query .

Regards
Surender Singh








::DISCLAIMER::
----------------------------------------------------------------------------------------------------------------------------------------------------
The contents of this e-mail and any attachment(s) are confidential and intended for the named recipient(s) only.
E-mail transmission is not guaranteed to be secure or error-free as information could be intercepted, corrupted, lost, destroyed, arrive late or incomplete, or may contain viruses in transmission. The e mail and its contents (with or without referred errors) shall therefore not attach any liability on the originator or HCL or its affiliates.
Views or opinions, if any, presented in this email are solely those of the author and may not necessarily reflect the views or opinions of HCL or its affiliates. Any form of reproduction, dissemination, copying, disclosure, modification, distribution and / or publication of this message without the prior written consent of authorized representative of HCL is strictly prohibited. If you have received this email in error please delete it and notify the sender immediately.
Before opening any email and/or attachments, please check them for viruses and other defects.
----------------------------------------------------------------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161005/2ddbd5cf/attachment-0001.html>

------------------------------

Subject: Digest Footer

_______________________________________________
Clearwater mailing list
Clearwater at lists.projectclearwater.org
http://lists.projectclearwater.org/mailman/listinfo/clearwater_lists.projectclearwater.org


------------------------------

End of Clearwater Digest, Vol 42, Issue 4
*****************************************



From Eleanor.Merry at metaswitch.com  Wed Oct 12 14:15:08 2016
From: Eleanor.Merry at metaswitch.com (Eleanor Merry)
Date: Wed, 12 Oct 2016 18:15:08 +0000
Subject: [Project Clearwater] Integration of Open HSS_All-in-one
In-Reply-To: <16AE9ED83DBA5B4D85B058EAF39C918107E1D699@NDA-HCLT-MBS05.hclt.corp.hcl.in>
References: <16AE9ED83DBA5B4D85B058EAF39C918107E1D699@NDA-HCLT-MBS05.hclt.corp.hcl.in>
Message-ID: <BL2PR02MB20843688017344C18585F7009BDD0@BL2PR02MB2084.namprd02.prod.outlook.com>

Hi Surender,

It looks like the HSS is sending a malformed MAA, which Homestead is rejecting. Looking at the 'SIP-Authentication-Scheme' AVP though it looks like your subscribers are using HTTP_DIGEST_MD5 authentication. This isn't supported in Project Clearwater; we support SIP Digest authentication and AKA authentication (if you've got clients that can perform AKA authentication as well). For Zoiper, you want to use SIP Digest authentication instead.

Hope this helps,

Ellie

-----Original Message-----
From: Clearwater [mailto:clearwater-bounces at lists.projectclearwater.org] On Behalf Of Surender Singh
Sent: 12 October 2016 13:45
To: clearwater at lists.projectclearwater.org
Subject: Re: [Project Clearwater] Integration of Open HSS_All-in-one

Hi Ellie,

Now I am able to see UAR,MAR message but still getting issue in registering the users. I am using Zoiper client .


Please find below logs at homestead nodes;


12-10-2016 18:01:11.103 UTC Debug freeDiameter: GOING TO SEND TO '10.112.87.132': 'Device-Watchdog-Answer'0/280 f:---- src:'(nil)' len:20 {C:268/l:12,C:264/l:8,C:296/l:8,C:278/l:12}
12-10-2016 18:01:11.103 UTC Debug freeDiameter: Sending 84b data on connection {----} TCP,#1236->10.112.87.132(3868)
12-10-2016 18:01:13.877 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:13.877 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:13.877 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:16.657 UTC Verbose httpstack.cpp:293: Process request for URL /ping, args (null)
12-10-2016 18:01:16.657 UTC Verbose httpstack.cpp:69: Sending response 200 to request for URL /ping, args (null)
12-10-2016 18:01:18.877 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:18.877 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:18.877 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:23.877 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:23.877 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:23.878 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:26.689 UTC Verbose httpstack.cpp:293: Process request for URL /ping, args (null)
12-10-2016 18:01:26.689 UTC Verbose httpstack.cpp:69: Sending response 200 to request for URL /ping, args (null)
12-10-2016 18:01:27.848 UTC Verbose httpstack.cpp:293: Process request for URL /impu/sip%3A8310%40open-ims.test/reg-data, args (null)
12-10-2016 18:01:27.848 UTC Debug handlers.cpp:1080: Parsed HTTP request: private ID , public ID sip:8310 at open-ims.test, server name sip:scscf.cw-aio:5054;transport=TCP
12-10-2016 18:01:27.848 UTC Debug handlers.cpp:1004: Determining request type from '{"reqtype": "call", "server_name": "sip:scscf.cw-aio:5054;transport=TCP"}'
12-10-2016 18:01:27.848 UTC Debug handlers.cpp:1048: New value of _type is 2
12-10-2016 18:01:27.848 UTC Debug handlers.cpp:1118: Try to find IMS Subscription information in the cache
12-10-2016 18:01:27.848 UTC Debug cassandra_store.cpp:284: Getting thread-local Client
12-10-2016 18:01:27.848 UTC Debug cassandra_store.cpp:129: Generated Cassandra timestamp 1476295287848423
12-10-2016 18:01:27.848 UTC Debug cache.cpp:347: Issuing get for key sip:8310 at open-ims.test
12-10-2016 18:01:27.848 UTC Debug cassandra_store.cpp:755: Failed TWO read for get_row. Try ONE
12-10-2016 18:01:27.849 UTC Debug cache.cpp:367: Retrieved XML column with TTL 1014 and value <?xml version="1.0" encoding="UTF-8"?><IMSSubscription><PrivateID>null</PrivateID><ServiceProfile><PublicIdentity><Identity>sip:8310 at open-ims.test</Identity><Extension><IdentityType>0</IdentityType><Extension><DisplayName>8310</DisplayName></Extension></Extension></PublicIdentity><InitialFilterCriteria><Priority>0</Priority><TriggerPoint><ConditionTypeCNF>1</ConditionTypeCNF><SPT><ConditionNegated>0</ConditionNegated><Group>0</Group><RequestURI>INVITE</RequestURI><Extension></Extension></SPT></TriggerPoint><ApplicationServer><ServerName>sip:mmtel.open-ims.test</ServerName><DefaultHandling>0</DefaultHandling></ApplicationServer></InitialFilterCriteria></ServiceProfile></IMSSubscription>
12-10-2016 18:01:27.849 UTC Debug cache.cpp:408: Retrived primary_ccf column with value pri_ccf_address
12-10-2016 18:01:27.849 UTC Debug cache.cpp:435: Found stored XML for subscriber, treating as UNREGISTERED state
12-10-2016 18:01:27.849 UTC Debug communicationmonitor.cpp:82: Checking communication changes - successful attempts 2, failures 0
12-10-2016 18:01:27.849 UTC Debug handlers.cpp:1147: Got IMS subscription from cache
12-10-2016 18:01:27.849 UTC Debug handlers.cpp:1162: TTL for this database record is 0, IMS Subscription XML is not empty, registration state is UNREGISTERED, and the charging addresses are Primary CCF: pri_ccf_address
12-10-2016 18:01:27.849 UTC Debug handlers.cpp:1272: Handling call
12-10-2016 18:01:27.849 UTC Debug handlers.cpp:1469: Sending 200 response (body was {"reqtype": "call", "server_name": "sip:scscf.cw-aio:5054;transport=TCP"})
12-10-2016 18:01:27.849 UTC Verbose httpstack.cpp:69: Sending response 200 to request for URL /impu/sip%3A8310%40open-ims.test/reg-data, args (null)
12-10-2016 18:01:27.850 UTC Verbose httpstack.cpp:293: Process request for URL /impi/8310%40open-ims.test/registration-status, args impu=sip%3A8310%40open-ims.test&visited-network=open-ims.test&auth-type=REG
12-10-2016 18:01:27.850 UTC Debug handlers.cpp:591: Parsed HTTP request: private ID 8310 at open-ims.test, public ID sip:8310 at open-ims.test, visited network open-ims.test, authorization type REG
12-10-2016 18:01:27.850 UTC Debug cx.cpp:109: Building User-Authorization request for 8310 at open-ims.test/sip:8310 at open-ims.test
12-10-2016 18:01:27.850 UTC Debug freeDiameter: No Session-Id AVP found in message 0x7f2a6c002140
12-10-2016 18:01:27.850 UTC Verbose diameterstack.cpp:1427: Sending Diameter message of type 300 on transaction 0x7f2a6c001f20 with timeout 200
12-10-2016 18:01:27.850 UTC Debug diameterstack.cpp:397: Routing out callback from freeDiameter
12-10-2016 18:01:27.850 UTC Debug realmmanager.cpp:189: freeDiameter routing score for candidate 10.112.87.132 is changing from 13 to 12
12-10-2016 18:01:27.850 UTC Debug freeDiameter: GOING TO SEND TO '10.112.87.132': '3GPP/User-Authorization-Request'16777216/300 f:RP-- src:'(nil)' len:20 {C:263/l:8,C:260/l:8,C:277/l:12,C:264/l:8,C:296/l:8,C:293/l:8,C:283/l:8,C:1/l:8,V:10415/C:601/l:12,V:10415/C:600/l:12,V:10415/C:623/l:16}
12-10-2016 18:01:27.850 UTC Debug diameterstack.cpp:908: Processing a sent diameter message
12-10-2016 18:01:27.850 UTC Debug diameterstack.cpp:910: Got existing trail ID: 2630
12-10-2016 18:01:27.850 UTC Debug diameterstack.cpp:969: Raising correlating marker with diameter session ID = cw-aio;1476270305;103
12-10-2016 18:01:27.850 UTC Debug freeDiameter: Sending 292b data on connection {----} TCP,#1236->10.112.87.132(3868)
12-10-2016 18:01:27.857 UTC Debug freeDiameter: 'STATE_OPEN'	<-- 'FDEVP_CNX_MSG_RECV'	(0x7f2ae000b560,228)	'10.112.87.132'
12-10-2016 18:01:27.857 UTC Debug diameterstack.cpp:888: Processing a received diameter message
12-10-2016 18:01:27.857 UTC Debug diameterstack.cpp:901: Got existing trail ID: 2630
12-10-2016 18:01:27.857 UTC Debug diameterstack.cpp:969: Raising correlating marker with diameter session ID = cw-aio;1476270305;103
12-10-2016 18:01:27.857 UTC Debug freeDiameter: Peer timeout reset to 30 seconds (+/- 2)
12-10-2016 18:01:27.857 UTC Debug freeDiameter: '10.112.87.132' in state 'STATE_OPEN' waiting for next event.
12-10-2016 18:01:27.857 UTC Debug freeDiameter: Iterating on rules of AVP: 'Vendor-Specific-Application-Id'.
12-10-2016 18:01:27.857 UTC Debug freeDiameter: Iterating on rules of AVP: 'Experimental-Result'.
12-10-2016 18:01:27.857 UTC Debug freeDiameter: Iterating on rules of COMMAND: '3GPP/User-Authorization-Answer'.
12-10-2016 18:01:27.857 UTC Debug freeDiameter: Calling callback registered when query was sent (0x45c5d0, 0x7f2a6c001f20)
12-10-2016 18:01:27.857 UTC Verbose diameterstack.cpp:1097: Got Diameter response of type 300 - calling callback on transaction 0x7f2a6c001f20
12-10-2016 18:01:27.857 UTC Debug communicationmonitor.cpp:82: Checking communication changes - successful attempts 2, failures 0
12-10-2016 18:01:27.857 UTC Debug diameterstack.cpp:1375: Got Experimental-Result-Code 2002
12-10-2016 18:01:27.857 UTC Debug handlers.cpp:647: Received User-Authorization answer with result 0/2002
12-10-2016 18:01:27.857 UTC Debug handlers.cpp:662: Got Server-Name sip:scscf.cw-aio:5054;transport=TCP
12-10-2016 18:01:27.857 UTC Verbose httpstack.cpp:69: Sending response 200 to request for URL /impi/8310%40open-ims.test/registration-status, args impu=sip%3A8310%40open-ims.test&visited-network=open-ims.test&auth-type=REG
12-10-2016 18:01:27.859 UTC Verbose httpstack.cpp:293: Process request for URL /impi/8310%40open-ims.test/av, args impu=sip%3A8310%40open-ims.test
12-10-2016 18:01:27.859 UTC Debug handlers.cpp:148: Parsed HTTP request: private ID 8310 at open-ims.test, public ID sip:8310 at open-ims.test, scheme Unknown, authorization 
12-10-2016 18:01:27.859 UTC Debug handlers.cpp:155: Authentication vector cache query disabled - query HSS
12-10-2016 18:01:27.859 UTC Debug cx.cpp:375: Building Multimedia-Auth request for 8310 at open-ims.test/sip:8310 at open-ims.test
12-10-2016 18:01:27.859 UTC Debug freeDiameter: No Session-Id AVP found in message 0x7f2a6c002070
12-10-2016 18:01:27.859 UTC Verbose diameterstack.cpp:1427: Sending Diameter message of type 303 on transaction 0x7f2a6c002d70 with timeout 200
12-10-2016 18:01:27.859 UTC Debug diameterstack.cpp:397: Routing out callback from freeDiameter
12-10-2016 18:01:27.859 UTC Debug realmmanager.cpp:189: freeDiameter routing score for candidate 10.112.87.132 is changing from 13 to 12
12-10-2016 18:01:27.859 UTC Debug freeDiameter: GOING TO SEND TO '10.112.87.132': '3GPP/Multimedia-Auth-Request'16777216/303 f:RP-- src:'(nil)' len:20 {C:263/l:8,C:260/l:8,C:277/l:12,C:283/l:8,C:293/l:8,C:264/l:8,C:296/l:8,C:1/l:8,V:10415/C:601/l:12,V:10415/C:612/l:12,V:10415/C:607/l:16,V:10415/C:602/l:12}
12-10-2016 18:01:27.859 UTC Debug diameterstack.cpp:908: Processing a sent diameter message
12-10-2016 18:01:27.859 UTC Debug diameterstack.cpp:910: Got existing trail ID: 2631
12-10-2016 18:01:27.859 UTC Debug diameterstack.cpp:969: Raising correlating marker with diameter session ID = cw-aio;1476270305;104
12-10-2016 18:01:27.859 UTC Debug freeDiameter: Sending 344b data on connection {----} TCP,#1236->10.112.87.132(3868)
12-10-2016 18:01:27.864 UTC Debug freeDiameter: 'STATE_OPEN'	<-- 'FDEVP_CNX_MSG_RECV'	(0x7f2ae001e4f0,552)	'10.112.87.132'
12-10-2016 18:01:27.864 UTC Debug diameterstack.cpp:888: Processing a received diameter message
12-10-2016 18:01:27.864 UTC Debug diameterstack.cpp:901: Got existing trail ID: 2631
12-10-2016 18:01:27.864 UTC Debug diameterstack.cpp:969: Raising correlating marker with diameter session ID = cw-aio;1476270305;104
12-10-2016 18:01:27.864 UTC Debug freeDiameter: Peer timeout reset to 30 seconds (+/- 2)
12-10-2016 18:01:27.864 UTC Debug freeDiameter: '10.112.87.132' in state 'STATE_OPEN' waiting for next event.
12-10-2016 18:01:27.864 UTC Status freeDiameter: Unsupported mandatory AVP found
12-10-2016 18:01:27.864 UTC Error freeDiameter: ERROR: in '((parsedict_do_avp(dict, ((struct avp *)(avpch->o)), mandatory, error_info)))' :	Operation not supported
12-10-2016 18:01:27.864 UTC Error freeDiameter: ERROR: in '((parsedict_do_avp(dict, ((struct avp *)(avpch->o)), mandatory, error_info)))' :	Operation not supported
12-10-2016 18:01:27.864 UTC Error freeDiameter: ERROR: in '((fd_msg_parse_dict ( object, dict, error_info )))' :	Operation not supported
12-10-2016 18:01:27.864 UTC Error freeDiameter: Parsing error: 'DIAMETER_AVP_UNSUPPORTED' for the following message received from '<error getting source>':
12-10-2016 18:01:27.864 UTC Error freeDiameter:    '3GPP/Multimedia-Auth-Answer'
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Version: 0x01
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Length: 552
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Flags: 0x40 (-P--)
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Command Code: 303
12-10-2016 18:01:27.864 UTC Error freeDiameter:      ApplicationId: 16777216
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Hop-by-Hop Identifier: 0x512F5AC0
12-10-2016 18:01:27.864 UTC Error freeDiameter:      End-to-End Identifier: 0x8E19124A
12-10-2016 18:01:27.864 UTC Error freeDiameter:       {internal data}: src:10.112.87.132(13) rwb:0x7f2ae001e4f0 rt:1 cb:(nil),(nil)((nil)) qry:0x7f2a6c002070 asso:0 sess:0x7f2a6c0021b0
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Session-Id'(263) l=29 f=-M val="cw-aio;1476270305;104"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Origin-Host'(264) l=25 f=-M val="hss.open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Origin-Realm'(296) l=21 f=-M val="open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Auth-Session-State'(277) l=12 f=-M val='NO_STATE_MAINTAINED' (1 (0x1))
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Vendor-Specific-Application-Id'(260) l=32 f=-M val=(grouped)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'Vendor-Id'(266) l=12 f=-M val=10415 (0x28af)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'Auth-Application-Id'(258) l=12 f=-M val=16777216 (0x1000000)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Public-Identity'(601) vend='3GPP'(10415) l=34 f=VM val="sip:8310 at open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'User-Name'(1) l=26 f=-M val="8310 at open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'SIP-Number-Auth-Items'(607) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'SIP-Auth-Data-Item'(612) vend='3GPP'(10415) l=312 f=VM val=(grouped)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'SIP-Item-Number'(613) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'SIP-Authentication-Scheme'(608) vend='3GPP'(10415) l=27 f=VM val="I"
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 504(not found in dictionary) vend=4491 l=44 f=VM val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 501(not searched in dictionary) vend=13019 l=156 f=VM val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 503(not searched in dictionary) vend=13019 l=56 f=VM val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 268(not searched in dictionary) l=12 f=-M val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Route-Record'(282) l=8 f=-M val="10.112.87.132"
12-10-2016 18:01:27.864 UTC Error freeDiameter: ERROR: in '(fd_msg_parse_or_error( &msgptr, &error ))' :	Bad message
12-10-2016 18:01:27.864 UTC Error freeDiameter: Message discarded ('Received answer failed the dictionary / rules parsing'):
12-10-2016 18:01:27.864 UTC Error freeDiameter:    '3GPP/Multimedia-Auth-Answer'
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Version: 0x01
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Length: 552
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Flags: 0x40 (-P--)
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Command Code: 303
12-10-2016 18:01:27.864 UTC Error freeDiameter:      ApplicationId: 16777216
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Hop-by-Hop Identifier: 0x512F5AC0
12-10-2016 18:01:27.864 UTC Error freeDiameter:      End-to-End Identifier: 0x8E19124A
12-10-2016 18:01:27.864 UTC Error freeDiameter:       {internal data}: src:10.112.87.132(13) rwb:0x7f2ae001e4f0 rt:1 cb:(nil),(nil)((nil)) qry:0x7f2a6c002070 asso:0 sess:0x7f2a6c0021b0
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Session-Id'(263) l=29 f=-M val="cw-aio;1476270305;104"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Origin-Host'(264) l=25 f=-M val="hss.open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Origin-Realm'(296) l=21 f=-M val="open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Auth-Session-State'(277) l=12 f=-M val='NO_STATE_MAINTAINED' (1 (0x1))
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Vendor-Specific-Application-Id'(260) l=32 f=-M val=(grouped)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'Vendor-Id'(266) l=12 f=-M val=10415 (0x28af)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'Auth-Application-Id'(258) l=12 f=-M val=16777216 (0x1000000)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Public-Identity'(601) vend='3GPP'(10415) l=34 f=VM val="sip:8310 at open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'User-Name'(1) l=26 f=-M val="8310 at open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'SIP-Number-Auth-Items'(607) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'SIP-Auth-Data-Item'(612) vend='3GPP'(10415) l=312 f=VM val=(grouped)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'SIP-Item-Number'(613) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'SIP-Authentication-Scheme'(608) vend='3GPP'(10415) l=27 f=VM val="HTTP_DIGEST_MD5"
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 504(not found in dictionary) vend=4491 l=44 f=VM val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 501(not searched in dictionary) vend=13019 l=156 f=VM val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 503(not searched in dictionary) vend=13019 l=56 f=VM val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 268(not searched in dictionary) l=12 f=-M val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Route-Record'(282) l=8 f=-M val="10.112.87.132"
12-10-2016 18:01:28.360 UTC Verbose httpstack.cpp:293: Process request for URL /impi/8310%40open-ims.test/av, args impu=sip%3A8310%40open-ims.test
12-10-2016 18:01:28.360 UTC Debug handlers.cpp:148: Parsed HTTP request: private ID 8310 at open-ims.test, public ID sip:8310 at open-ims.test, scheme Unknown, authorization 
12-10-2016 18:01:28.360 UTC Debug handlers.cpp:155: Authentication vector cache query disabled - query HSS
12-10-2016 18:01:28.360 UTC Debug cx.cpp:375: Building Multimedia-Auth request for 8310 at open-ims.test/sip:8310 at open-ims.test
12-10-2016 18:01:28.360 UTC Debug freeDiameter: No Session-Id AVP found in message 0x7f2a6801f0c0
12-10-2016 18:01:28.360 UTC Verbose diameterstack.cpp:1427: Sending Diameter message of type 303 on transaction 0x7f2a68002d50 with timeout 200
12-10-2016 18:01:28.360 UTC Debug diameterstack.cpp:397: Routing out callback from freeDiameter
12-10-2016 18:01:28.360 UTC Debug realmmanager.cpp:189: freeDiameter routing score for candidate 10.112.87.132 is changing from 13 to 12
12-10-2016 18:01:28.360 UTC Debug freeDiameter: GOING TO SEND TO '10.112.87.132': '3GPP/Multimedia-Auth-Request'16777216/303 f:RP-- src:'(nil)' len:20 {C:263/l:8,C:260/l:8,C:277/l:12,C:283/l:8,C:293/l:8,C:264/l:8,C:296/l:8,C:1/l:8,V:10415/C:601/l:12,V:10415/C:612/l:12,V:10415/C:607/l:16,V:10415/C:602/l:12}
12-10-2016 18:01:28.360 UTC Debug diameterstack.cpp:908: Processing a sent diameter message
12-10-2016 18:01:28.360 UTC Debug diameterstack.cpp:910: Got existing trail ID: 2632
12-10-2016 18:01:28.360 UTC Debug diameterstack.cpp:969: Raising correlating marker with diameter session ID = cw-aio;1476270305;105
12-10-2016 18:01:28.360 UTC Debug freeDiameter: Sending 344b data on connection {----} TCP,#1236->10.112.87.132(3868)
12-10-2016 18:01:28.366 UTC Debug freeDiameter: 'STATE_OPEN'	<-- 'FDEVP_CNX_MSG_RECV'	(0x7f2ae001e4f0,552)	'10.112.87.132'
12-10-2016 18:01:28.366 UTC Debug diameterstack.cpp:888: Processing a received diameter message
12-10-2016 18:01:28.366 UTC Debug diameterstack.cpp:901: Got existing trail ID: 2632
12-10-2016 18:01:28.366 UTC Debug diameterstack.cpp:969: Raising correlating marker with diameter session ID = cw-aio;1476270305;105
12-10-2016 18:01:28.366 UTC Debug freeDiameter: Peer timeout reset to 30 seconds (+/- 2)
12-10-2016 18:01:28.366 UTC Debug freeDiameter: '10.112.87.132' in state 'STATE_OPEN' waiting for next event.
12-10-2016 18:01:28.366 UTC Status freeDiameter: Unsupported mandatory AVP found
12-10-2016 18:01:28.366 UTC Error freeDiameter: ERROR: in '((parsedict_do_avp(dict, ((struct avp *)(avpch->o)), mandatory, error_info)))' :	Operation not supported
12-10-2016 18:01:28.366 UTC Error freeDiameter: ERROR: in '((parsedict_do_avp(dict, ((struct avp *)(avpch->o)), mandatory, error_info)))' :	Operation not supported
12-10-2016 18:01:28.366 UTC Error freeDiameter: ERROR: in '((fd_msg_parse_dict ( object, dict, error_info )))' :	Operation not supported
12-10-2016 18:01:28.367 UTC Error freeDiameter: Parsing error: 'DIAMETER_AVP_UNSUPPORTED' for the following message received from '<error getting source>':
12-10-2016 18:01:28.367 UTC Error freeDiameter:    '3GPP/Multimedia-Auth-Answer'
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Version: 0x01
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Length: 552
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Flags: 0x40 (-P--)
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Command Code: 303
12-10-2016 18:01:28.367 UTC Error freeDiameter:      ApplicationId: 16777216
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Hop-by-Hop Identifier: 0x512F5AC1
12-10-2016 18:01:28.367 UTC Error freeDiameter:      End-to-End Identifier: 0x8E19124B
12-10-2016 18:01:28.367 UTC Error freeDiameter:       {internal data}: src:10.112.87.132(13) rwb:0x7f2ae001e4f0 rt:1 cb:(nil),(nil)((nil)) qry:0x7f2a6801f0c0 asso:0 sess:0x7f2a6801f200
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Session-Id'(263) l=29 f=-M val="cw-aio;1476270305;105"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Origin-Host'(264) l=25 f=-M val="hss.open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Origin-Realm'(296) l=21 f=-M val="open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Auth-Session-State'(277) l=12 f=-M val='NO_STATE_MAINTAINED' (1 (0x1))
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Vendor-Specific-Application-Id'(260) l=32 f=-M val=(grouped)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'Vendor-Id'(266) l=12 f=-M val=10415 (0x28af)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'Auth-Application-Id'(258) l=12 f=-M val=16777216 (0x1000000)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Public-Identity'(601) vend='3GPP'(10415) l=34 f=VM val="sip:8310 at open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'User-Name'(1) l=26 f=-M val="8310 at open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'SIP-Number-Auth-Items'(607) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'SIP-Auth-Data-Item'(612) vend='3GPP'(10415) l=312 f=VM val=(grouped)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'SIP-Item-Number'(613) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'SIP-Authentication-Scheme'(608) vend='3GPP'(10415) l=27 f=VM val="HTTP_DIGEST_MD5"
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 504(not found in dictionary) vend=4491 l=44 f=VM val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 501(not searched in dictionary) vend=13019 l=156 f=VM val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 503(not searched in dictionary) vend=13019 l=56 f=VM val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 268(not searched in dictionary) l=12 f=-M val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Route-Record'(282) l=8 f=-M val="10.112.87.132"
12-10-2016 18:01:28.367 UTC Error freeDiameter: ERROR: in '(fd_msg_parse_or_error( &msgptr, &error ))' :	Bad message
12-10-2016 18:01:28.367 UTC Error freeDiameter: Message discarded ('Received answer failed the dictionary / rules parsing'):
12-10-2016 18:01:28.367 UTC Error freeDiameter:    '3GPP/Multimedia-Auth-Answer'
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Version: 0x01
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Length: 552
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Flags: 0x40 (-P--)
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Command Code: 303
12-10-2016 18:01:28.367 UTC Error freeDiameter:      ApplicationId: 16777216
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Hop-by-Hop Identifier: 0x512F5AC1
12-10-2016 18:01:28.367 UTC Error freeDiameter:      End-to-End Identifier: 0x8E19124B
12-10-2016 18:01:28.367 UTC Error freeDiameter:       {internal data}: src:10.112.87.132(13) rwb:0x7f2ae001e4f0 rt:1 cb:(nil),(nil)((nil)) qry:0x7f2a6801f0c0 asso:0 sess:0x7f2a6801f200
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Session-Id'(263) l=29 f=-M val="cw-aio;1476270305;105"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Origin-Host'(264) l=25 f=-M val="hss.open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Origin-Realm'(296) l=21 f=-M val="open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Auth-Session-State'(277) l=12 f=-M val='NO_STATE_MAINTAINED' (1 (0x1))
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Vendor-Specific-Application-Id'(260) l=32 f=-M val=(grouped)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'Vendor-Id'(266) l=12 f=-M val=10415 (0x28af)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'Auth-Application-Id'(258) l=12 f=-M val=16777216 (0x1000000)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Public-Identity'(601) vend='3GPP'(10415) l=34 f=VM val="sip:8310 at open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'User-Name'(1) l=26 f=-M val="8310 at open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'SIP-Number-Auth-Items'(607) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'SIP-Auth-Data-Item'(612) vend='3GPP'(10415) l=312 f=VM val=(grouped)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'SIP-Item-Number'(613) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'SIP-Authentication-Scheme'(608) vend='3GPP'(10415) l=27 f=VM val="HTTP_DIGEST_MD5"
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 504(not found in dictionary) vend=4491 l=44 f=VM val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 501(not searched in dictionary) vend=13019 l=156 f=VM val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 503(not searched in dictionary) vend=13019 l=56 f=VM val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 268(not searched in dictionary) l=12 f=-M val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Route-Record'(282) l=8 f=-M val="10.112.87.132"
12-10-2016 18:01:28.878 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:28.878 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:28.878 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:33.878 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:33.878 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:33.878 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:35.274 UTC Debug alarm.cpp:253: Reraising all alarms with a known state
12-10-2016 18:01:35.274 UTC Debug alarm.cpp:312: AlarmReqAgent: queue overflowed
12-10-2016 18:01:35.274 UTC Status alarm.cpp:62: homestead issued 1502.1 alarm
12-10-2016 18:01:35.274 UTC Debug alarm.cpp:312: AlarmReqAgent: queue overflowed
12-10-2016 18:01:35.274 UTC Status alarm.cpp:62: homestead issued 1501.1 alarm
12-10-2016 18:01:36.734 UTC Verbose httpstack.cpp:293: Process request for URL /ping, args (null)
12-10-2016 18:01:36.734 UTC Verbose httpstack.cpp:69: Sending response 200 to request for URL /ping, args (null)
12-10-2016 18:01:38.878 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:38.878 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:38.878 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:43.878 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:43.878 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:43.878 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:46.782 UTC Verbose httpstack.cpp:293: Process request for URL /ping, args (null)




Message: 1
Date: Wed, 5 Oct 2016 16:03:13 +0000
From: "Eleanor Merry (projectclearwater.org)"
	<eleanor at projectclearwater.org>
To: "clearwater at lists.projectclearwater.org"
	<clearwater at lists.projectclearwater.org>
Subject: Re: [Project Clearwater] Integration of Open HSS_All-in-one
Message-ID:
	<BY2PR02MB208601E0BE02E519E388BE8A9BC40 at BY2PR02MB2086.namprd02.prod.outlook.com>
	
Content-Type: text/plain; charset="us-ascii"

Hi Surender,

To use an external HSS you'll need to set the following settings in /etc/clearwater/shared_config

hss_hostname=<address of your HSS>
hss_realm=<realm your HSS is located in> hss_port=<port of your HSS's Cx interface>

Both hss_hostname and hss_realm are optional. If a realm is configured, homestead will try NAPTR/SRV resolution on the realm to find and connect to (2 by default) diameter peers in the realm.
If a hostname is also configured, this will be used in the Destination-Host field on the diameter messages, so that the messages will be routed to that host.
If just a hostname is configured, homestead will just attempt to create and maintain a single connection to that host.

You can find more information on this at http://clearwater.readthedocs.io/en/latest/External_HSS_Integration.html, and you may also find http://clearwater.readthedocs.io/en/latest/OpenIMSCore_HSS_Integration.html useful.

For your other queries:

1. You can configure subscribers to use an application server that provides these functions by setting their IFCs in the HSS. You can use the MMTel application server built into Clearwater for this - see the details at http://clearwater.readthedocs.io/en/latest/OpenIMSCore_HSS_Integration.html#adding-the-mmtel-application-server for more information.

2. The key restrictions of the all-in-one solutions are:
* hard-coded realm - the all-in-one image uses a hard-coded realm of example.com so your SIP URI might be sip:6505551234 at example.com - by default, SIP uses this realm for routing but example.com won't resolve to your host so you need to configure an outbound proxy on all your SIP clients
* performance - since all software runs on a single virtual machine, performance is significantly lower than even the smallest scale deployment
* scalability - there is no option to scale up and add more virtual machines to boost capacity - for this, you must create a normal deployment
* fault-tolerance - since everything runs on a single virtual machine, if that virtual machine fails, the service as a whole fails.

3. I didn't understand this question. What's the 'other DNS'?

Ellie

From: Clearwater [mailto:clearwater-bounces at lists.projectclearwater.org] On Behalf Of Surender Singh
Sent: 03 October 2016 07:11
To: clearwater at lists.projectclearwater.org
Subject: [Project Clearwater] Integration of Open HSS_All-in-one

Hello,

I deployed the All in one solution in VMware machine .My IN-OUT calls are working to other network using BGCF/IBCF feature .

Now i want Integrate the Open HSS with Homestead node .Can you suggest me where I need to make the entry in aio solution .

I having some below query..


1)      Can we provision the basic supplementary  service (CF Service, Three Party, Call-Transfer , Call park  etc .) in open HSS.

2)      Any other drawbacks of the all-in-one solution apart from Performance /Production.

3)      Can i integrate the other DNS for DNS query .

Regards
Surender Singh








::DISCLAIMER::
----------------------------------------------------------------------------------------------------------------------------------------------------
The contents of this e-mail and any attachment(s) are confidential and intended for the named recipient(s) only.
E-mail transmission is not guaranteed to be secure or error-free as information could be intercepted, corrupted, lost, destroyed, arrive late or incomplete, or may contain viruses in transmission. The e mail and its contents (with or without referred errors) shall therefore not attach any liability on the originator or HCL or its affiliates.
Views or opinions, if any, presented in this email are solely those of the author and may not necessarily reflect the views or opinions of HCL or its affiliates. Any form of reproduction, dissemination, copying, disclosure, modification, distribution and / or publication of this message without the prior written consent of authorized representative of HCL is strictly prohibited. If you have received this email in error please delete it and notify the sender immediately.
Before opening any email and/or attachments, please check them for viruses and other defects.
----------------------------------------------------------------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161005/2ddbd5cf/attachment-0001.html>

------------------------------

Subject: Digest Footer

_______________________________________________
Clearwater mailing list
Clearwater at lists.projectclearwater.org
http://lists.projectclearwater.org/mailman/listinfo/clearwater_lists.projectclearwater.org


------------------------------

End of Clearwater Digest, Vol 42, Issue 4
*****************************************

_______________________________________________
Clearwater mailing list
Clearwater at lists.projectclearwater.org
http://lists.projectclearwater.org/mailman/listinfo/clearwater_lists.projectclearwater.org



From surender.s at hcl.com  Thu Oct 13 02:18:57 2016
From: surender.s at hcl.com (Surender Singh)
Date: Thu, 13 Oct 2016 06:18:57 +0000
Subject: [Project Clearwater] Clearwater Digest, Vol 42, Issue 9
In-Reply-To: <mailman.51.1476296151.2757.clearwater_lists.projectclearwater.org@lists.projectclearwater.org>
References: <mailman.51.1476296151.2757.clearwater_lists.projectclearwater.org@lists.projectclearwater.org>
Message-ID: <16AE9ED83DBA5B4D85B058EAF39C918107E1D717@NDA-HCLT-MBS05.hclt.corp.hcl.in>

Hi Ellie,

Thanks for support now it's working fine.

Can you help me on more issue to Provision the supplementary service (Call Fwd, Call Trans,Three Party etc).

Regards
Surender


Message: 1
Date: Wed, 12 Oct 2016 18:15:08 +0000
From: Eleanor Merry <Eleanor.Merry at metaswitch.com>
To: "clearwater at lists.projectclearwater.org"
	<clearwater at lists.projectclearwater.org>
Subject: Re: [Project Clearwater] Integration of Open HSS_All-in-one
Message-ID:
	<BL2PR02MB20843688017344C18585F7009BDD0 at BL2PR02MB2084.namprd02.prod.outlook.com>
	
Content-Type: text/plain; charset="us-ascii"

Hi Surender,

It looks like the HSS is sending a malformed MAA, which Homestead is rejecting. Looking at the 'SIP-Authentication-Scheme' AVP though it looks like your subscribers are using HTTP_DIGEST_MD5 authentication. This isn't supported in Project Clearwater; we support SIP Digest authentication and AKA authentication (if you've got clients that can perform AKA authentication as well). For Zoiper, you want to use SIP Digest authentication instead.

Hope this helps,

Ellie

-----Original Message-----
From: Clearwater [mailto:clearwater-bounces at lists.projectclearwater.org] On Behalf Of Surender Singh
Sent: 12 October 2016 13:45
To: clearwater at lists.projectclearwater.org
Subject: Re: [Project Clearwater] Integration of Open HSS_All-in-one

Hi Ellie,

Now I am able to see UAR,MAR message but still getting issue in registering the users. I am using Zoiper client .


Please find below logs at homestead nodes;


12-10-2016 18:01:11.103 UTC Debug freeDiameter: GOING TO SEND TO '10.112.87.132': 'Device-Watchdog-Answer'0/280 f:---- src:'(nil)' len:20 {C:268/l:12,C:264/l:8,C:296/l:8,C:278/l:12}
12-10-2016 18:01:11.103 UTC Debug freeDiameter: Sending 84b data on connection {----} TCP,#1236->10.112.87.132(3868)
12-10-2016 18:01:13.877 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:13.877 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:13.877 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:16.657 UTC Verbose httpstack.cpp:293: Process request for URL /ping, args (null)
12-10-2016 18:01:16.657 UTC Verbose httpstack.cpp:69: Sending response 200 to request for URL /ping, args (null)
12-10-2016 18:01:18.877 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:18.877 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:18.877 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:23.877 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:23.877 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:23.878 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:26.689 UTC Verbose httpstack.cpp:293: Process request for URL /ping, args (null)
12-10-2016 18:01:26.689 UTC Verbose httpstack.cpp:69: Sending response 200 to request for URL /ping, args (null)
12-10-2016 18:01:27.848 UTC Verbose httpstack.cpp:293: Process request for URL /impu/sip%3A8310%40open-ims.test/reg-data, args (null)
12-10-2016 18:01:27.848 UTC Debug handlers.cpp:1080: Parsed HTTP request: private ID , public ID sip:8310 at open-ims.test, server name sip:scscf.cw-aio:5054;transport=TCP
12-10-2016 18:01:27.848 UTC Debug handlers.cpp:1004: Determining request type from '{"reqtype": "call", "server_name": "sip:scscf.cw-aio:5054;transport=TCP"}'
12-10-2016 18:01:27.848 UTC Debug handlers.cpp:1048: New value of _type is 2
12-10-2016 18:01:27.848 UTC Debug handlers.cpp:1118: Try to find IMS Subscription information in the cache
12-10-2016 18:01:27.848 UTC Debug cassandra_store.cpp:284: Getting thread-local Client
12-10-2016 18:01:27.848 UTC Debug cassandra_store.cpp:129: Generated Cassandra timestamp 1476295287848423
12-10-2016 18:01:27.848 UTC Debug cache.cpp:347: Issuing get for key sip:8310 at open-ims.test
12-10-2016 18:01:27.848 UTC Debug cassandra_store.cpp:755: Failed TWO read for get_row. Try ONE
12-10-2016 18:01:27.849 UTC Debug cache.cpp:367: Retrieved XML column with TTL 1014 and value <?xml version="1.0" encoding="UTF-8"?><IMSSubscription><PrivateID>null</PrivateID><ServiceProfile><PublicIdentity><Identity>sip:8310 at open-ims.test</Identity><Extension><IdentityType>0</IdentityType><Extension><DisplayName>8310</DisplayName></Extension></Extension></PublicIdentity><InitialFilterCriteria><Priority>0</Priority><TriggerPoint><ConditionTypeCNF>1</ConditionTypeCNF><SPT><ConditionNegated>0</ConditionNegated><Group>0</Group><RequestURI>INVITE</RequestURI><Extension></Extension></SPT></TriggerPoint><ApplicationServer><ServerName>sip:mmtel.open-ims.test</ServerName><DefaultHandling>0</DefaultHandling></ApplicationServer></InitialFilterCriteria></ServiceProfile></IMSSubscription>
12-10-2016 18:01:27.849 UTC Debug cache.cpp:408: Retrived primary_ccf column with value pri_ccf_address
12-10-2016 18:01:27.849 UTC Debug cache.cpp:435: Found stored XML for subscriber, treating as UNREGISTERED state
12-10-2016 18:01:27.849 UTC Debug communicationmonitor.cpp:82: Checking communication changes - successful attempts 2, failures 0
12-10-2016 18:01:27.849 UTC Debug handlers.cpp:1147: Got IMS subscription from cache
12-10-2016 18:01:27.849 UTC Debug handlers.cpp:1162: TTL for this database record is 0, IMS Subscription XML is not empty, registration state is UNREGISTERED, and the charging addresses are Primary CCF: pri_ccf_address
12-10-2016 18:01:27.849 UTC Debug handlers.cpp:1272: Handling call
12-10-2016 18:01:27.849 UTC Debug handlers.cpp:1469: Sending 200 response (body was {"reqtype": "call", "server_name": "sip:scscf.cw-aio:5054;transport=TCP"})
12-10-2016 18:01:27.849 UTC Verbose httpstack.cpp:69: Sending response 200 to request for URL /impu/sip%3A8310%40open-ims.test/reg-data, args (null)
12-10-2016 18:01:27.850 UTC Verbose httpstack.cpp:293: Process request for URL /impi/8310%40open-ims.test/registration-status, args impu=sip%3A8310%40open-ims.test&visited-network=open-ims.test&auth-type=REG
12-10-2016 18:01:27.850 UTC Debug handlers.cpp:591: Parsed HTTP request: private ID 8310 at open-ims.test, public ID sip:8310 at open-ims.test, visited network open-ims.test, authorization type REG
12-10-2016 18:01:27.850 UTC Debug cx.cpp:109: Building User-Authorization request for 8310 at open-ims.test/sip:8310 at open-ims.test
12-10-2016 18:01:27.850 UTC Debug freeDiameter: No Session-Id AVP found in message 0x7f2a6c002140
12-10-2016 18:01:27.850 UTC Verbose diameterstack.cpp:1427: Sending Diameter message of type 300 on transaction 0x7f2a6c001f20 with timeout 200
12-10-2016 18:01:27.850 UTC Debug diameterstack.cpp:397: Routing out callback from freeDiameter
12-10-2016 18:01:27.850 UTC Debug realmmanager.cpp:189: freeDiameter routing score for candidate 10.112.87.132 is changing from 13 to 12
12-10-2016 18:01:27.850 UTC Debug freeDiameter: GOING TO SEND TO '10.112.87.132': '3GPP/User-Authorization-Request'16777216/300 f:RP-- src:'(nil)' len:20 {C:263/l:8,C:260/l:8,C:277/l:12,C:264/l:8,C:296/l:8,C:293/l:8,C:283/l:8,C:1/l:8,V:10415/C:601/l:12,V:10415/C:600/l:12,V:10415/C:623/l:16}
12-10-2016 18:01:27.850 UTC Debug diameterstack.cpp:908: Processing a sent diameter message
12-10-2016 18:01:27.850 UTC Debug diameterstack.cpp:910: Got existing trail ID: 2630
12-10-2016 18:01:27.850 UTC Debug diameterstack.cpp:969: Raising correlating marker with diameter session ID = cw-aio;1476270305;103
12-10-2016 18:01:27.850 UTC Debug freeDiameter: Sending 292b data on connection {----} TCP,#1236->10.112.87.132(3868)
12-10-2016 18:01:27.857 UTC Debug freeDiameter: 'STATE_OPEN'	<-- 'FDEVP_CNX_MSG_RECV'	(0x7f2ae000b560,228)	'10.112.87.132'
12-10-2016 18:01:27.857 UTC Debug diameterstack.cpp:888: Processing a received diameter message
12-10-2016 18:01:27.857 UTC Debug diameterstack.cpp:901: Got existing trail ID: 2630
12-10-2016 18:01:27.857 UTC Debug diameterstack.cpp:969: Raising correlating marker with diameter session ID = cw-aio;1476270305;103
12-10-2016 18:01:27.857 UTC Debug freeDiameter: Peer timeout reset to 30 seconds (+/- 2)
12-10-2016 18:01:27.857 UTC Debug freeDiameter: '10.112.87.132' in state 'STATE_OPEN' waiting for next event.
12-10-2016 18:01:27.857 UTC Debug freeDiameter: Iterating on rules of AVP: 'Vendor-Specific-Application-Id'.
12-10-2016 18:01:27.857 UTC Debug freeDiameter: Iterating on rules of AVP: 'Experimental-Result'.
12-10-2016 18:01:27.857 UTC Debug freeDiameter: Iterating on rules of COMMAND: '3GPP/User-Authorization-Answer'.
12-10-2016 18:01:27.857 UTC Debug freeDiameter: Calling callback registered when query was sent (0x45c5d0, 0x7f2a6c001f20)
12-10-2016 18:01:27.857 UTC Verbose diameterstack.cpp:1097: Got Diameter response of type 300 - calling callback on transaction 0x7f2a6c001f20
12-10-2016 18:01:27.857 UTC Debug communicationmonitor.cpp:82: Checking communication changes - successful attempts 2, failures 0
12-10-2016 18:01:27.857 UTC Debug diameterstack.cpp:1375: Got Experimental-Result-Code 2002
12-10-2016 18:01:27.857 UTC Debug handlers.cpp:647: Received User-Authorization answer with result 0/2002
12-10-2016 18:01:27.857 UTC Debug handlers.cpp:662: Got Server-Name sip:scscf.cw-aio:5054;transport=TCP
12-10-2016 18:01:27.857 UTC Verbose httpstack.cpp:69: Sending response 200 to request for URL /impi/8310%40open-ims.test/registration-status, args impu=sip%3A8310%40open-ims.test&visited-network=open-ims.test&auth-type=REG
12-10-2016 18:01:27.859 UTC Verbose httpstack.cpp:293: Process request for URL /impi/8310%40open-ims.test/av, args impu=sip%3A8310%40open-ims.test
12-10-2016 18:01:27.859 UTC Debug handlers.cpp:148: Parsed HTTP request: private ID 8310 at open-ims.test, public ID sip:8310 at open-ims.test, scheme Unknown, authorization
12-10-2016 18:01:27.859 UTC Debug handlers.cpp:155: Authentication vector cache query disabled - query HSS
12-10-2016 18:01:27.859 UTC Debug cx.cpp:375: Building Multimedia-Auth request for 8310 at open-ims.test/sip:8310 at open-ims.test
12-10-2016 18:01:27.859 UTC Debug freeDiameter: No Session-Id AVP found in message 0x7f2a6c002070
12-10-2016 18:01:27.859 UTC Verbose diameterstack.cpp:1427: Sending Diameter message of type 303 on transaction 0x7f2a6c002d70 with timeout 200
12-10-2016 18:01:27.859 UTC Debug diameterstack.cpp:397: Routing out callback from freeDiameter
12-10-2016 18:01:27.859 UTC Debug realmmanager.cpp:189: freeDiameter routing score for candidate 10.112.87.132 is changing from 13 to 12
12-10-2016 18:01:27.859 UTC Debug freeDiameter: GOING TO SEND TO '10.112.87.132': '3GPP/Multimedia-Auth-Request'16777216/303 f:RP-- src:'(nil)' len:20 {C:263/l:8,C:260/l:8,C:277/l:12,C:283/l:8,C:293/l:8,C:264/l:8,C:296/l:8,C:1/l:8,V:10415/C:601/l:12,V:10415/C:612/l:12,V:10415/C:607/l:16,V:10415/C:602/l:12}
12-10-2016 18:01:27.859 UTC Debug diameterstack.cpp:908: Processing a sent diameter message
12-10-2016 18:01:27.859 UTC Debug diameterstack.cpp:910: Got existing trail ID: 2631
12-10-2016 18:01:27.859 UTC Debug diameterstack.cpp:969: Raising correlating marker with diameter session ID = cw-aio;1476270305;104
12-10-2016 18:01:27.859 UTC Debug freeDiameter: Sending 344b data on connection {----} TCP,#1236->10.112.87.132(3868)
12-10-2016 18:01:27.864 UTC Debug freeDiameter: 'STATE_OPEN'	<-- 'FDEVP_CNX_MSG_RECV'	(0x7f2ae001e4f0,552)	'10.112.87.132'
12-10-2016 18:01:27.864 UTC Debug diameterstack.cpp:888: Processing a received diameter message
12-10-2016 18:01:27.864 UTC Debug diameterstack.cpp:901: Got existing trail ID: 2631
12-10-2016 18:01:27.864 UTC Debug diameterstack.cpp:969: Raising correlating marker with diameter session ID = cw-aio;1476270305;104
12-10-2016 18:01:27.864 UTC Debug freeDiameter: Peer timeout reset to 30 seconds (+/- 2)
12-10-2016 18:01:27.864 UTC Debug freeDiameter: '10.112.87.132' in state 'STATE_OPEN' waiting for next event.
12-10-2016 18:01:27.864 UTC Status freeDiameter: Unsupported mandatory AVP found
12-10-2016 18:01:27.864 UTC Error freeDiameter: ERROR: in '((parsedict_do_avp(dict, ((struct avp *)(avpch->o)), mandatory, error_info)))' :	Operation not supported
12-10-2016 18:01:27.864 UTC Error freeDiameter: ERROR: in '((parsedict_do_avp(dict, ((struct avp *)(avpch->o)), mandatory, error_info)))' :	Operation not supported
12-10-2016 18:01:27.864 UTC Error freeDiameter: ERROR: in '((fd_msg_parse_dict ( object, dict, error_info )))' :	Operation not supported
12-10-2016 18:01:27.864 UTC Error freeDiameter: Parsing error: 'DIAMETER_AVP_UNSUPPORTED' for the following message received from '<error getting source>':
12-10-2016 18:01:27.864 UTC Error freeDiameter:    '3GPP/Multimedia-Auth-Answer'
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Version: 0x01
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Length: 552
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Flags: 0x40 (-P--)
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Command Code: 303
12-10-2016 18:01:27.864 UTC Error freeDiameter:      ApplicationId: 16777216
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Hop-by-Hop Identifier: 0x512F5AC0
12-10-2016 18:01:27.864 UTC Error freeDiameter:      End-to-End Identifier: 0x8E19124A
12-10-2016 18:01:27.864 UTC Error freeDiameter:       {internal data}: src:10.112.87.132(13) rwb:0x7f2ae001e4f0 rt:1 cb:(nil),(nil)((nil)) qry:0x7f2a6c002070 asso:0 sess:0x7f2a6c0021b0
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Session-Id'(263) l=29 f=-M val="cw-aio;1476270305;104"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Origin-Host'(264) l=25 f=-M val="hss.open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Origin-Realm'(296) l=21 f=-M val="open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Auth-Session-State'(277) l=12 f=-M val='NO_STATE_MAINTAINED' (1 (0x1))
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Vendor-Specific-Application-Id'(260) l=32 f=-M val=(grouped)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'Vendor-Id'(266) l=12 f=-M val=10415 (0x28af)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'Auth-Application-Id'(258) l=12 f=-M val=16777216 (0x1000000)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Public-Identity'(601) vend='3GPP'(10415) l=34 f=VM val="sip:8310 at open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'User-Name'(1) l=26 f=-M val="8310 at open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'SIP-Number-Auth-Items'(607) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'SIP-Auth-Data-Item'(612) vend='3GPP'(10415) l=312 f=VM val=(grouped)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'SIP-Item-Number'(613) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'SIP-Authentication-Scheme'(608) vend='3GPP'(10415) l=27 f=VM val="I"
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 504(not found in dictionary) vend=4491 l=44 f=VM val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 501(not searched in dictionary) vend=13019 l=156 f=VM val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 503(not searched in dictionary) vend=13019 l=56 f=VM val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 268(not searched in dictionary) l=12 f=-M val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Route-Record'(282) l=8 f=-M val="10.112.87.132"
12-10-2016 18:01:27.864 UTC Error freeDiameter: ERROR: in '(fd_msg_parse_or_error( &msgptr, &error ))' :	Bad message
12-10-2016 18:01:27.864 UTC Error freeDiameter: Message discarded ('Received answer failed the dictionary / rules parsing'):
12-10-2016 18:01:27.864 UTC Error freeDiameter:    '3GPP/Multimedia-Auth-Answer'
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Version: 0x01
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Length: 552
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Flags: 0x40 (-P--)
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Command Code: 303
12-10-2016 18:01:27.864 UTC Error freeDiameter:      ApplicationId: 16777216
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Hop-by-Hop Identifier: 0x512F5AC0
12-10-2016 18:01:27.864 UTC Error freeDiameter:      End-to-End Identifier: 0x8E19124A
12-10-2016 18:01:27.864 UTC Error freeDiameter:       {internal data}: src:10.112.87.132(13) rwb:0x7f2ae001e4f0 rt:1 cb:(nil),(nil)((nil)) qry:0x7f2a6c002070 asso:0 sess:0x7f2a6c0021b0
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Session-Id'(263) l=29 f=-M val="cw-aio;1476270305;104"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Origin-Host'(264) l=25 f=-M val="hss.open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Origin-Realm'(296) l=21 f=-M val="open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Auth-Session-State'(277) l=12 f=-M val='NO_STATE_MAINTAINED' (1 (0x1))
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Vendor-Specific-Application-Id'(260) l=32 f=-M val=(grouped)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'Vendor-Id'(266) l=12 f=-M val=10415 (0x28af)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'Auth-Application-Id'(258) l=12 f=-M val=16777216 (0x1000000)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Public-Identity'(601) vend='3GPP'(10415) l=34 f=VM val="sip:8310 at open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'User-Name'(1) l=26 f=-M val="8310 at open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'SIP-Number-Auth-Items'(607) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'SIP-Auth-Data-Item'(612) vend='3GPP'(10415) l=312 f=VM val=(grouped)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'SIP-Item-Number'(613) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'SIP-Authentication-Scheme'(608) vend='3GPP'(10415) l=27 f=VM val="HTTP_DIGEST_MD5"
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 504(not found in dictionary) vend=4491 l=44 f=VM val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 501(not searched in dictionary) vend=13019 l=156 f=VM val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 503(not searched in dictionary) vend=13019 l=56 f=VM val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 268(not searched in dictionary) l=12 f=-M val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Route-Record'(282) l=8 f=-M val="10.112.87.132"
12-10-2016 18:01:28.360 UTC Verbose httpstack.cpp:293: Process request for URL /impi/8310%40open-ims.test/av, args impu=sip%3A8310%40open-ims.test
12-10-2016 18:01:28.360 UTC Debug handlers.cpp:148: Parsed HTTP request: private ID 8310 at open-ims.test, public ID sip:8310 at open-ims.test, scheme Unknown, authorization
12-10-2016 18:01:28.360 UTC Debug handlers.cpp:155: Authentication vector cache query disabled - query HSS
12-10-2016 18:01:28.360 UTC Debug cx.cpp:375: Building Multimedia-Auth request for 8310 at open-ims.test/sip:8310 at open-ims.test
12-10-2016 18:01:28.360 UTC Debug freeDiameter: No Session-Id AVP found in message 0x7f2a6801f0c0
12-10-2016 18:01:28.360 UTC Verbose diameterstack.cpp:1427: Sending Diameter message of type 303 on transaction 0x7f2a68002d50 with timeout 200
12-10-2016 18:01:28.360 UTC Debug diameterstack.cpp:397: Routing out callback from freeDiameter
12-10-2016 18:01:28.360 UTC Debug realmmanager.cpp:189: freeDiameter routing score for candidate 10.112.87.132 is changing from 13 to 12
12-10-2016 18:01:28.360 UTC Debug freeDiameter: GOING TO SEND TO '10.112.87.132': '3GPP/Multimedia-Auth-Request'16777216/303 f:RP-- src:'(nil)' len:20 {C:263/l:8,C:260/l:8,C:277/l:12,C:283/l:8,C:293/l:8,C:264/l:8,C:296/l:8,C:1/l:8,V:10415/C:601/l:12,V:10415/C:612/l:12,V:10415/C:607/l:16,V:10415/C:602/l:12}
12-10-2016 18:01:28.360 UTC Debug diameterstack.cpp:908: Processing a sent diameter message
12-10-2016 18:01:28.360 UTC Debug diameterstack.cpp:910: Got existing trail ID: 2632
12-10-2016 18:01:28.360 UTC Debug diameterstack.cpp:969: Raising correlating marker with diameter session ID = cw-aio;1476270305;105
12-10-2016 18:01:28.360 UTC Debug freeDiameter: Sending 344b data on connection {----} TCP,#1236->10.112.87.132(3868)
12-10-2016 18:01:28.366 UTC Debug freeDiameter: 'STATE_OPEN'	<-- 'FDEVP_CNX_MSG_RECV'	(0x7f2ae001e4f0,552)	'10.112.87.132'
12-10-2016 18:01:28.366 UTC Debug diameterstack.cpp:888: Processing a received diameter message
12-10-2016 18:01:28.366 UTC Debug diameterstack.cpp:901: Got existing trail ID: 2632
12-10-2016 18:01:28.366 UTC Debug diameterstack.cpp:969: Raising correlating marker with diameter session ID = cw-aio;1476270305;105
12-10-2016 18:01:28.366 UTC Debug freeDiameter: Peer timeout reset to 30 seconds (+/- 2)
12-10-2016 18:01:28.366 UTC Debug freeDiameter: '10.112.87.132' in state 'STATE_OPEN' waiting for next event.
12-10-2016 18:01:28.366 UTC Status freeDiameter: Unsupported mandatory AVP found
12-10-2016 18:01:28.366 UTC Error freeDiameter: ERROR: in '((parsedict_do_avp(dict, ((struct avp *)(avpch->o)), mandatory, error_info)))' :	Operation not supported
12-10-2016 18:01:28.366 UTC Error freeDiameter: ERROR: in '((parsedict_do_avp(dict, ((struct avp *)(avpch->o)), mandatory, error_info)))' :	Operation not supported
12-10-2016 18:01:28.366 UTC Error freeDiameter: ERROR: in '((fd_msg_parse_dict ( object, dict, error_info )))' :	Operation not supported
12-10-2016 18:01:28.367 UTC Error freeDiameter: Parsing error: 'DIAMETER_AVP_UNSUPPORTED' for the following message received from '<error getting source>':
12-10-2016 18:01:28.367 UTC Error freeDiameter:    '3GPP/Multimedia-Auth-Answer'
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Version: 0x01
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Length: 552
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Flags: 0x40 (-P--)
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Command Code: 303
12-10-2016 18:01:28.367 UTC Error freeDiameter:      ApplicationId: 16777216
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Hop-by-Hop Identifier: 0x512F5AC1
12-10-2016 18:01:28.367 UTC Error freeDiameter:      End-to-End Identifier: 0x8E19124B
12-10-2016 18:01:28.367 UTC Error freeDiameter:       {internal data}: src:10.112.87.132(13) rwb:0x7f2ae001e4f0 rt:1 cb:(nil),(nil)((nil)) qry:0x7f2a6801f0c0 asso:0 sess:0x7f2a6801f200
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Session-Id'(263) l=29 f=-M val="cw-aio;1476270305;105"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Origin-Host'(264) l=25 f=-M val="hss.open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Origin-Realm'(296) l=21 f=-M val="open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Auth-Session-State'(277) l=12 f=-M val='NO_STATE_MAINTAINED' (1 (0x1))
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Vendor-Specific-Application-Id'(260) l=32 f=-M val=(grouped)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'Vendor-Id'(266) l=12 f=-M val=10415 (0x28af)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'Auth-Application-Id'(258) l=12 f=-M val=16777216 (0x1000000)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Public-Identity'(601) vend='3GPP'(10415) l=34 f=VM val="sip:8310 at open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'User-Name'(1) l=26 f=-M val="8310 at open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'SIP-Number-Auth-Items'(607) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'SIP-Auth-Data-Item'(612) vend='3GPP'(10415) l=312 f=VM val=(grouped)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'SIP-Item-Number'(613) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'SIP-Authentication-Scheme'(608) vend='3GPP'(10415) l=27 f=VM val="HTTP_DIGEST_MD5"
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 504(not found in dictionary) vend=4491 l=44 f=VM val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 501(not searched in dictionary) vend=13019 l=156 f=VM val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 503(not searched in dictionary) vend=13019 l=56 f=VM val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 268(not searched in dictionary) l=12 f=-M val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Route-Record'(282) l=8 f=-M val="10.112.87.132"
12-10-2016 18:01:28.367 UTC Error freeDiameter: ERROR: in '(fd_msg_parse_or_error( &msgptr, &error ))' :	Bad message
12-10-2016 18:01:28.367 UTC Error freeDiameter: Message discarded ('Received answer failed the dictionary / rules parsing'):
12-10-2016 18:01:28.367 UTC Error freeDiameter:    '3GPP/Multimedia-Auth-Answer'
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Version: 0x01
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Length: 552
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Flags: 0x40 (-P--)
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Command Code: 303
12-10-2016 18:01:28.367 UTC Error freeDiameter:      ApplicationId: 16777216
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Hop-by-Hop Identifier: 0x512F5AC1
12-10-2016 18:01:28.367 UTC Error freeDiameter:      End-to-End Identifier: 0x8E19124B
12-10-2016 18:01:28.367 UTC Error freeDiameter:       {internal data}: src:10.112.87.132(13) rwb:0x7f2ae001e4f0 rt:1 cb:(nil),(nil)((nil)) qry:0x7f2a6801f0c0 asso:0 sess:0x7f2a6801f200
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Session-Id'(263) l=29 f=-M val="cw-aio;1476270305;105"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Origin-Host'(264) l=25 f=-M val="hss.open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Origin-Realm'(296) l=21 f=-M val="open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Auth-Session-State'(277) l=12 f=-M val='NO_STATE_MAINTAINED' (1 (0x1))
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Vendor-Specific-Application-Id'(260) l=32 f=-M val=(grouped)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'Vendor-Id'(266) l=12 f=-M val=10415 (0x28af)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'Auth-Application-Id'(258) l=12 f=-M val=16777216 (0x1000000)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Public-Identity'(601) vend='3GPP'(10415) l=34 f=VM val="sip:8310 at open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'User-Name'(1) l=26 f=-M val="8310 at open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'SIP-Number-Auth-Items'(607) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'SIP-Auth-Data-Item'(612) vend='3GPP'(10415) l=312 f=VM val=(grouped)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'SIP-Item-Number'(613) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'SIP-Authentication-Scheme'(608) vend='3GPP'(10415) l=27 f=VM val="HTTP_DIGEST_MD5"
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 504(not found in dictionary) vend=4491 l=44 f=VM val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 501(not searched in dictionary) vend=13019 l=156 f=VM val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 503(not searched in dictionary) vend=13019 l=56 f=VM val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 268(not searched in dictionary) l=12 f=-M val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Route-Record'(282) l=8 f=-M val="10.112.87.132"
12-10-2016 18:01:28.878 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:28.878 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:28.878 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:33.878 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:33.878 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:33.878 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:35.274 UTC Debug alarm.cpp:253: Reraising all alarms with a known state
12-10-2016 18:01:35.274 UTC Debug alarm.cpp:312: AlarmReqAgent: queue overflowed
12-10-2016 18:01:35.274 UTC Status alarm.cpp:62: homestead issued 1502.1 alarm
12-10-2016 18:01:35.274 UTC Debug alarm.cpp:312: AlarmReqAgent: queue overflowed
12-10-2016 18:01:35.274 UTC Status alarm.cpp:62: homestead issued 1501.1 alarm
12-10-2016 18:01:36.734 UTC Verbose httpstack.cpp:293: Process request for URL /ping, args (null)
12-10-2016 18:01:36.734 UTC Verbose httpstack.cpp:69: Sending response 200 to request for URL /ping, args (null)
12-10-2016 18:01:38.878 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:38.878 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:38.878 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:43.878 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:43.878 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:43.878 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:46.782 UTC Verbose httpstack.cpp:293: Process request for URL /ping, args (null)




Message: 1
Date: Wed, 5 Oct 2016 16:03:13 +0000
From: "Eleanor Merry (projectclearwater.org)"
	<eleanor at projectclearwater.org>
To: "clearwater at lists.projectclearwater.org"
	<clearwater at lists.projectclearwater.org>
Subject: Re: [Project Clearwater] Integration of Open HSS_All-in-one
Message-ID:
	<BY2PR02MB208601E0BE02E519E388BE8A9BC40 at BY2PR02MB2086.namprd02.prod.outlook.com>
	
Content-Type: text/plain; charset="us-ascii"

Hi Surender,

To use an external HSS you'll need to set the following settings in /etc/clearwater/shared_config

hss_hostname=<address of your HSS>
hss_realm=<realm your HSS is located in> hss_port=<port of your HSS's Cx interface>

Both hss_hostname and hss_realm are optional. If a realm is configured, homestead will try NAPTR/SRV resolution on the realm to find and connect to (2 by default) diameter peers in the realm.
If a hostname is also configured, this will be used in the Destination-Host field on the diameter messages, so that the messages will be routed to that host.
If just a hostname is configured, homestead will just attempt to create and maintain a single connection to that host.

You can find more information on this at http://clearwater.readthedocs.io/en/latest/External_HSS_Integration.html, and you may also find http://clearwater.readthedocs.io/en/latest/OpenIMSCore_HSS_Integration.html useful.

For your other queries:

1. You can configure subscribers to use an application server that provides these functions by setting their IFCs in the HSS. You can use the MMTel application server built into Clearwater for this - see the details at http://clearwater.readthedocs.io/en/latest/OpenIMSCore_HSS_Integration.html#adding-the-mmtel-application-server for more information.

2. The key restrictions of the all-in-one solutions are:
* hard-coded realm - the all-in-one image uses a hard-coded realm of example.com so your SIP URI might be sip:6505551234 at example.com - by default, SIP uses this realm for routing but example.com won't resolve to your host so you need to configure an outbound proxy on all your SIP clients
* performance - since all software runs on a single virtual machine, performance is significantly lower than even the smallest scale deployment
* scalability - there is no option to scale up and add more virtual machines to boost capacity - for this, you must create a normal deployment
* fault-tolerance - since everything runs on a single virtual machine, if that virtual machine fails, the service as a whole fails.

3. I didn't understand this question. What's the 'other DNS'?

Ellie

From: Clearwater [mailto:clearwater-bounces at lists.projectclearwater.org] On Behalf Of Surender Singh
Sent: 03 October 2016 07:11
To: clearwater at lists.projectclearwater.org
Subject: [Project Clearwater] Integration of Open HSS_All-in-one

Hello,

I deployed the All in one solution in VMware machine .My IN-OUT calls are working to other network using BGCF/IBCF feature .

Now i want Integrate the Open HSS with Homestead node .Can you suggest me where I need to make the entry in aio solution .

I having some below query..


1)      Can we provision the basic supplementary  service (CF Service, Three Party, Call-Transfer , Call park  etc .) in open HSS.

2)      Any other drawbacks of the all-in-one solution apart from Performance /Production.

3)      Can i integrate the other DNS for DNS query .

Regards
Surender Singh








::DISCLAIMER::
----------------------------------------------------------------------------------------------------------------------------------------------------
The contents of this e-mail and any attachment(s) are confidential and intended for the named recipient(s) only.
E-mail transmission is not guaranteed to be secure or error-free as information could be intercepted, corrupted, lost, destroyed, arrive late or incomplete, or may contain viruses in transmission. The e mail and its contents (with or without referred errors) shall therefore not attach any liability on the originator or HCL or its affiliates.
Views or opinions, if any, presented in this email are solely those of the author and may not necessarily reflect the views or opinions of HCL or its affiliates. Any form of reproduction, dissemination, copying, disclosure, modification, distribution and / or publication of this message without the prior written consent of authorized representative of HCL is strictly prohibited. If you have received this email in error please delete it and notify the sender immediately.
Before opening any email and/or attachments, please check them for viruses and other defects.
----------------------------------------------------------------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161005/2ddbd5cf/attachment-0001.html>

------------------------------

Subject: Digest Footer

_______________________________________________
Clearwater mailing list
Clearwater at lists.projectclearwater.org
http://lists.projectclearwater.org/mailman/listinfo/clearwater_lists.projectclearwater.org


------------------------------

End of Clearwater Digest, Vol 42, Issue 4
*****************************************

_______________________________________________
Clearwater mailing list
Clearwater at lists.projectclearwater.org
http://lists.projectclearwater.org/mailman/listinfo/clearwater_lists.projectclearwater.org



------------------------------

Subject: Digest Footer

_______________________________________________
Clearwater mailing list
Clearwater at lists.projectclearwater.org
http://lists.projectclearwater.org/mailman/listinfo/clearwater_lists.projectclearwater.org


------------------------------

End of Clearwater Digest, Vol 42, Issue 9
*****************************************



From surender.s at hcl.com  Thu Oct 13 02:37:41 2016
From: surender.s at hcl.com (Surender Singh)
Date: Thu, 13 Oct 2016 06:37:41 +0000
Subject: [Project Clearwater] Integration of Open HSS_All-in-one
Message-ID: <16AE9ED83DBA5B4D85B058EAF39C918107E1D72D@NDA-HCLT-MBS05.hclt.corp.hcl.in>

Hi Ellie,

Thanks for support now it's working fine.

Can you help me on more issue to Provision the supplementary service (Call Fwd, Call Trans,Three Party etc).

Can we now Integrate the VOLTE with Clearwater IMS ?

Regards
Surender


Message: 1
Date: Wed, 12 Oct 2016 18:15:08 +0000
From: Eleanor Merry <Eleanor.Merry at metaswitch.com>
To: "clearwater at lists.projectclearwater.org"
	<clearwater at lists.projectclearwater.org>
Subject: Re: [Project Clearwater] Integration of Open HSS_All-in-one
Message-ID:
	<BL2PR02MB20843688017344C18585F7009BDD0 at BL2PR02MB2084.namprd02.prod.outlook.com>
	
Content-Type: text/plain; charset="us-ascii"

Hi Surender,

It looks like the HSS is sending a malformed MAA, which Homestead is rejecting. Looking at the 'SIP-Authentication-Scheme' AVP though it looks like your subscribers are using HTTP_DIGEST_MD5 authentication. This isn't supported in Project Clearwater; we support SIP Digest authentication and AKA authentication (if you've got clients that can perform AKA authentication as well). For Zoiper, you want to use SIP Digest authentication instead.

Hope this helps,

Ellie

-----Original Message-----
From: Clearwater [mailto:clearwater-bounces at lists.projectclearwater.org] On Behalf Of Surender Singh
Sent: 12 October 2016 13:45
To: clearwater at lists.projectclearwater.org
Subject: Re: [Project Clearwater] Integration of Open HSS_All-in-one

Hi Ellie,

Now I am able to see UAR,MAR message but still getting issue in registering the users. I am using Zoiper client .


Please find below logs at homestead nodes;


12-10-2016 18:01:11.103 UTC Debug freeDiameter: GOING TO SEND TO '10.112.87.132': 'Device-Watchdog-Answer'0/280 f:---- src:'(nil)' len:20 {C:268/l:12,C:264/l:8,C:296/l:8,C:278/l:12}
12-10-2016 18:01:11.103 UTC Debug freeDiameter: Sending 84b data on connection {----} TCP,#1236->10.112.87.132(3868)
12-10-2016 18:01:13.877 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:13.877 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:13.877 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:16.657 UTC Verbose httpstack.cpp:293: Process request for URL /ping, args (null)
12-10-2016 18:01:16.657 UTC Verbose httpstack.cpp:69: Sending response 200 to request for URL /ping, args (null)
12-10-2016 18:01:18.877 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:18.877 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:18.877 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:23.877 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:23.877 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:23.878 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:26.689 UTC Verbose httpstack.cpp:293: Process request for URL /ping, args (null)
12-10-2016 18:01:26.689 UTC Verbose httpstack.cpp:69: Sending response 200 to request for URL /ping, args (null)
12-10-2016 18:01:27.848 UTC Verbose httpstack.cpp:293: Process request for URL /impu/sip%3A8310%40open-ims.test/reg-data, args (null)
12-10-2016 18:01:27.848 UTC Debug handlers.cpp:1080: Parsed HTTP request: private ID , public ID sip:8310 at open-ims.test, server name sip:scscf.cw-aio:5054;transport=TCP
12-10-2016 18:01:27.848 UTC Debug handlers.cpp:1004: Determining request type from '{"reqtype": "call", "server_name": "sip:scscf.cw-aio:5054;transport=TCP"}'
12-10-2016 18:01:27.848 UTC Debug handlers.cpp:1048: New value of _type is 2
12-10-2016 18:01:27.848 UTC Debug handlers.cpp:1118: Try to find IMS Subscription information in the cache
12-10-2016 18:01:27.848 UTC Debug cassandra_store.cpp:284: Getting thread-local Client
12-10-2016 18:01:27.848 UTC Debug cassandra_store.cpp:129: Generated Cassandra timestamp 1476295287848423
12-10-2016 18:01:27.848 UTC Debug cache.cpp:347: Issuing get for key sip:8310 at open-ims.test
12-10-2016 18:01:27.848 UTC Debug cassandra_store.cpp:755: Failed TWO read for get_row. Try ONE
12-10-2016 18:01:27.849 UTC Debug cache.cpp:367: Retrieved XML column with TTL 1014 and value <?xml version="1.0" encoding="UTF-8"?><IMSSubscription><PrivateID>null</PrivateID><ServiceProfile><PublicIdentity><Identity>sip:8310 at open-ims.test</Identity><Extension><IdentityType>0</IdentityType><Extension><DisplayName>8310</DisplayName></Extension></Extension></PublicIdentity><InitialFilterCriteria><Priority>0</Priority><TriggerPoint><ConditionTypeCNF>1</ConditionTypeCNF><SPT><ConditionNegated>0</ConditionNegated><Group>0</Group><RequestURI>INVITE</RequestURI><Extension></Extension></SPT></TriggerPoint><ApplicationServer><ServerName>sip:mmtel.open-ims.test</ServerName><DefaultHandling>0</DefaultHandling></ApplicationServer></InitialFilterCriteria></ServiceProfile></IMSSubscription>
12-10-2016 18:01:27.849 UTC Debug cache.cpp:408: Retrived primary_ccf column with value pri_ccf_address
12-10-2016 18:01:27.849 UTC Debug cache.cpp:435: Found stored XML for subscriber, treating as UNREGISTERED state
12-10-2016 18:01:27.849 UTC Debug communicationmonitor.cpp:82: Checking communication changes - successful attempts 2, failures 0
12-10-2016 18:01:27.849 UTC Debug handlers.cpp:1147: Got IMS subscription from cache
12-10-2016 18:01:27.849 UTC Debug handlers.cpp:1162: TTL for this database record is 0, IMS Subscription XML is not empty, registration state is UNREGISTERED, and the charging addresses are Primary CCF: pri_ccf_address
12-10-2016 18:01:27.849 UTC Debug handlers.cpp:1272: Handling call
12-10-2016 18:01:27.849 UTC Debug handlers.cpp:1469: Sending 200 response (body was {"reqtype": "call", "server_name": "sip:scscf.cw-aio:5054;transport=TCP"})
12-10-2016 18:01:27.849 UTC Verbose httpstack.cpp:69: Sending response 200 to request for URL /impu/sip%3A8310%40open-ims.test/reg-data, args (null)
12-10-2016 18:01:27.850 UTC Verbose httpstack.cpp:293: Process request for URL /impi/8310%40open-ims.test/registration-status, args impu=sip%3A8310%40open-ims.test&visited-network=open-ims.test&auth-type=REG
12-10-2016 18:01:27.850 UTC Debug handlers.cpp:591: Parsed HTTP request: private ID 8310 at open-ims.test, public ID sip:8310 at open-ims.test, visited network open-ims.test, authorization type REG
12-10-2016 18:01:27.850 UTC Debug cx.cpp:109: Building User-Authorization request for 8310 at open-ims.test/sip:8310 at open-ims.test
12-10-2016 18:01:27.850 UTC Debug freeDiameter: No Session-Id AVP found in message 0x7f2a6c002140
12-10-2016 18:01:27.850 UTC Verbose diameterstack.cpp:1427: Sending Diameter message of type 300 on transaction 0x7f2a6c001f20 with timeout 200
12-10-2016 18:01:27.850 UTC Debug diameterstack.cpp:397: Routing out callback from freeDiameter
12-10-2016 18:01:27.850 UTC Debug realmmanager.cpp:189: freeDiameter routing score for candidate 10.112.87.132 is changing from 13 to 12
12-10-2016 18:01:27.850 UTC Debug freeDiameter: GOING TO SEND TO '10.112.87.132': '3GPP/User-Authorization-Request'16777216/300 f:RP-- src:'(nil)' len:20 {C:263/l:8,C:260/l:8,C:277/l:12,C:264/l:8,C:296/l:8,C:293/l:8,C:283/l:8,C:1/l:8,V:10415/C:601/l:12,V:10415/C:600/l:12,V:10415/C:623/l:16}
12-10-2016 18:01:27.850 UTC Debug diameterstack.cpp:908: Processing a sent diameter message
12-10-2016 18:01:27.850 UTC Debug diameterstack.cpp:910: Got existing trail ID: 2630
12-10-2016 18:01:27.850 UTC Debug diameterstack.cpp:969: Raising correlating marker with diameter session ID = cw-aio;1476270305;103
12-10-2016 18:01:27.850 UTC Debug freeDiameter: Sending 292b data on connection {----} TCP,#1236->10.112.87.132(3868)
12-10-2016 18:01:27.857 UTC Debug freeDiameter: 'STATE_OPEN'	<-- 'FDEVP_CNX_MSG_RECV'	(0x7f2ae000b560,228)	'10.112.87.132'
12-10-2016 18:01:27.857 UTC Debug diameterstack.cpp:888: Processing a received diameter message
12-10-2016 18:01:27.857 UTC Debug diameterstack.cpp:901: Got existing trail ID: 2630
12-10-2016 18:01:27.857 UTC Debug diameterstack.cpp:969: Raising correlating marker with diameter session ID = cw-aio;1476270305;103
12-10-2016 18:01:27.857 UTC Debug freeDiameter: Peer timeout reset to 30 seconds (+/- 2)
12-10-2016 18:01:27.857 UTC Debug freeDiameter: '10.112.87.132' in state 'STATE_OPEN' waiting for next event.
12-10-2016 18:01:27.857 UTC Debug freeDiameter: Iterating on rules of AVP: 'Vendor-Specific-Application-Id'.
12-10-2016 18:01:27.857 UTC Debug freeDiameter: Iterating on rules of AVP: 'Experimental-Result'.
12-10-2016 18:01:27.857 UTC Debug freeDiameter: Iterating on rules of COMMAND: '3GPP/User-Authorization-Answer'.
12-10-2016 18:01:27.857 UTC Debug freeDiameter: Calling callback registered when query was sent (0x45c5d0, 0x7f2a6c001f20)
12-10-2016 18:01:27.857 UTC Verbose diameterstack.cpp:1097: Got Diameter response of type 300 - calling callback on transaction 0x7f2a6c001f20
12-10-2016 18:01:27.857 UTC Debug communicationmonitor.cpp:82: Checking communication changes - successful attempts 2, failures 0
12-10-2016 18:01:27.857 UTC Debug diameterstack.cpp:1375: Got Experimental-Result-Code 2002
12-10-2016 18:01:27.857 UTC Debug handlers.cpp:647: Received User-Authorization answer with result 0/2002
12-10-2016 18:01:27.857 UTC Debug handlers.cpp:662: Got Server-Name sip:scscf.cw-aio:5054;transport=TCP
12-10-2016 18:01:27.857 UTC Verbose httpstack.cpp:69: Sending response 200 to request for URL /impi/8310%40open-ims.test/registration-status, args impu=sip%3A8310%40open-ims.test&visited-network=open-ims.test&auth-type=REG
12-10-2016 18:01:27.859 UTC Verbose httpstack.cpp:293: Process request for URL /impi/8310%40open-ims.test/av, args impu=sip%3A8310%40open-ims.test
12-10-2016 18:01:27.859 UTC Debug handlers.cpp:148: Parsed HTTP request: private ID 8310 at open-ims.test, public ID sip:8310 at open-ims.test, scheme Unknown, authorization
12-10-2016 18:01:27.859 UTC Debug handlers.cpp:155: Authentication vector cache query disabled - query HSS
12-10-2016 18:01:27.859 UTC Debug cx.cpp:375: Building Multimedia-Auth request for 8310 at open-ims.test/sip:8310 at open-ims.test
12-10-2016 18:01:27.859 UTC Debug freeDiameter: No Session-Id AVP found in message 0x7f2a6c002070
12-10-2016 18:01:27.859 UTC Verbose diameterstack.cpp:1427: Sending Diameter message of type 303 on transaction 0x7f2a6c002d70 with timeout 200
12-10-2016 18:01:27.859 UTC Debug diameterstack.cpp:397: Routing out callback from freeDiameter
12-10-2016 18:01:27.859 UTC Debug realmmanager.cpp:189: freeDiameter routing score for candidate 10.112.87.132 is changing from 13 to 12
12-10-2016 18:01:27.859 UTC Debug freeDiameter: GOING TO SEND TO '10.112.87.132': '3GPP/Multimedia-Auth-Request'16777216/303 f:RP-- src:'(nil)' len:20 {C:263/l:8,C:260/l:8,C:277/l:12,C:283/l:8,C:293/l:8,C:264/l:8,C:296/l:8,C:1/l:8,V:10415/C:601/l:12,V:10415/C:612/l:12,V:10415/C:607/l:16,V:10415/C:602/l:12}
12-10-2016 18:01:27.859 UTC Debug diameterstack.cpp:908: Processing a sent diameter message
12-10-2016 18:01:27.859 UTC Debug diameterstack.cpp:910: Got existing trail ID: 2631
12-10-2016 18:01:27.859 UTC Debug diameterstack.cpp:969: Raising correlating marker with diameter session ID = cw-aio;1476270305;104
12-10-2016 18:01:27.859 UTC Debug freeDiameter: Sending 344b data on connection {----} TCP,#1236->10.112.87.132(3868)
12-10-2016 18:01:27.864 UTC Debug freeDiameter: 'STATE_OPEN'	<-- 'FDEVP_CNX_MSG_RECV'	(0x7f2ae001e4f0,552)	'10.112.87.132'
12-10-2016 18:01:27.864 UTC Debug diameterstack.cpp:888: Processing a received diameter message
12-10-2016 18:01:27.864 UTC Debug diameterstack.cpp:901: Got existing trail ID: 2631
12-10-2016 18:01:27.864 UTC Debug diameterstack.cpp:969: Raising correlating marker with diameter session ID = cw-aio;1476270305;104
12-10-2016 18:01:27.864 UTC Debug freeDiameter: Peer timeout reset to 30 seconds (+/- 2)
12-10-2016 18:01:27.864 UTC Debug freeDiameter: '10.112.87.132' in state 'STATE_OPEN' waiting for next event.
12-10-2016 18:01:27.864 UTC Status freeDiameter: Unsupported mandatory AVP found
12-10-2016 18:01:27.864 UTC Error freeDiameter: ERROR: in '((parsedict_do_avp(dict, ((struct avp *)(avpch->o)), mandatory, error_info)))' :	Operation not supported
12-10-2016 18:01:27.864 UTC Error freeDiameter: ERROR: in '((parsedict_do_avp(dict, ((struct avp *)(avpch->o)), mandatory, error_info)))' :	Operation not supported
12-10-2016 18:01:27.864 UTC Error freeDiameter: ERROR: in '((fd_msg_parse_dict ( object, dict, error_info )))' :	Operation not supported
12-10-2016 18:01:27.864 UTC Error freeDiameter: Parsing error: 'DIAMETER_AVP_UNSUPPORTED' for the following message received from '<error getting source>':
12-10-2016 18:01:27.864 UTC Error freeDiameter:    '3GPP/Multimedia-Auth-Answer'
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Version: 0x01
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Length: 552
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Flags: 0x40 (-P--)
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Command Code: 303
12-10-2016 18:01:27.864 UTC Error freeDiameter:      ApplicationId: 16777216
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Hop-by-Hop Identifier: 0x512F5AC0
12-10-2016 18:01:27.864 UTC Error freeDiameter:      End-to-End Identifier: 0x8E19124A
12-10-2016 18:01:27.864 UTC Error freeDiameter:       {internal data}: src:10.112.87.132(13) rwb:0x7f2ae001e4f0 rt:1 cb:(nil),(nil)((nil)) qry:0x7f2a6c002070 asso:0 sess:0x7f2a6c0021b0
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Session-Id'(263) l=29 f=-M val="cw-aio;1476270305;104"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Origin-Host'(264) l=25 f=-M val="hss.open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Origin-Realm'(296) l=21 f=-M val="open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Auth-Session-State'(277) l=12 f=-M val='NO_STATE_MAINTAINED' (1 (0x1))
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Vendor-Specific-Application-Id'(260) l=32 f=-M val=(grouped)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'Vendor-Id'(266) l=12 f=-M val=10415 (0x28af)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'Auth-Application-Id'(258) l=12 f=-M val=16777216 (0x1000000)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Public-Identity'(601) vend='3GPP'(10415) l=34 f=VM val="sip:8310 at open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'User-Name'(1) l=26 f=-M val="8310 at open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'SIP-Number-Auth-Items'(607) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'SIP-Auth-Data-Item'(612) vend='3GPP'(10415) l=312 f=VM val=(grouped)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'SIP-Item-Number'(613) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'SIP-Authentication-Scheme'(608) vend='3GPP'(10415) l=27 f=VM val="I"
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 504(not found in dictionary) vend=4491 l=44 f=VM val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 501(not searched in dictionary) vend=13019 l=156 f=VM val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 503(not searched in dictionary) vend=13019 l=56 f=VM val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 268(not searched in dictionary) l=12 f=-M val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Route-Record'(282) l=8 f=-M val="10.112.87.132"
12-10-2016 18:01:27.864 UTC Error freeDiameter: ERROR: in '(fd_msg_parse_or_error( &msgptr, &error ))' :	Bad message
12-10-2016 18:01:27.864 UTC Error freeDiameter: Message discarded ('Received answer failed the dictionary / rules parsing'):
12-10-2016 18:01:27.864 UTC Error freeDiameter:    '3GPP/Multimedia-Auth-Answer'
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Version: 0x01
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Length: 552
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Flags: 0x40 (-P--)
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Command Code: 303
12-10-2016 18:01:27.864 UTC Error freeDiameter:      ApplicationId: 16777216
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Hop-by-Hop Identifier: 0x512F5AC0
12-10-2016 18:01:27.864 UTC Error freeDiameter:      End-to-End Identifier: 0x8E19124A
12-10-2016 18:01:27.864 UTC Error freeDiameter:       {internal data}: src:10.112.87.132(13) rwb:0x7f2ae001e4f0 rt:1 cb:(nil),(nil)((nil)) qry:0x7f2a6c002070 asso:0 sess:0x7f2a6c0021b0
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Session-Id'(263) l=29 f=-M val="cw-aio;1476270305;104"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Origin-Host'(264) l=25 f=-M val="hss.open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Origin-Realm'(296) l=21 f=-M val="open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Auth-Session-State'(277) l=12 f=-M val='NO_STATE_MAINTAINED' (1 (0x1))
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Vendor-Specific-Application-Id'(260) l=32 f=-M val=(grouped)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'Vendor-Id'(266) l=12 f=-M val=10415 (0x28af)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'Auth-Application-Id'(258) l=12 f=-M val=16777216 (0x1000000)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Public-Identity'(601) vend='3GPP'(10415) l=34 f=VM val="sip:8310 at open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'User-Name'(1) l=26 f=-M val="8310 at open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'SIP-Number-Auth-Items'(607) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'SIP-Auth-Data-Item'(612) vend='3GPP'(10415) l=312 f=VM val=(grouped)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'SIP-Item-Number'(613) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'SIP-Authentication-Scheme'(608) vend='3GPP'(10415) l=27 f=VM val="HTTP_DIGEST_MD5"
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 504(not found in dictionary) vend=4491 l=44 f=VM val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 501(not searched in dictionary) vend=13019 l=156 f=VM val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 503(not searched in dictionary) vend=13019 l=56 f=VM val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 268(not searched in dictionary) l=12 f=-M val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Route-Record'(282) l=8 f=-M val="10.112.87.132"
12-10-2016 18:01:28.360 UTC Verbose httpstack.cpp:293: Process request for URL /impi/8310%40open-ims.test/av, args impu=sip%3A8310%40open-ims.test
12-10-2016 18:01:28.360 UTC Debug handlers.cpp:148: Parsed HTTP request: private ID 8310 at open-ims.test, public ID sip:8310 at open-ims.test, scheme Unknown, authorization
12-10-2016 18:01:28.360 UTC Debug handlers.cpp:155: Authentication vector cache query disabled - query HSS
12-10-2016 18:01:28.360 UTC Debug cx.cpp:375: Building Multimedia-Auth request for 8310 at open-ims.test/sip:8310 at open-ims.test
12-10-2016 18:01:28.360 UTC Debug freeDiameter: No Session-Id AVP found in message 0x7f2a6801f0c0
12-10-2016 18:01:28.360 UTC Verbose diameterstack.cpp:1427: Sending Diameter message of type 303 on transaction 0x7f2a68002d50 with timeout 200
12-10-2016 18:01:28.360 UTC Debug diameterstack.cpp:397: Routing out callback from freeDiameter
12-10-2016 18:01:28.360 UTC Debug realmmanager.cpp:189: freeDiameter routing score for candidate 10.112.87.132 is changing from 13 to 12
12-10-2016 18:01:28.360 UTC Debug freeDiameter: GOING TO SEND TO '10.112.87.132': '3GPP/Multimedia-Auth-Request'16777216/303 f:RP-- src:'(nil)' len:20 {C:263/l:8,C:260/l:8,C:277/l:12,C:283/l:8,C:293/l:8,C:264/l:8,C:296/l:8,C:1/l:8,V:10415/C:601/l:12,V:10415/C:612/l:12,V:10415/C:607/l:16,V:10415/C:602/l:12}
12-10-2016 18:01:28.360 UTC Debug diameterstack.cpp:908: Processing a sent diameter message
12-10-2016 18:01:28.360 UTC Debug diameterstack.cpp:910: Got existing trail ID: 2632
12-10-2016 18:01:28.360 UTC Debug diameterstack.cpp:969: Raising correlating marker with diameter session ID = cw-aio;1476270305;105
12-10-2016 18:01:28.360 UTC Debug freeDiameter: Sending 344b data on connection {----} TCP,#1236->10.112.87.132(3868)
12-10-2016 18:01:28.366 UTC Debug freeDiameter: 'STATE_OPEN'	<-- 'FDEVP_CNX_MSG_RECV'	(0x7f2ae001e4f0,552)	'10.112.87.132'
12-10-2016 18:01:28.366 UTC Debug diameterstack.cpp:888: Processing a received diameter message
12-10-2016 18:01:28.366 UTC Debug diameterstack.cpp:901: Got existing trail ID: 2632
12-10-2016 18:01:28.366 UTC Debug diameterstack.cpp:969: Raising correlating marker with diameter session ID = cw-aio;1476270305;105
12-10-2016 18:01:28.366 UTC Debug freeDiameter: Peer timeout reset to 30 seconds (+/- 2)
12-10-2016 18:01:28.366 UTC Debug freeDiameter: '10.112.87.132' in state 'STATE_OPEN' waiting for next event.
12-10-2016 18:01:28.366 UTC Status freeDiameter: Unsupported mandatory AVP found
12-10-2016 18:01:28.366 UTC Error freeDiameter: ERROR: in '((parsedict_do_avp(dict, ((struct avp *)(avpch->o)), mandatory, error_info)))' :	Operation not supported
12-10-2016 18:01:28.366 UTC Error freeDiameter: ERROR: in '((parsedict_do_avp(dict, ((struct avp *)(avpch->o)), mandatory, error_info)))' :	Operation not supported
12-10-2016 18:01:28.366 UTC Error freeDiameter: ERROR: in '((fd_msg_parse_dict ( object, dict, error_info )))' :	Operation not supported
12-10-2016 18:01:28.367 UTC Error freeDiameter: Parsing error: 'DIAMETER_AVP_UNSUPPORTED' for the following message received from '<error getting source>':
12-10-2016 18:01:28.367 UTC Error freeDiameter:    '3GPP/Multimedia-Auth-Answer'
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Version: 0x01
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Length: 552
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Flags: 0x40 (-P--)
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Command Code: 303
12-10-2016 18:01:28.367 UTC Error freeDiameter:      ApplicationId: 16777216
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Hop-by-Hop Identifier: 0x512F5AC1
12-10-2016 18:01:28.367 UTC Error freeDiameter:      End-to-End Identifier: 0x8E19124B
12-10-2016 18:01:28.367 UTC Error freeDiameter:       {internal data}: src:10.112.87.132(13) rwb:0x7f2ae001e4f0 rt:1 cb:(nil),(nil)((nil)) qry:0x7f2a6801f0c0 asso:0 sess:0x7f2a6801f200
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Session-Id'(263) l=29 f=-M val="cw-aio;1476270305;105"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Origin-Host'(264) l=25 f=-M val="hss.open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Origin-Realm'(296) l=21 f=-M val="open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Auth-Session-State'(277) l=12 f=-M val='NO_STATE_MAINTAINED' (1 (0x1))
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Vendor-Specific-Application-Id'(260) l=32 f=-M val=(grouped)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'Vendor-Id'(266) l=12 f=-M val=10415 (0x28af)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'Auth-Application-Id'(258) l=12 f=-M val=16777216 (0x1000000)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Public-Identity'(601) vend='3GPP'(10415) l=34 f=VM val="sip:8310 at open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'User-Name'(1) l=26 f=-M val="8310 at open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'SIP-Number-Auth-Items'(607) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'SIP-Auth-Data-Item'(612) vend='3GPP'(10415) l=312 f=VM val=(grouped)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'SIP-Item-Number'(613) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'SIP-Authentication-Scheme'(608) vend='3GPP'(10415) l=27 f=VM val="HTTP_DIGEST_MD5"
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 504(not found in dictionary) vend=4491 l=44 f=VM val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 501(not searched in dictionary) vend=13019 l=156 f=VM val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 503(not searched in dictionary) vend=13019 l=56 f=VM val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 268(not searched in dictionary) l=12 f=-M val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Route-Record'(282) l=8 f=-M val="10.112.87.132"
12-10-2016 18:01:28.367 UTC Error freeDiameter: ERROR: in '(fd_msg_parse_or_error( &msgptr, &error ))' :	Bad message
12-10-2016 18:01:28.367 UTC Error freeDiameter: Message discarded ('Received answer failed the dictionary / rules parsing'):
12-10-2016 18:01:28.367 UTC Error freeDiameter:    '3GPP/Multimedia-Auth-Answer'
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Version: 0x01
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Length: 552
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Flags: 0x40 (-P--)
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Command Code: 303
12-10-2016 18:01:28.367 UTC Error freeDiameter:      ApplicationId: 16777216
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Hop-by-Hop Identifier: 0x512F5AC1
12-10-2016 18:01:28.367 UTC Error freeDiameter:      End-to-End Identifier: 0x8E19124B
12-10-2016 18:01:28.367 UTC Error freeDiameter:       {internal data}: src:10.112.87.132(13) rwb:0x7f2ae001e4f0 rt:1 cb:(nil),(nil)((nil)) qry:0x7f2a6801f0c0 asso:0 sess:0x7f2a6801f200
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Session-Id'(263) l=29 f=-M val="cw-aio;1476270305;105"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Origin-Host'(264) l=25 f=-M val="hss.open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Origin-Realm'(296) l=21 f=-M val="open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Auth-Session-State'(277) l=12 f=-M val='NO_STATE_MAINTAINED' (1 (0x1))
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Vendor-Specific-Application-Id'(260) l=32 f=-M val=(grouped)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'Vendor-Id'(266) l=12 f=-M val=10415 (0x28af)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'Auth-Application-Id'(258) l=12 f=-M val=16777216 (0x1000000)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Public-Identity'(601) vend='3GPP'(10415) l=34 f=VM val="sip:8310 at open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'User-Name'(1) l=26 f=-M val="8310 at open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'SIP-Number-Auth-Items'(607) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'SIP-Auth-Data-Item'(612) vend='3GPP'(10415) l=312 f=VM val=(grouped)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'SIP-Item-Number'(613) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'SIP-Authentication-Scheme'(608) vend='3GPP'(10415) l=27 f=VM val="HTTP_DIGEST_MD5"
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 504(not found in dictionary) vend=4491 l=44 f=VM val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 501(not searched in dictionary) vend=13019 l=156 f=VM val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 503(not searched in dictionary) vend=13019 l=56 f=VM val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 268(not searched in dictionary) l=12 f=-M val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Route-Record'(282) l=8 f=-M val="10.112.87.132"
12-10-2016 18:01:28.878 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:28.878 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:28.878 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:33.878 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:33.878 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:33.878 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:35.274 UTC Debug alarm.cpp:253: Reraising all alarms with a known state
12-10-2016 18:01:35.274 UTC Debug alarm.cpp:312: AlarmReqAgent: queue overflowed
12-10-2016 18:01:35.274 UTC Status alarm.cpp:62: homestead issued 1502.1 alarm
12-10-2016 18:01:35.274 UTC Debug alarm.cpp:312: AlarmReqAgent: queue overflowed
12-10-2016 18:01:35.274 UTC Status alarm.cpp:62: homestead issued 1501.1 alarm
12-10-2016 18:01:36.734 UTC Verbose httpstack.cpp:293: Process request for URL /ping, args (null)
12-10-2016 18:01:36.734 UTC Verbose httpstack.cpp:69: Sending response 200 to request for URL /ping, args (null)
12-10-2016 18:01:38.878 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:38.878 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:38.878 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:43.878 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:43.878 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:43.878 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:46.782 UTC Verbose httpstack.cpp:293: Process request for URL /ping, args (null)




Message: 1
Date: Wed, 5 Oct 2016 16:03:13 +0000
From: "Eleanor Merry (projectclearwater.org)"
	<eleanor at projectclearwater.org>
To: "clearwater at lists.projectclearwater.org"
	<clearwater at lists.projectclearwater.org>
Subject: Re: [Project Clearwater] Integration of Open HSS_All-in-one
Message-ID:
	<BY2PR02MB208601E0BE02E519E388BE8A9BC40 at BY2PR02MB2086.namprd02.prod.outlook.com>
	
Content-Type: text/plain; charset="us-ascii"

Hi Surender,

To use an external HSS you'll need to set the following settings in /etc/clearwater/shared_config

hss_hostname=<address of your HSS>
hss_realm=<realm your HSS is located in> hss_port=<port of your HSS's Cx interface>

Both hss_hostname and hss_realm are optional. If a realm is configured, homestead will try NAPTR/SRV resolution on the realm to find and connect to (2 by default) diameter peers in the realm.
If a hostname is also configured, this will be used in the Destination-Host field on the diameter messages, so that the messages will be routed to that host.
If just a hostname is configured, homestead will just attempt to create and maintain a single connection to that host.

You can find more information on this at http://clearwater.readthedocs.io/en/latest/External_HSS_Integration.html, and you may also find http://clearwater.readthedocs.io/en/latest/OpenIMSCore_HSS_Integration.html useful.

For your other queries:

1. You can configure subscribers to use an application server that provides these functions by setting their IFCs in the HSS. You can use the MMTel application server built into Clearwater for this - see the details at http://clearwater.readthedocs.io/en/latest/OpenIMSCore_HSS_Integration.html#adding-the-mmtel-application-server for more information.

2. The key restrictions of the all-in-one solutions are:
* hard-coded realm - the all-in-one image uses a hard-coded realm of example.com so your SIP URI might be sip:6505551234 at example.com - by default, SIP uses this realm for routing but example.com won't resolve to your host so you need to configure an outbound proxy on all your SIP clients
* performance - since all software runs on a single virtual machine, performance is significantly lower than even the smallest scale deployment
* scalability - there is no option to scale up and add more virtual machines to boost capacity - for this, you must create a normal deployment
* fault-tolerance - since everything runs on a single virtual machine, if that virtual machine fails, the service as a whole fails.

3. I didn't understand this question. What's the 'other DNS'?

Ellie

From: Clearwater [mailto:clearwater-bounces at lists.projectclearwater.org] On Behalf Of Surender Singh
Sent: 03 October 2016 07:11
To: clearwater at lists.projectclearwater.org
Subject: [Project Clearwater] Integration of Open HSS_All-in-one

Hello,

I deployed the All in one solution in VMware machine .My IN-OUT calls are working to other network using BGCF/IBCF feature .

Now i want Integrate the Open HSS with Homestead node .Can you suggest me where I need to make the entry in aio solution .

I having some below query..


1)      Can we provision the basic supplementary  service (CF Service, Three Party, Call-Transfer , Call park  etc .) in open HSS.

2)      Any other drawbacks of the all-in-one solution apart from Performance /Production.

3)      Can i integrate the other DNS for DNS query .

Regards
Surender Singh








::DISCLAIMER::
----------------------------------------------------------------------------------------------------------------------------------------------------
The contents of this e-mail and any attachment(s) are confidential and intended for the named recipient(s) only.
E-mail transmission is not guaranteed to be secure or error-free as information could be intercepted, corrupted, lost, destroyed, arrive late or incomplete, or may contain viruses in transmission. The e mail and its contents (with or without referred errors) shall therefore not attach any liability on the originator or HCL or its affiliates.
Views or opinions, if any, presented in this email are solely those of the author and may not necessarily reflect the views or opinions of HCL or its affiliates. Any form of reproduction, dissemination, copying, disclosure, modification, distribution and / or publication of this message without the prior written consent of authorized representative of HCL is strictly prohibited. If you have received this email in error please delete it and notify the sender immediately.
Before opening any email and/or attachments, please check them for viruses and other defects.
----------------------------------------------------------------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161005/2ddbd5cf/attachment-0001.html>

------------------------------

Subject: Digest Footer

_______________________________________________
Clearwater mailing list
Clearwater at lists.projectclearwater.org
http://lists.projectclearwater.org/mailman/listinfo/clearwater_lists.projectclearwater.org


------------------------------

End of Clearwater Digest, Vol 42, Issue 4
*****************************************

_______________________________________________
Clearwater mailing list
Clearwater at lists.projectclearwater.org
http://lists.projectclearwater.org/mailman/listinfo/clearwater_lists.projectclearwater.org



------------------------------

Subject: Digest Footer

_______________________________________________
Clearwater mailing list
Clearwater at lists.projectclearwater.org
http://lists.projectclearwater.org/mailman/listinfo/clearwater_lists.projectclearwater.org


------------------------------

End of Clearwater Digest, Vol 42, Issue 9
*****************************************



From Andrew.Edmonds at metaswitch.com  Thu Oct 13 14:53:55 2016
From: Andrew.Edmonds at metaswitch.com (Andrew Edmonds)
Date: Thu, 13 Oct 2016 18:53:55 +0000
Subject: [Project Clearwater] Onix release note
Message-ID: <BLUPR02MB4379D456D31764135E37E6DE5DC0@BLUPR02MB437.namprd02.prod.outlook.com>

The release for Project Clearwater sprint "Onix" has been cut. The code for this release is tagged as release-108 in github.

In this release:


*         We've enhanced clearwater-docker so that storage services are run in their own containers (bringing us closer in line with standard microservice design principles) and ensured that it is now possible to scale Docker deployments up to include clusters of storage nodes.   We've also documented the use of Weave Scope as a convenient tool for visualizing Docker deployments.   See the clearwater-docker README for more information.

*         We've added support for RFC 4169, allowing AKAv2 authentication in VoLTE or VoWiFi networks in addition to our existing AKAv1 support.

*         We've updated our OpenStack Heat templates with the ability to automatically launch and configure a FHoSS (OpenIMS Core HSS) instance as part of an IPv6 Clearwater deployment. This is available as an optional alternative to using Ellis.

This release includes the following bug fixes:


*         Bono doesn't support alias_list configuration option (https://github.com/Metaswitch/sprout/issues/488)

*         Memento is not redundant if one cassandra fails (https://github.com/Metaswitch/memento/issues/3)

*         etcd restarts repeatedly, saying "the member has been permanently removed from the cluster"  (https://github.com/Metaswitch/clearwater-etcd/issues/320)

*         extract database servers to separate containers (https://github.com/Metaswitch/clearwater-docker/issues/4)

As part of this release we are re-working our debian packaging to make our package structure clearer. These changes give us a much clearer view of what each of our components comprises, and how that differs from what runs on a Project Clearwater node. For each node type, there is now a corresponding '-node' package. These are meta-packages which pull in all of the components needed to create a fully functioning Clearwater node of that type.

There are extra instructions specific to this release that you must follow in order to upgrade your Clearwater deployment (this includes both those deployments installed manually and created using Chef) and install the above -node packages:


*         Firstly, upgrade your existing packages to the latest version

o   On each node in your deployment, run `clearwater-upgrade`, and install all updated packages.

*         Install the new meta-packages, to ensure future upgrade compatibility.

o   On your Bono nodes, run `apt-get install bono-node`.

o   On your Sprout nodes, run `apt-get install sprout-node`.  If you have memento on your sprout node, also run `apt-get install memento-node`.

o   On your Homestead nodes, run `apt-get install homestead-node`.

o   On your Homer nodes, run `apt-get install homer-node`.

o   On your Ellis nodes, run `apt-get install ellis-node`.

o   On your Ralf nodes, run `apt-get install ralf-node`.

You should then follow the usual instructions at http://docs.projectclearwater.org/en/stable/Upgrading_a_Clearwater_deployment.html. If you are deploying an all-in-one node, the standard image (http://vm-images.cw-ngv.com/cw-aio.ova) has been updated for this release.

Andrew
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161013/905a1efe/attachment.html>

From richard.whitehouse at projectclearwater.org  Fri Oct 14 05:00:55 2016
From: richard.whitehouse at projectclearwater.org (Richard Whitehouse (projectclearwater.org))
Date: Fri, 14 Oct 2016 09:00:55 +0000
Subject: [Project Clearwater] Integration of Open HSS_All-in-one
In-Reply-To: <16AE9ED83DBA5B4D85B058EAF39C918107E1D72D@NDA-HCLT-MBS05.hclt.corp.hcl.in>
References: <16AE9ED83DBA5B4D85B058EAF39C918107E1D72D@NDA-HCLT-MBS05.hclt.corp.hcl.in>
Message-ID: <BY2PR0201MB1816D379E5C6E268E80A4DB8F0DF0@BY2PR0201MB1816.namprd02.prod.outlook.com>

Surender,

Have you seen the Clearwater docs on IR.92, which is the standard implementing VoLTE?

Of particular note is http://clearwater.readthedocs.io/en/stable/IR.92_Supplementary_Services.html which details which supplementary services Clearwater supports, with respect to the built in application server.

Of particular note is that Ad-Hoc Multi Party Conferencing requires a third party application server - which I think is what you mean by Three Party.

If you want to use Clearwater's built-in MMTel Application Server, you'll need to specify the mmtel component on the subscriber's IFCs as per http://clearwater.readthedocs.io/en/stable/Application_Server_Guide.html#the-built-in-mmtel-application-server

Hope this helps,

Richard 

-----Original Message-----
From: Clearwater [mailto:clearwater-bounces at lists.projectclearwater.org] On Behalf Of Surender Singh
Sent: 13 October 2016 07:38
To: clearwater at lists.projectclearwater.org
Subject: [Project Clearwater] Integration of Open HSS_All-in-one

Hi Ellie,

Thanks for support now it's working fine.

Can you help me on more issue to Provision the supplementary service (Call Fwd, Call Trans,Three Party etc).

Can we now Integrate the VOLTE with Clearwater IMS ?

Regards
Surender


Message: 1
Date: Wed, 12 Oct 2016 18:15:08 +0000
From: Eleanor Merry <Eleanor.Merry at metaswitch.com>
To: "clearwater at lists.projectclearwater.org"
	<clearwater at lists.projectclearwater.org>
Subject: Re: [Project Clearwater] Integration of Open HSS_All-in-one
Message-ID:
	<BL2PR02MB20843688017344C18585F7009BDD0 at BL2PR02MB2084.namprd02.prod.outlook.com>
	
Content-Type: text/plain; charset="us-ascii"

Hi Surender,

It looks like the HSS is sending a malformed MAA, which Homestead is rejecting. Looking at the 'SIP-Authentication-Scheme' AVP though it looks like your subscribers are using HTTP_DIGEST_MD5 authentication. This isn't supported in Project Clearwater; we support SIP Digest authentication and AKA authentication (if you've got clients that can perform AKA authentication as well). For Zoiper, you want to use SIP Digest authentication instead.

Hope this helps,

Ellie

-----Original Message-----
From: Clearwater [mailto:clearwater-bounces at lists.projectclearwater.org] On Behalf Of Surender Singh
Sent: 12 October 2016 13:45
To: clearwater at lists.projectclearwater.org
Subject: Re: [Project Clearwater] Integration of Open HSS_All-in-one

Hi Ellie,

Now I am able to see UAR,MAR message but still getting issue in registering the users. I am using Zoiper client .


Please find below logs at homestead nodes;


12-10-2016 18:01:11.103 UTC Debug freeDiameter: GOING TO SEND TO '10.112.87.132': 'Device-Watchdog-Answer'0/280 f:---- src:'(nil)' len:20 {C:268/l:12,C:264/l:8,C:296/l:8,C:278/l:12}
12-10-2016 18:01:11.103 UTC Debug freeDiameter: Sending 84b data on connection {----} TCP,#1236->10.112.87.132(3868)
12-10-2016 18:01:13.877 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:13.877 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:13.877 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:16.657 UTC Verbose httpstack.cpp:293: Process request for URL /ping, args (null)
12-10-2016 18:01:16.657 UTC Verbose httpstack.cpp:69: Sending response 200 to request for URL /ping, args (null)
12-10-2016 18:01:18.877 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:18.877 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:18.877 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:23.877 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:23.877 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:23.878 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:26.689 UTC Verbose httpstack.cpp:293: Process request for URL /ping, args (null)
12-10-2016 18:01:26.689 UTC Verbose httpstack.cpp:69: Sending response 200 to request for URL /ping, args (null)
12-10-2016 18:01:27.848 UTC Verbose httpstack.cpp:293: Process request for URL /impu/sip%3A8310%40open-ims.test/reg-data, args (null)
12-10-2016 18:01:27.848 UTC Debug handlers.cpp:1080: Parsed HTTP request: private ID , public ID sip:8310 at open-ims.test, server name sip:scscf.cw-aio:5054;transport=TCP
12-10-2016 18:01:27.848 UTC Debug handlers.cpp:1004: Determining request type from '{"reqtype": "call", "server_name": "sip:scscf.cw-aio:5054;transport=TCP"}'
12-10-2016 18:01:27.848 UTC Debug handlers.cpp:1048: New value of _type is 2
12-10-2016 18:01:27.848 UTC Debug handlers.cpp:1118: Try to find IMS Subscription information in the cache
12-10-2016 18:01:27.848 UTC Debug cassandra_store.cpp:284: Getting thread-local Client
12-10-2016 18:01:27.848 UTC Debug cassandra_store.cpp:129: Generated Cassandra timestamp 1476295287848423
12-10-2016 18:01:27.848 UTC Debug cache.cpp:347: Issuing get for key sip:8310 at open-ims.test
12-10-2016 18:01:27.848 UTC Debug cassandra_store.cpp:755: Failed TWO read for get_row. Try ONE
12-10-2016 18:01:27.849 UTC Debug cache.cpp:367: Retrieved XML column with TTL 1014 and value <?xml version="1.0" encoding="UTF-8"?><IMSSubscription><PrivateID>null</PrivateID><ServiceProfile><PublicIdentity><Identity>sip:8310 at open-ims.test</Identity><Extension><IdentityType>0</IdentityType><Extension><DisplayName>8310</DisplayName></Extension></Extension></PublicIdentity><InitialFilterCriteria><Priority>0</Priority><TriggerPoint><ConditionTypeCNF>1</ConditionTypeCNF><SPT><ConditionNegated>0</ConditionNegated><Group>0</Group><RequestURI>INVITE</RequestURI><Extension></Extension></SPT></TriggerPoint><ApplicationServer><ServerName>sip:mmtel.open-ims.test</ServerName><DefaultHandling>0</DefaultHandling></ApplicationServer></InitialFilterCriteria></ServiceProfile></IMSSubscription>
12-10-2016 18:01:27.849 UTC Debug cache.cpp:408: Retrived primary_ccf column with value pri_ccf_address
12-10-2016 18:01:27.849 UTC Debug cache.cpp:435: Found stored XML for subscriber, treating as UNREGISTERED state
12-10-2016 18:01:27.849 UTC Debug communicationmonitor.cpp:82: Checking communication changes - successful attempts 2, failures 0
12-10-2016 18:01:27.849 UTC Debug handlers.cpp:1147: Got IMS subscription from cache
12-10-2016 18:01:27.849 UTC Debug handlers.cpp:1162: TTL for this database record is 0, IMS Subscription XML is not empty, registration state is UNREGISTERED, and the charging addresses are Primary CCF: pri_ccf_address
12-10-2016 18:01:27.849 UTC Debug handlers.cpp:1272: Handling call
12-10-2016 18:01:27.849 UTC Debug handlers.cpp:1469: Sending 200 response (body was {"reqtype": "call", "server_name": "sip:scscf.cw-aio:5054;transport=TCP"})
12-10-2016 18:01:27.849 UTC Verbose httpstack.cpp:69: Sending response 200 to request for URL /impu/sip%3A8310%40open-ims.test/reg-data, args (null)
12-10-2016 18:01:27.850 UTC Verbose httpstack.cpp:293: Process request for URL /impi/8310%40open-ims.test/registration-status, args impu=sip%3A8310%40open-ims.test&visited-network=open-ims.test&auth-type=REG
12-10-2016 18:01:27.850 UTC Debug handlers.cpp:591: Parsed HTTP request: private ID 8310 at open-ims.test, public ID sip:8310 at open-ims.test, visited network open-ims.test, authorization type REG
12-10-2016 18:01:27.850 UTC Debug cx.cpp:109: Building User-Authorization request for 8310 at open-ims.test/sip:8310 at open-ims.test
12-10-2016 18:01:27.850 UTC Debug freeDiameter: No Session-Id AVP found in message 0x7f2a6c002140
12-10-2016 18:01:27.850 UTC Verbose diameterstack.cpp:1427: Sending Diameter message of type 300 on transaction 0x7f2a6c001f20 with timeout 200
12-10-2016 18:01:27.850 UTC Debug diameterstack.cpp:397: Routing out callback from freeDiameter
12-10-2016 18:01:27.850 UTC Debug realmmanager.cpp:189: freeDiameter routing score for candidate 10.112.87.132 is changing from 13 to 12
12-10-2016 18:01:27.850 UTC Debug freeDiameter: GOING TO SEND TO '10.112.87.132': '3GPP/User-Authorization-Request'16777216/300 f:RP-- src:'(nil)' len:20 {C:263/l:8,C:260/l:8,C:277/l:12,C:264/l:8,C:296/l:8,C:293/l:8,C:283/l:8,C:1/l:8,V:10415/C:601/l:12,V:10415/C:600/l:12,V:10415/C:623/l:16}
12-10-2016 18:01:27.850 UTC Debug diameterstack.cpp:908: Processing a sent diameter message
12-10-2016 18:01:27.850 UTC Debug diameterstack.cpp:910: Got existing trail ID: 2630
12-10-2016 18:01:27.850 UTC Debug diameterstack.cpp:969: Raising correlating marker with diameter session ID = cw-aio;1476270305;103
12-10-2016 18:01:27.850 UTC Debug freeDiameter: Sending 292b data on connection {----} TCP,#1236->10.112.87.132(3868)
12-10-2016 18:01:27.857 UTC Debug freeDiameter: 'STATE_OPEN'	<-- 'FDEVP_CNX_MSG_RECV'	(0x7f2ae000b560,228)	'10.112.87.132'
12-10-2016 18:01:27.857 UTC Debug diameterstack.cpp:888: Processing a received diameter message
12-10-2016 18:01:27.857 UTC Debug diameterstack.cpp:901: Got existing trail ID: 2630
12-10-2016 18:01:27.857 UTC Debug diameterstack.cpp:969: Raising correlating marker with diameter session ID = cw-aio;1476270305;103
12-10-2016 18:01:27.857 UTC Debug freeDiameter: Peer timeout reset to 30 seconds (+/- 2)
12-10-2016 18:01:27.857 UTC Debug freeDiameter: '10.112.87.132' in state 'STATE_OPEN' waiting for next event.
12-10-2016 18:01:27.857 UTC Debug freeDiameter: Iterating on rules of AVP: 'Vendor-Specific-Application-Id'.
12-10-2016 18:01:27.857 UTC Debug freeDiameter: Iterating on rules of AVP: 'Experimental-Result'.
12-10-2016 18:01:27.857 UTC Debug freeDiameter: Iterating on rules of COMMAND: '3GPP/User-Authorization-Answer'.
12-10-2016 18:01:27.857 UTC Debug freeDiameter: Calling callback registered when query was sent (0x45c5d0, 0x7f2a6c001f20)
12-10-2016 18:01:27.857 UTC Verbose diameterstack.cpp:1097: Got Diameter response of type 300 - calling callback on transaction 0x7f2a6c001f20
12-10-2016 18:01:27.857 UTC Debug communicationmonitor.cpp:82: Checking communication changes - successful attempts 2, failures 0
12-10-2016 18:01:27.857 UTC Debug diameterstack.cpp:1375: Got Experimental-Result-Code 2002
12-10-2016 18:01:27.857 UTC Debug handlers.cpp:647: Received User-Authorization answer with result 0/2002
12-10-2016 18:01:27.857 UTC Debug handlers.cpp:662: Got Server-Name sip:scscf.cw-aio:5054;transport=TCP
12-10-2016 18:01:27.857 UTC Verbose httpstack.cpp:69: Sending response 200 to request for URL /impi/8310%40open-ims.test/registration-status, args impu=sip%3A8310%40open-ims.test&visited-network=open-ims.test&auth-type=REG
12-10-2016 18:01:27.859 UTC Verbose httpstack.cpp:293: Process request for URL /impi/8310%40open-ims.test/av, args impu=sip%3A8310%40open-ims.test
12-10-2016 18:01:27.859 UTC Debug handlers.cpp:148: Parsed HTTP request: private ID 8310 at open-ims.test, public ID sip:8310 at open-ims.test, scheme Unknown, authorization
12-10-2016 18:01:27.859 UTC Debug handlers.cpp:155: Authentication vector cache query disabled - query HSS
12-10-2016 18:01:27.859 UTC Debug cx.cpp:375: Building Multimedia-Auth request for 8310 at open-ims.test/sip:8310 at open-ims.test
12-10-2016 18:01:27.859 UTC Debug freeDiameter: No Session-Id AVP found in message 0x7f2a6c002070
12-10-2016 18:01:27.859 UTC Verbose diameterstack.cpp:1427: Sending Diameter message of type 303 on transaction 0x7f2a6c002d70 with timeout 200
12-10-2016 18:01:27.859 UTC Debug diameterstack.cpp:397: Routing out callback from freeDiameter
12-10-2016 18:01:27.859 UTC Debug realmmanager.cpp:189: freeDiameter routing score for candidate 10.112.87.132 is changing from 13 to 12
12-10-2016 18:01:27.859 UTC Debug freeDiameter: GOING TO SEND TO '10.112.87.132': '3GPP/Multimedia-Auth-Request'16777216/303 f:RP-- src:'(nil)' len:20 {C:263/l:8,C:260/l:8,C:277/l:12,C:283/l:8,C:293/l:8,C:264/l:8,C:296/l:8,C:1/l:8,V:10415/C:601/l:12,V:10415/C:612/l:12,V:10415/C:607/l:16,V:10415/C:602/l:12}
12-10-2016 18:01:27.859 UTC Debug diameterstack.cpp:908: Processing a sent diameter message
12-10-2016 18:01:27.859 UTC Debug diameterstack.cpp:910: Got existing trail ID: 2631
12-10-2016 18:01:27.859 UTC Debug diameterstack.cpp:969: Raising correlating marker with diameter session ID = cw-aio;1476270305;104
12-10-2016 18:01:27.859 UTC Debug freeDiameter: Sending 344b data on connection {----} TCP,#1236->10.112.87.132(3868)
12-10-2016 18:01:27.864 UTC Debug freeDiameter: 'STATE_OPEN'	<-- 'FDEVP_CNX_MSG_RECV'	(0x7f2ae001e4f0,552)	'10.112.87.132'
12-10-2016 18:01:27.864 UTC Debug diameterstack.cpp:888: Processing a received diameter message
12-10-2016 18:01:27.864 UTC Debug diameterstack.cpp:901: Got existing trail ID: 2631
12-10-2016 18:01:27.864 UTC Debug diameterstack.cpp:969: Raising correlating marker with diameter session ID = cw-aio;1476270305;104
12-10-2016 18:01:27.864 UTC Debug freeDiameter: Peer timeout reset to 30 seconds (+/- 2)
12-10-2016 18:01:27.864 UTC Debug freeDiameter: '10.112.87.132' in state 'STATE_OPEN' waiting for next event.
12-10-2016 18:01:27.864 UTC Status freeDiameter: Unsupported mandatory AVP found
12-10-2016 18:01:27.864 UTC Error freeDiameter: ERROR: in '((parsedict_do_avp(dict, ((struct avp *)(avpch->o)), mandatory, error_info)))' :	Operation not supported
12-10-2016 18:01:27.864 UTC Error freeDiameter: ERROR: in '((parsedict_do_avp(dict, ((struct avp *)(avpch->o)), mandatory, error_info)))' :	Operation not supported
12-10-2016 18:01:27.864 UTC Error freeDiameter: ERROR: in '((fd_msg_parse_dict ( object, dict, error_info )))' :	Operation not supported
12-10-2016 18:01:27.864 UTC Error freeDiameter: Parsing error: 'DIAMETER_AVP_UNSUPPORTED' for the following message received from '<error getting source>':
12-10-2016 18:01:27.864 UTC Error freeDiameter:    '3GPP/Multimedia-Auth-Answer'
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Version: 0x01
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Length: 552
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Flags: 0x40 (-P--)
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Command Code: 303
12-10-2016 18:01:27.864 UTC Error freeDiameter:      ApplicationId: 16777216
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Hop-by-Hop Identifier: 0x512F5AC0
12-10-2016 18:01:27.864 UTC Error freeDiameter:      End-to-End Identifier: 0x8E19124A
12-10-2016 18:01:27.864 UTC Error freeDiameter:       {internal data}: src:10.112.87.132(13) rwb:0x7f2ae001e4f0 rt:1 cb:(nil),(nil)((nil)) qry:0x7f2a6c002070 asso:0 sess:0x7f2a6c0021b0
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Session-Id'(263) l=29 f=-M val="cw-aio;1476270305;104"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Origin-Host'(264) l=25 f=-M val="hss.open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Origin-Realm'(296) l=21 f=-M val="open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Auth-Session-State'(277) l=12 f=-M val='NO_STATE_MAINTAINED' (1 (0x1))
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Vendor-Specific-Application-Id'(260) l=32 f=-M val=(grouped)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'Vendor-Id'(266) l=12 f=-M val=10415 (0x28af)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'Auth-Application-Id'(258) l=12 f=-M val=16777216 (0x1000000)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Public-Identity'(601) vend='3GPP'(10415) l=34 f=VM val="sip:8310 at open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'User-Name'(1) l=26 f=-M val="8310 at open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'SIP-Number-Auth-Items'(607) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'SIP-Auth-Data-Item'(612) vend='3GPP'(10415) l=312 f=VM val=(grouped)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'SIP-Item-Number'(613) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'SIP-Authentication-Scheme'(608) vend='3GPP'(10415) l=27 f=VM val="I"
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 504(not found in dictionary) vend=4491 l=44 f=VM val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 501(not searched in dictionary) vend=13019 l=156 f=VM val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 503(not searched in dictionary) vend=13019 l=56 f=VM val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 268(not searched in dictionary) l=12 f=-M val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Route-Record'(282) l=8 f=-M val="10.112.87.132"
12-10-2016 18:01:27.864 UTC Error freeDiameter: ERROR: in '(fd_msg_parse_or_error( &msgptr, &error ))' :	Bad message
12-10-2016 18:01:27.864 UTC Error freeDiameter: Message discarded ('Received answer failed the dictionary / rules parsing'):
12-10-2016 18:01:27.864 UTC Error freeDiameter:    '3GPP/Multimedia-Auth-Answer'
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Version: 0x01
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Length: 552
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Flags: 0x40 (-P--)
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Command Code: 303
12-10-2016 18:01:27.864 UTC Error freeDiameter:      ApplicationId: 16777216
12-10-2016 18:01:27.864 UTC Error freeDiameter:      Hop-by-Hop Identifier: 0x512F5AC0
12-10-2016 18:01:27.864 UTC Error freeDiameter:      End-to-End Identifier: 0x8E19124A
12-10-2016 18:01:27.864 UTC Error freeDiameter:       {internal data}: src:10.112.87.132(13) rwb:0x7f2ae001e4f0 rt:1 cb:(nil),(nil)((nil)) qry:0x7f2a6c002070 asso:0 sess:0x7f2a6c0021b0
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Session-Id'(263) l=29 f=-M val="cw-aio;1476270305;104"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Origin-Host'(264) l=25 f=-M val="hss.open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Origin-Realm'(296) l=21 f=-M val="open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Auth-Session-State'(277) l=12 f=-M val='NO_STATE_MAINTAINED' (1 (0x1))
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Vendor-Specific-Application-Id'(260) l=32 f=-M val=(grouped)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'Vendor-Id'(266) l=12 f=-M val=10415 (0x28af)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'Auth-Application-Id'(258) l=12 f=-M val=16777216 (0x1000000)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Public-Identity'(601) vend='3GPP'(10415) l=34 f=VM val="sip:8310 at open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'User-Name'(1) l=26 f=-M val="8310 at open-ims.test"
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'SIP-Number-Auth-Items'(607) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'SIP-Auth-Data-Item'(612) vend='3GPP'(10415) l=312 f=VM val=(grouped)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'SIP-Item-Number'(613) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 'SIP-Authentication-Scheme'(608) vend='3GPP'(10415) l=27 f=VM val="HTTP_DIGEST_MD5"
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 504(not found in dictionary) vend=4491 l=44 f=VM val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 501(not searched in dictionary) vend=13019 l=156 f=VM val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:          AVP: 503(not searched in dictionary) vend=13019 l=56 f=VM val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 268(not searched in dictionary) l=12 f=-M val=(not set)
12-10-2016 18:01:27.864 UTC Error freeDiameter:       AVP: 'Route-Record'(282) l=8 f=-M val="10.112.87.132"
12-10-2016 18:01:28.360 UTC Verbose httpstack.cpp:293: Process request for URL /impi/8310%40open-ims.test/av, args impu=sip%3A8310%40open-ims.test
12-10-2016 18:01:28.360 UTC Debug handlers.cpp:148: Parsed HTTP request: private ID 8310 at open-ims.test, public ID sip:8310 at open-ims.test, scheme Unknown, authorization
12-10-2016 18:01:28.360 UTC Debug handlers.cpp:155: Authentication vector cache query disabled - query HSS
12-10-2016 18:01:28.360 UTC Debug cx.cpp:375: Building Multimedia-Auth request for 8310 at open-ims.test/sip:8310 at open-ims.test
12-10-2016 18:01:28.360 UTC Debug freeDiameter: No Session-Id AVP found in message 0x7f2a6801f0c0
12-10-2016 18:01:28.360 UTC Verbose diameterstack.cpp:1427: Sending Diameter message of type 303 on transaction 0x7f2a68002d50 with timeout 200
12-10-2016 18:01:28.360 UTC Debug diameterstack.cpp:397: Routing out callback from freeDiameter
12-10-2016 18:01:28.360 UTC Debug realmmanager.cpp:189: freeDiameter routing score for candidate 10.112.87.132 is changing from 13 to 12
12-10-2016 18:01:28.360 UTC Debug freeDiameter: GOING TO SEND TO '10.112.87.132': '3GPP/Multimedia-Auth-Request'16777216/303 f:RP-- src:'(nil)' len:20 {C:263/l:8,C:260/l:8,C:277/l:12,C:283/l:8,C:293/l:8,C:264/l:8,C:296/l:8,C:1/l:8,V:10415/C:601/l:12,V:10415/C:612/l:12,V:10415/C:607/l:16,V:10415/C:602/l:12}
12-10-2016 18:01:28.360 UTC Debug diameterstack.cpp:908: Processing a sent diameter message
12-10-2016 18:01:28.360 UTC Debug diameterstack.cpp:910: Got existing trail ID: 2632
12-10-2016 18:01:28.360 UTC Debug diameterstack.cpp:969: Raising correlating marker with diameter session ID = cw-aio;1476270305;105
12-10-2016 18:01:28.360 UTC Debug freeDiameter: Sending 344b data on connection {----} TCP,#1236->10.112.87.132(3868)
12-10-2016 18:01:28.366 UTC Debug freeDiameter: 'STATE_OPEN'	<-- 'FDEVP_CNX_MSG_RECV'	(0x7f2ae001e4f0,552)	'10.112.87.132'
12-10-2016 18:01:28.366 UTC Debug diameterstack.cpp:888: Processing a received diameter message
12-10-2016 18:01:28.366 UTC Debug diameterstack.cpp:901: Got existing trail ID: 2632
12-10-2016 18:01:28.366 UTC Debug diameterstack.cpp:969: Raising correlating marker with diameter session ID = cw-aio;1476270305;105
12-10-2016 18:01:28.366 UTC Debug freeDiameter: Peer timeout reset to 30 seconds (+/- 2)
12-10-2016 18:01:28.366 UTC Debug freeDiameter: '10.112.87.132' in state 'STATE_OPEN' waiting for next event.
12-10-2016 18:01:28.366 UTC Status freeDiameter: Unsupported mandatory AVP found
12-10-2016 18:01:28.366 UTC Error freeDiameter: ERROR: in '((parsedict_do_avp(dict, ((struct avp *)(avpch->o)), mandatory, error_info)))' :	Operation not supported
12-10-2016 18:01:28.366 UTC Error freeDiameter: ERROR: in '((parsedict_do_avp(dict, ((struct avp *)(avpch->o)), mandatory, error_info)))' :	Operation not supported
12-10-2016 18:01:28.366 UTC Error freeDiameter: ERROR: in '((fd_msg_parse_dict ( object, dict, error_info )))' :	Operation not supported
12-10-2016 18:01:28.367 UTC Error freeDiameter: Parsing error: 'DIAMETER_AVP_UNSUPPORTED' for the following message received from '<error getting source>':
12-10-2016 18:01:28.367 UTC Error freeDiameter:    '3GPP/Multimedia-Auth-Answer'
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Version: 0x01
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Length: 552
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Flags: 0x40 (-P--)
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Command Code: 303
12-10-2016 18:01:28.367 UTC Error freeDiameter:      ApplicationId: 16777216
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Hop-by-Hop Identifier: 0x512F5AC1
12-10-2016 18:01:28.367 UTC Error freeDiameter:      End-to-End Identifier: 0x8E19124B
12-10-2016 18:01:28.367 UTC Error freeDiameter:       {internal data}: src:10.112.87.132(13) rwb:0x7f2ae001e4f0 rt:1 cb:(nil),(nil)((nil)) qry:0x7f2a6801f0c0 asso:0 sess:0x7f2a6801f200
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Session-Id'(263) l=29 f=-M val="cw-aio;1476270305;105"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Origin-Host'(264) l=25 f=-M val="hss.open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Origin-Realm'(296) l=21 f=-M val="open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Auth-Session-State'(277) l=12 f=-M val='NO_STATE_MAINTAINED' (1 (0x1))
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Vendor-Specific-Application-Id'(260) l=32 f=-M val=(grouped)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'Vendor-Id'(266) l=12 f=-M val=10415 (0x28af)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'Auth-Application-Id'(258) l=12 f=-M val=16777216 (0x1000000)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Public-Identity'(601) vend='3GPP'(10415) l=34 f=VM val="sip:8310 at open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'User-Name'(1) l=26 f=-M val="8310 at open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'SIP-Number-Auth-Items'(607) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'SIP-Auth-Data-Item'(612) vend='3GPP'(10415) l=312 f=VM val=(grouped)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'SIP-Item-Number'(613) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'SIP-Authentication-Scheme'(608) vend='3GPP'(10415) l=27 f=VM val="HTTP_DIGEST_MD5"
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 504(not found in dictionary) vend=4491 l=44 f=VM val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 501(not searched in dictionary) vend=13019 l=156 f=VM val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 503(not searched in dictionary) vend=13019 l=56 f=VM val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 268(not searched in dictionary) l=12 f=-M val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Route-Record'(282) l=8 f=-M val="10.112.87.132"
12-10-2016 18:01:28.367 UTC Error freeDiameter: ERROR: in '(fd_msg_parse_or_error( &msgptr, &error ))' :	Bad message
12-10-2016 18:01:28.367 UTC Error freeDiameter: Message discarded ('Received answer failed the dictionary / rules parsing'):
12-10-2016 18:01:28.367 UTC Error freeDiameter:    '3GPP/Multimedia-Auth-Answer'
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Version: 0x01
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Length: 552
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Flags: 0x40 (-P--)
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Command Code: 303
12-10-2016 18:01:28.367 UTC Error freeDiameter:      ApplicationId: 16777216
12-10-2016 18:01:28.367 UTC Error freeDiameter:      Hop-by-Hop Identifier: 0x512F5AC1
12-10-2016 18:01:28.367 UTC Error freeDiameter:      End-to-End Identifier: 0x8E19124B
12-10-2016 18:01:28.367 UTC Error freeDiameter:       {internal data}: src:10.112.87.132(13) rwb:0x7f2ae001e4f0 rt:1 cb:(nil),(nil)((nil)) qry:0x7f2a6801f0c0 asso:0 sess:0x7f2a6801f200
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Session-Id'(263) l=29 f=-M val="cw-aio;1476270305;105"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Origin-Host'(264) l=25 f=-M val="hss.open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Origin-Realm'(296) l=21 f=-M val="open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Auth-Session-State'(277) l=12 f=-M val='NO_STATE_MAINTAINED' (1 (0x1))
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Vendor-Specific-Application-Id'(260) l=32 f=-M val=(grouped)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'Vendor-Id'(266) l=12 f=-M val=10415 (0x28af)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'Auth-Application-Id'(258) l=12 f=-M val=16777216 (0x1000000)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Public-Identity'(601) vend='3GPP'(10415) l=34 f=VM val="sip:8310 at open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'User-Name'(1) l=26 f=-M val="8310 at open-ims.test"
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'SIP-Number-Auth-Items'(607) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'SIP-Auth-Data-Item'(612) vend='3GPP'(10415) l=312 f=VM val=(grouped)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'SIP-Item-Number'(613) vend='3GPP'(10415) l=16 f=VM val=1 (0x1)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 'SIP-Authentication-Scheme'(608) vend='3GPP'(10415) l=27 f=VM val="HTTP_DIGEST_MD5"
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 504(not found in dictionary) vend=4491 l=44 f=VM val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 501(not searched in dictionary) vend=13019 l=156 f=VM val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:          AVP: 503(not searched in dictionary) vend=13019 l=56 f=VM val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 268(not searched in dictionary) l=12 f=-M val=(not set)
12-10-2016 18:01:28.367 UTC Error freeDiameter:       AVP: 'Route-Record'(282) l=8 f=-M val="10.112.87.132"
12-10-2016 18:01:28.878 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:28.878 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:28.878 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:33.878 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:33.878 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:33.878 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:35.274 UTC Debug alarm.cpp:253: Reraising all alarms with a known state
12-10-2016 18:01:35.274 UTC Debug alarm.cpp:312: AlarmReqAgent: queue overflowed
12-10-2016 18:01:35.274 UTC Status alarm.cpp:62: homestead issued 1502.1 alarm
12-10-2016 18:01:35.274 UTC Debug alarm.cpp:312: AlarmReqAgent: queue overflowed
12-10-2016 18:01:35.274 UTC Status alarm.cpp:62: homestead issued 1501.1 alarm
12-10-2016 18:01:36.734 UTC Verbose httpstack.cpp:293: Process request for URL /ping, args (null)
12-10-2016 18:01:36.734 UTC Verbose httpstack.cpp:69: Sending response 200 to request for URL /ping, args (null)
12-10-2016 18:01:38.878 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:38.878 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:38.878 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:43.878 UTC Debug diameterresolver.cpp:91: DiameterResolver::resolve for realm , host 10.112.87.132, family 2
12-10-2016 18:01:43.878 UTC Debug baseresolver.cpp:523: Attempt to parse 10.112.87.132 as IP address
12-10-2016 18:01:43.878 UTC Debug diameterresolver.cpp:175: Target is an IP address - default port/transport
12-10-2016 18:01:46.782 UTC Verbose httpstack.cpp:293: Process request for URL /ping, args (null)




Message: 1
Date: Wed, 5 Oct 2016 16:03:13 +0000
From: "Eleanor Merry (projectclearwater.org)"
	<eleanor at projectclearwater.org>
To: "clearwater at lists.projectclearwater.org"
	<clearwater at lists.projectclearwater.org>
Subject: Re: [Project Clearwater] Integration of Open HSS_All-in-one
Message-ID:
	<BY2PR02MB208601E0BE02E519E388BE8A9BC40 at BY2PR02MB2086.namprd02.prod.outlook.com>
	
Content-Type: text/plain; charset="us-ascii"

Hi Surender,

To use an external HSS you'll need to set the following settings in /etc/clearwater/shared_config

hss_hostname=<address of your HSS>
hss_realm=<realm your HSS is located in> hss_port=<port of your HSS's Cx interface>

Both hss_hostname and hss_realm are optional. If a realm is configured, homestead will try NAPTR/SRV resolution on the realm to find and connect to (2 by default) diameter peers in the realm.
If a hostname is also configured, this will be used in the Destination-Host field on the diameter messages, so that the messages will be routed to that host.
If just a hostname is configured, homestead will just attempt to create and maintain a single connection to that host.

You can find more information on this at http://clearwater.readthedocs.io/en/latest/External_HSS_Integration.html, and you may also find http://clearwater.readthedocs.io/en/latest/OpenIMSCore_HSS_Integration.html useful.

For your other queries:

1. You can configure subscribers to use an application server that provides these functions by setting their IFCs in the HSS. You can use the MMTel application server built into Clearwater for this - see the details at http://clearwater.readthedocs.io/en/latest/OpenIMSCore_HSS_Integration.html#adding-the-mmtel-application-server for more information.

2. The key restrictions of the all-in-one solutions are:
* hard-coded realm - the all-in-one image uses a hard-coded realm of example.com so your SIP URI might be sip:6505551234 at example.com - by default, SIP uses this realm for routing but example.com won't resolve to your host so you need to configure an outbound proxy on all your SIP clients
* performance - since all software runs on a single virtual machine, performance is significantly lower than even the smallest scale deployment
* scalability - there is no option to scale up and add more virtual machines to boost capacity - for this, you must create a normal deployment
* fault-tolerance - since everything runs on a single virtual machine, if that virtual machine fails, the service as a whole fails.

3. I didn't understand this question. What's the 'other DNS'?

Ellie

From: Clearwater [mailto:clearwater-bounces at lists.projectclearwater.org] On Behalf Of Surender Singh
Sent: 03 October 2016 07:11
To: clearwater at lists.projectclearwater.org
Subject: [Project Clearwater] Integration of Open HSS_All-in-one

Hello,

I deployed the All in one solution in VMware machine .My IN-OUT calls are working to other network using BGCF/IBCF feature .

Now i want Integrate the Open HSS with Homestead node .Can you suggest me where I need to make the entry in aio solution .

I having some below query..


1)      Can we provision the basic supplementary  service (CF Service, Three Party, Call-Transfer , Call park  etc .) in open HSS.

2)      Any other drawbacks of the all-in-one solution apart from Performance /Production.

3)      Can i integrate the other DNS for DNS query .

Regards
Surender Singh








::DISCLAIMER::
----------------------------------------------------------------------------------------------------------------------------------------------------
The contents of this e-mail and any attachment(s) are confidential and intended for the named recipient(s) only.
E-mail transmission is not guaranteed to be secure or error-free as information could be intercepted, corrupted, lost, destroyed, arrive late or incomplete, or may contain viruses in transmission. The e mail and its contents (with or without referred errors) shall therefore not attach any liability on the originator or HCL or its affiliates.
Views or opinions, if any, presented in this email are solely those of the author and may not necessarily reflect the views or opinions of HCL or its affiliates. Any form of reproduction, dissemination, copying, disclosure, modification, distribution and / or publication of this message without the prior written consent of authorized representative of HCL is strictly prohibited. If you have received this email in error please delete it and notify the sender immediately.
Before opening any email and/or attachments, please check them for viruses and other defects.
----------------------------------------------------------------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161005/2ddbd5cf/attachment-0001.html>

------------------------------

Subject: Digest Footer

_______________________________________________
Clearwater mailing list
Clearwater at lists.projectclearwater.org
http://lists.projectclearwater.org/mailman/listinfo/clearwater_lists.projectclearwater.org


------------------------------

End of Clearwater Digest, Vol 42, Issue 4
*****************************************

_______________________________________________
Clearwater mailing list
Clearwater at lists.projectclearwater.org
http://lists.projectclearwater.org/mailman/listinfo/clearwater_lists.projectclearwater.org



------------------------------

Subject: Digest Footer

_______________________________________________
Clearwater mailing list
Clearwater at lists.projectclearwater.org
http://lists.projectclearwater.org/mailman/listinfo/clearwater_lists.projectclearwater.org


------------------------------

End of Clearwater Digest, Vol 42, Issue 9
*****************************************

_______________________________________________
Clearwater mailing list
Clearwater at lists.projectclearwater.org
http://lists.projectclearwater.org/mailman/listinfo/clearwater_lists.projectclearwater.org



From Richard.Whitehouse at metaswitch.com  Fri Oct 14 05:36:25 2016
From: Richard.Whitehouse at metaswitch.com (Richard Whitehouse)
Date: Fri, 14 Oct 2016 09:36:25 +0000
Subject: [Project Clearwater] Installation support
In-Reply-To: <CAM2_mL5CerFJLsS6uqw4ONenXZzmiH5kO6D+wArNGT4n+X6dXQ@mail.gmail.com>
References: <CAM2_mL5CerFJLsS6uqw4ONenXZzmiH5kO6D+wArNGT4n+X6dXQ@mail.gmail.com>
Message-ID: <BY2PR0201MB18169D86A72A58A9B1C50E80F0DF0@BY2PR0201MB1816.namprd02.prod.outlook.com>

Adinan,

From your problem description, we think you may be hitting https://github.com/Metaswitch/clearwater-etcd/issues/320 which we?ve fixed in the latest release, Onix, release 108.

This can cause the etcd cluster to lose quorum and thus prevent it starting up correctly.

If this is the case, you?ve got two options:

1) You can delete your existing installation, and install release-108 instead. That?s probably the simplest solution, but you?ll lose all of your rdata.

2) Alternatively, you can upgrade your nodes to release-108, and then restore the cluster. As it?s lost quorum, you?ll need to follow the instructions for multiple node recovery, which are documented in the docs at http://clearwater.readthedocs.io/en/stable/Handling_Failed_Nodes.html#multiple-failed-nodes


Hope this helps,


Richard

From: Clearwater [mailto:clearwater-bounces at lists.projectclearwater.org] On Behalf Of Adinan Sousa
Sent: 08 October 2016 00:56
To: clearwater at lists.projectclearwater.org
Subject: [Project Clearwater] Installation support

Hello,

  I am trying to install Clearwater project (manual) by following the steps from  http://clearwater.readthedocs.io/en/stable/Manual_Install.html, but
I am facing the following problem, then could you please support me on that:


On each machine was defined the local_config file as described on the tutorial as example depicts below:

[Imagem inline 1]

and installed the specif software for each node, but when given the command sudo clearwater-etcdctl cluster-health I got the following error message for the node ellis, homer, homestead and Ralf, considering the respective IPs on the error. It is possible to ping between the nodes.

[Imagem inline 2]

When given the command sudo monit summary for ellis, I have seen that etcd_process does not exist.

[Imagem inline 3]

in the case of homer, the homer process failed.

[Imagem inline 4]


Thanks in advance,
Adinan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161014/3705a995/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 16061 bytes
Desc: image001.png
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161014/3705a995/attachment.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 24230 bytes
Desc: image002.png
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161014/3705a995/attachment-0001.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 99101 bytes
Desc: image003.png
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161014/3705a995/attachment-0002.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 107260 bytes
Desc: image004.png
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161014/3705a995/attachment-0003.png>

From rodrigo.moreira206 at gmail.com  Mon Oct 17 15:07:53 2016
From: rodrigo.moreira206 at gmail.com (Rodrigo Moreira)
Date: Mon, 17 Oct 2016 17:07:53 -0200
Subject: [Project Clearwater] Call Redirect
Message-ID: <CAGRP3yPBb2Ha7L8LyEM63-LpAqQ0co1wWHL7CZy7v4OpS_h8cw@mail.gmail.com>

Hi,

How can redirect calls to a Clearwater environment All-in-one to the SBC
Appliance?
How can I make load balancing? Which component?


Greetings.
-- 
Rodrigo M.
(37) 9132-4539
(34) 9889-3069
rodrigo.moreira2007
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161017/238a5e3a/attachment.html>

From Jace.Liang at itri.org.tw  Mon Oct 17 21:26:38 2016
From: Jace.Liang at itri.org.tw (Jace.Liang at itri.org.tw)
Date: Tue, 18 Oct 2016 01:26:38 +0000
Subject: [Project Clearwater] Is clearwater-docker supports elastic scaling?
Message-ID: <8bdd0448c7784dd48e1e4c761df420b3@EXMB03.ITRI.DS>

Hi community,

I am interested in if Clearwater-docker supports elastic scaling or not.
First I made a call based on the minimal distributed Clearwater-docker.
Then I added a new sprout container named sprout_2.
Finally I deleted the original sprout node.
Until now the communication was still OK.
So I assume that Clearwater-docker might support fault-tolerant.

However, on the other hand I tested if I delete a certain node, is the communication will truly break down.
So I used the Weave Scope to stop the nodes.
But it is odd that even I stopped and deleted all the nodes, the communication is still going.
This makes wonder if the Clearwater-docker supports elastic scaling or not.
Because if the communication is still functional even there is no node running.
I can?t confirm that the test I do in the first paragraph was right.

So I would like to ask if Clearwater-docker supports elastic scaling or not?
Or, if there is something wrong in my test steps?

Thank you.


--
???????????????????????????????????????????? This email may contain confidential information. Please do not use or disclose it in any way and delete it if you are not the intended recipient.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161018/e556ef6b/attachment.html>

From zhihui.wu at hpe.com  Tue Oct 18 03:55:30 2016
From: zhihui.wu at hpe.com (Wu, Zhi-Hui (CMS CoE China WH))
Date: Tue, 18 Oct 2016 07:55:30 +0000
Subject: [Project Clearwater] Clearwater homestead docker image can't
	connect kubernetes skydns
Message-ID: <DF4PR84MB02198FD7ECC4D59CA6B39B5BEBD30@DF4PR84MB0219.NAMPRD84.PROD.OUTLOOK.COM>

Hi Guys
I found  homestead docker image can't connect kubernetes skydns for query cassandra service

/etc/init.d/homestead start
/etc/init.d/homestead: 84: ulimit: error setting limit (Invalid argument)
--localhost=172.17.1.6 --home-domain=example.com --diameter-conf=/var/lib/homestead/homestead.conf --dns-server=169.169.0.100 --http=172.17.1.6 --http-threads=200 --cassandra=cassandra --dest-host=0.0.0.0 --hss-peer= --max-peers=2 --server-name="sip:scscf.sprout:5054;transport=TCP" --impu-cache-ttl=0 --hss-reregistration-time=1800 --reg-max-expires=300 --sprout-http-name=sprout:9888 --scheme-unknown="Unknown" --scheme-digest="SIP Digest" --scheme-akav1="Digest-AKAv1-MD5" --scheme-akav2="Digest-AKAv2-SHA-256" --access-log=/var/log/homestead --log-file=/var/log/homestead --log-level=2 --sas=0.0.0.0,homestead at 172.17.1.6


18-10-2016 00:11:17.918 UTC Status dnscachedresolver.cpp:154:     169.169.0.100
18-10-2016 00:11:17.921 UTC Error dnscachedresolver.cpp:607: Failed to retrieve record for cassandra: Could not contact DNS servers
18-10-2016 00:11:55.076 UTC Status dnscachedresolver.cpp:144: Creating Cached Resolver using servers:
18-10-2016 00:11:55.076 UTC Status dnscachedresolver.cpp:154:     169.169.0.100
18-10-2016 00:11:55.081 UTC Error dnscachedresolver.cpp:607: Failed to retrieve record for cassandra: Could not contact DNS servers

But DNS server (kuberntes skydns ) can be queried in other pods

[root at hpeu-docker-k8s ~]# kubectl create -f k8s_practices/03_dns/busybox.yaml
pod "busybox" created
[root at hpeu-docker-k8s ~]# kubectl exec -it busybox sh
/ # nslookup cassandra
Server:    169.169.0.100
Address 1: 169.169.0.100

Name:      cassandra
Address 1: 169.169.193.170



Best Regards,
Wu, Zhi-Hui

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161018/bae2ad46/attachment.html>

From anna.szpoton at gigaspaces.com  Tue Oct 18 10:33:21 2016
From: anna.szpoton at gigaspaces.com (Anna Szpoton)
Date: Tue, 18 Oct 2016 16:33:21 +0200
Subject: [Project Clearwater] Installation of homer and homestead
Message-ID: <CALQLEB6Jm-KRXTeG16NrhtNp14kNzwxQNS_6Rmx8xmbCc4wzFg@mail.gmail.com>

Hi,

I'm using automated installation of Clearwater (using Cloudify) and I've
met one problem - cassandra is not installed properly on Homer and
Homestead and Clearwater last stable release is not usable.

How can I use previous release?

Thanks,
Anna
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161018/05273395/attachment.html>

From Richard.Whitehouse at metaswitch.com  Tue Oct 18 11:43:16 2016
From: Richard.Whitehouse at metaswitch.com (Richard Whitehouse)
Date: Tue, 18 Oct 2016 15:43:16 +0000
Subject: [Project Clearwater] Installation of homer and homestead
In-Reply-To: <CALQLEB6Jm-KRXTeG16NrhtNp14kNzwxQNS_6Rmx8xmbCc4wzFg@mail.gmail.com>
References: <CALQLEB6Jm-KRXTeG16NrhtNp14kNzwxQNS_6Rmx8xmbCc4wzFg@mail.gmail.com>
Message-ID: <BY2PR0201MB18168DFFDFEB07FD26A6C6BBF0D30@BY2PR0201MB1816.namprd02.prod.outlook.com>

Anna,

We?ve altered our package dependencies, introducing new -node packages ? as described in the release note. If you aren?t seeing Cassandra being installed, then it?s likely that you aren?t installing the -node packages as part of your installation. This is detailed in the release note: http://www.projectclearwater.org/sprint-onix-release-note/. This is likely a change you need to make to your Cloudify integration scripts.

If you do want to use the previous release, release-107, that?s should be available in the archive with an apt line of deb http://repo.cw-ngv.com/archive/repo107 binary/

Thanks,

Richard


From: Clearwater [mailto:clearwater-bounces at lists.projectclearwater.org] On Behalf Of Anna Szpoton
Sent: 18 October 2016 15:33
To: clearwater at lists.projectclearwater.org
Subject: [Project Clearwater] Installation of homer and homestead

Hi,

I'm using automated installation of Clearwater (using Cloudify) and I've met one problem - cassandra is not installed properly on Homer and Homestead and Clearwater last stable release is not usable.

How can I use previous release?

Thanks,
Anna
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161018/49a9e4c8/attachment.html>

From anna.szpoton at gigaspaces.com  Tue Oct 18 11:54:00 2016
From: anna.szpoton at gigaspaces.com (Anna Szpoton)
Date: Tue, 18 Oct 2016 17:54:00 +0200
Subject: [Project Clearwater] Installation of homer and homestead
In-Reply-To: <BY2PR0201MB18168DFFDFEB07FD26A6C6BBF0D30@BY2PR0201MB1816.namprd02.prod.outlook.com>
References: <CALQLEB6Jm-KRXTeG16NrhtNp14kNzwxQNS_6Rmx8xmbCc4wzFg@mail.gmail.com>
	<BY2PR0201MB18168DFFDFEB07FD26A6C6BBF0D30@BY2PR0201MB1816.namprd02.prod.outlook.com>
Message-ID: <CALQLEB5XCRrn2yJJ+oB1ysKoJV8JkGTQwnua4J=aaej96j1Jkw@mail.gmail.com>

Thank you Richard!

On Tue, Oct 18, 2016 at 5:43 PM, Richard Whitehouse <
Richard.Whitehouse at metaswitch.com> wrote:

> Anna,
>
>
>
> We?ve altered our package dependencies, introducing new -node packages ?
> as described in the release note. If you aren?t seeing Cassandra being
> installed, then it?s likely that you aren?t installing the -node packages
> as part of your installation. This is detailed in the release note:
> http://www.projectclearwater.org/sprint-onix-release-note/. This is
> likely a change you need to make to your Cloudify integration scripts.
>
>
>
> If you do want to use the previous release, release-107, that?s should be
> available in the archive with an apt line of deb http://repo.cw-ngv.com/
> archive/repo107 binary/
>
>
>
> Thanks,
>
>
>
> Richard
>
>
>
>
>
> *From:* Clearwater [mailto:clearwater-bounces at lists.projectclearwater.org]
> *On Behalf Of *Anna Szpoton
> *Sent:* 18 October 2016 15:33
> *To:* clearwater at lists.projectclearwater.org
> *Subject:* [Project Clearwater] Installation of homer and homestead
>
>
>
> Hi,
>
>
>
> I'm using automated installation of Clearwater (using Cloudify) and I've
> met one problem - cassandra is not installed properly on Homer and
> Homestead and Clearwater last stable release is not usable.
>
>
>
> How can I use previous release?
>
>
>
> Thanks,
> Anna
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161018/bc0312d3/attachment.html>

From Jace.Liang at itri.org.tw  Tue Oct 18 23:41:22 2016
From: Jace.Liang at itri.org.tw (Jace.Liang at itri.org.tw)
Date: Wed, 19 Oct 2016 03:41:22 +0000
Subject: [Project Clearwater] How to get the source code of
	clearwater-auto-config-docker?
Message-ID: <b0c7d24593884ea5a420f1844ad9c40e@EXMB03.ITRI.DS>

Hi community,

I would like to know the process of Clearwater-docker deployment, especially the config step of each containers.
I think the package ?clearwater-auto-config-docker? does the job, so how do I get the source code of this package?
BTW: I failed with the command ?apt-get source clearwater-auto-config-docker?

Thank you.


--
???????????????????????????????????????????? This email may contain confidential information. Please do not use or disclose it in any way and delete it if you are not the intended recipient.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161019/0ff9c1bf/attachment.html>

From luigi.desimone at unina.it  Wed Oct 19 03:40:01 2016
From: luigi.desimone at unina.it (Luigi De Simone)
Date: Wed, 19 Oct 2016 09:40:01 +0200
Subject: [Project Clearwater] How to get the source code of
	clearwater-auto-config-docker?
In-Reply-To: <b0c7d24593884ea5a420f1844ad9c40e@EXMB03.ITRI.DS>
References: <b0c7d24593884ea5a420f1844ad9c40e@EXMB03.ITRI.DS>
Message-ID: <662BE8DE-30D3-4E10-AFCC-EE74C7A918CA@unina.it>

Here there is the script: https://github.com/Metaswitch/clearwater-infrastructure/blob/master/debian/clearwater-auto-config-docker.init.d <https://github.com/Metaswitch/clearwater-infrastructure/blob/master/debian/clearwater-auto-config-docker.init.d>

Luigi

> Il giorno 19 ott 2016, alle ore 05:41, <Jace.Liang at itri.org.tw> <Jace.Liang at itri.org.tw> ha scritto:
> 
> Hi community,
>  
> I would like to know the process of Clearwater-docker deployment, especially the config step of each containers.
> I think the package ?clearwater-auto-config-docker? does the job, so how do I get the source code of this package?
> BTW: I failed with the command ?apt-get source clearwater-auto-config-docker?
>  
> Thank you.
> 
> 
> --
> ???????????????????????????????????????????? This email may contain confidential information. Please do not use or disclose it in any way and delete it if you are not the intended recipient. _______________________________________________
> Clearwater mailing list
> Clearwater at lists.projectclearwater.org <mailto:Clearwater at lists.projectclearwater.org>
> http://lists.projectclearwater.org/mailman/listinfo/clearwater_lists.projectclearwater.org <http://lists.projectclearwater.org/mailman/listinfo/clearwater_lists.projectclearwater.org>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161019/cadf9777/attachment.html>

From Jace.Liang at itri.org.tw  Thu Oct 20 01:22:42 2016
From: Jace.Liang at itri.org.tw (Jace.Liang at itri.org.tw)
Date: Thu, 20 Oct 2016 05:22:42 +0000
Subject: [Project Clearwater] What's the default port for memento on sprout?
Message-ID: <8f1e6ff5746e4ac6bcabb368fe5f1884@EXMB03.ITRI.DS>

Dear All,
I am following the instruction of manual install guide, but I feel confused about the port setting for App. Servers in the shared_config file.


l   gemini=<gemini port>

l   memento=<memento port>


Is there any default port setting for the memento that install in sprout node by command
$ sudo DEBIAN_FRONTEND=noninteractive apt-get install memento-node ?yes
Or any recommend about how to set these two ports?
Also, I don?t see any install command to install gemini. Is gemini will be installed with the above command?

Thank you.


--
???????????????????????????????????????????? This email may contain confidential information. Please do not use or disclose it in any way and delete it if you are not the intended recipient.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161020/b8ab83a8/attachment.html>

From gilles.lecorgne at orange.com  Thu Oct 20 03:56:40 2016
From: gilles.lecorgne at orange.com (gilles.lecorgne at orange.com)
Date: Thu, 20 Oct 2016 07:56:40 +0000
Subject: [Project Clearwater]  registration authentication
Message-ID: <11897_1476950201_580878B9_11897_73_1_3D8CCA413E49D6439A7E95F805D77A4C21F857EA@OPEXCLILM43.corporate.adroot.infra.ftgroup>

Dear all,

I deleted my existing installation in order to  install the new release-108. I have an issue with 'registration' procedure as there is  no more the challenge of authentication for the registration.

>From the Bono log, I saw that there is the following line,
"20-10-2016 07:39:33.304 UTC Info pjutils.cpp:389: Adding integrity-protected=ip-assoc-yes indicator to message"

which is, I suppose, the reason why sprout node doesn't authenticate:
"20-10-2016 07:49:02.911 UTC Info authentication.cpp:771: SIP Digest authenticated request integrity protected by edge proxy
20-10-2016 07:49:02.911 UTC Debug authentication.cpp:868: Request does not need authentication"

What is the configuration to disable the 'integrity-protected=ip-assoc-yes' on Bono node?

Best regards,

Gilles

_________________________________________________________________________________________________________________________

Ce message et ses pieces jointes peuvent contenir des informations confidentielles ou privilegiees et ne doivent donc
pas etre diffuses, exploites ou copies sans autorisation. Si vous avez recu ce message par erreur, veuillez le signaler
a l'expediteur et le detruire ainsi que les pieces jointes. Les messages electroniques etant susceptibles d'alteration,
Orange decline toute responsabilite si ce message a ete altere, deforme ou falsifie. Merci.

This message and its attachments may contain confidential or privileged information that may be protected by law;
they should not be distributed, used or copied without authorisation.
If you have received this email in error, please notify the sender and delete this message and its attachments.
As emails may be altered, Orange is not liable for messages that have been modified, changed or falsified.
Thank you.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161020/923008df/attachment.html>

From Richard.Whitehouse at metaswitch.com  Thu Oct 20 06:15:42 2016
From: Richard.Whitehouse at metaswitch.com (Richard Whitehouse)
Date: Thu, 20 Oct 2016 10:15:42 +0000
Subject: [Project Clearwater] registration authentication
In-Reply-To: <11897_1476950201_580878B9_11897_73_1_3D8CCA413E49D6439A7E95F805D77A4C21F857EA@OPEXCLILM43.corporate.adroot.infra.ftgroup>
References: <11897_1476950201_580878B9_11897_73_1_3D8CCA413E49D6439A7E95F805D77A4C21F857EA@OPEXCLILM43.corporate.adroot.infra.ftgroup>
Message-ID: <BY2PR0201MB181671B9BF766F3849D6EF40F0D50@BY2PR0201MB1816.namprd02.prod.outlook.com>

Gilles,

Can you clarify what you are seeing?

The expected behaviour is that if a client sets up a TCP connection and successfully authenticates on that connection, then future requests are unchallenged. The first request on each connection should be challenged, and if it isn't that's probably a bug.

This is because once a successful authentication is completed on a TCP connection, the client behind it is known to be authenticated, and so the flow is authenticated, and so there is no need to challenge the authentication.

We don't have any configuration to disable this behaviour in Bono.

Richard

From: Clearwater [mailto:clearwater-bounces at lists.projectclearwater.org] On Behalf Of gilles.lecorgne at orange.com
Sent: 20 October 2016 08:57
To: clearwater at lists.projectclearwater.org
Subject: [Project Clearwater] registration authentication

Dear all,

I deleted my existing installation in order to  install the new release-108. I have an issue with 'registration' procedure as there is  no more the challenge of authentication for the registration.

>From the Bono log, I saw that there is the following line,
"20-10-2016 07:39:33.304 UTC Info pjutils.cpp:389: Adding integrity-protected=ip-assoc-yes indicator to message"

which is, I suppose, the reason why sprout node doesn't authenticate:
"20-10-2016 07:49:02.911 UTC Info authentication.cpp:771: SIP Digest authenticated request integrity protected by edge proxy
20-10-2016 07:49:02.911 UTC Debug authentication.cpp:868: Request does not need authentication"

What is the configuration to disable the 'integrity-protected=ip-assoc-yes' on Bono node?

Best regards,

Gilles

_________________________________________________________________________________________________________________________



Ce message et ses pieces jointes peuvent contenir des informations confidentielles ou privilegiees et ne doivent donc

pas etre diffuses, exploites ou copies sans autorisation. Si vous avez recu ce message par erreur, veuillez le signaler

a l'expediteur et le detruire ainsi que les pieces jointes. Les messages electroniques etant susceptibles d'alteration,

Orange decline toute responsabilite si ce message a ete altere, deforme ou falsifie. Merci.



This message and its attachments may contain confidential or privileged information that may be protected by law;

they should not be distributed, used or copied without authorisation.

If you have received this email in error, please notify the sender and delete this message and its attachments.

As emails may be altered, Orange is not liable for messages that have been modified, changed or falsified.

Thank you.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161020/02e3b498/attachment.html>

From richard.whitehouse at projectclearwater.org  Thu Oct 20 06:55:33 2016
From: richard.whitehouse at projectclearwater.org (Richard Whitehouse (projectclearwater.org))
Date: Thu, 20 Oct 2016 10:55:33 +0000
Subject: [Project Clearwater] What's the default port for memento on
	sprout?
In-Reply-To: <8f1e6ff5746e4ac6bcabb368fe5f1884@EXMB03.ITRI.DS>
References: <8f1e6ff5746e4ac6bcabb368fe5f1884@EXMB03.ITRI.DS>
Message-ID: <BY2PR0201MB1816F1088AAA61853AC6AE68F0D50@BY2PR0201MB1816.namprd02.prod.outlook.com>

Jace Liang,

There is no default SIP port for gemini and memento when doing a manual install. For a Chef install, by default they are configured to use 5055. They can be configured in shared_config.

If there is no port configured, the Sproutlets which implement gemini and memento will not be run.

Memento consists of two parts, a server which stores and allows retrieval of a subscriber?s call list, and a sproutlet, which updates the call lists based on the calls the subscriber receives/makes. These are both installed by the memento-node package.

Gemini, however, only consists of a sproutlet, which is installed by the gemini-as package.

More information about sproutlets is available at http://www.projectclearwater.org/tadhack-mini-london-and-sproutlets/

I?ve raised https://github.com/Metaswitch/clearwater-readthedocs/issues/217 to track the lack of documentation regarding Gemini as part of the manual install.

Richard

From: Clearwater [mailto:clearwater-bounces at lists.projectclearwater.org] On Behalf Of Jace.Liang at itri.org.tw
Sent: 20 October 2016 06:23
To: clearwater at lists.projectclearwater.org
Subject: [Project Clearwater] What's the default port for memento on sprout?

Dear All,
I am following the instruction of manual install guide, but I feel confused about the port setting for App. Servers in the shared_config file.


l   gemini=<gemini port>

l   memento=<memento port>


Is there any default port setting for the memento that install in sprout node by command
$ sudo DEBIAN_FRONTEND=noninteractive apt-get install memento-node ?yes
Or any recommend about how to set these two ports?
Also, I don?t see any install command to install gemini. Is gemini will be installed with the above command?

Thank you.


--
???????????????????????????????????????????? This email may contain confidential information. Please do not use or disclose it in any way and delete it if you are not the intended recipient.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161020/da3f91ec/attachment.html>

From gilles.lecorgne at orange.com  Thu Oct 20 08:25:09 2016
From: gilles.lecorgne at orange.com (gilles.lecorgne at orange.com)
Date: Thu, 20 Oct 2016 12:25:09 +0000
Subject: [Project Clearwater] registration authentication
In-Reply-To: <BY2PR0201MB181671B9BF766F3849D6EF40F0D50@BY2PR0201MB1816.namprd02.prod.outlook.com>
References: <11897_1476950201_580878B9_11897_73_1_3D8CCA413E49D6439A7E95F805D77A4C21F857EA@OPEXCLILM43.corporate.adroot.infra.ftgroup>
	<BY2PR0201MB181671B9BF766F3849D6EF40F0D50@BY2PR0201MB1816.namprd02.prod.outlook.com>
Message-ID: <2548_1476966314_5808B7A9_2548_2_25_3D8CCA413E49D6439A7E95F805D77A4C21F85945@OPEXCLILM43.corporate.adroot.infra.ftgroup>

Hello Richard,

Thank you for your feedback.
The use case is an initial registration from a client (zoiper in this case). It is UDP connection between the client and the Bono node. I send you more information about bono configuration, logs and trace.

Thank you for your support,

Gilles

De : Richard Whitehouse [mailto:Richard.Whitehouse at metaswitch.com]
Envoy? : jeudi 20 octobre 2016 12:16
? : clearwater at lists.projectclearwater.org; LECORGNE Gilles IMT/OLN
Objet : RE: [Project Clearwater] registration authentication

Gilles,

Can you clarify what you are seeing?

The expected behaviour is that if a client sets up a TCP connection and successfully authenticates on that connection, then future requests are unchallenged. The first request on each connection should be challenged, and if it isn't that's probably a bug.

This is because once a successful authentication is completed on a TCP connection, the client behind it is known to be authenticated, and so the flow is authenticated, and so there is no need to challenge the authentication.

We don't have any configuration to disable this behaviour in Bono.

Richard

From: Clearwater [mailto:clearwater-bounces at lists.projectclearwater.org] On Behalf Of gilles.lecorgne at orange.com<mailto:gilles.lecorgne at orange.com>
Sent: 20 October 2016 08:57
To: clearwater at lists.projectclearwater.org<mailto:clearwater at lists.projectclearwater.org>
Subject: [Project Clearwater] registration authentication

Dear all,

I deleted my existing installation in order to  install the new release-108. I have an issue with 'registration' procedure as there is  no more the challenge of authentication for the registration.

>From the Bono log, I saw that there is the following line,
"20-10-2016 07:39:33.304 UTC Info pjutils.cpp:389: Adding integrity-protected=ip-assoc-yes indicator to message"

which is, I suppose, the reason why sprout node doesn't authenticate:
"20-10-2016 07:49:02.911 UTC Info authentication.cpp:771: SIP Digest authenticated request integrity protected by edge proxy
20-10-2016 07:49:02.911 UTC Debug authentication.cpp:868: Request does not need authentication"

What is the configuration to disable the 'integrity-protected=ip-assoc-yes' on Bono node?

Best regards,

Gilles

_________________________________________________________________________________________________________________________



Ce message et ses pieces jointes peuvent contenir des informations confidentielles ou privilegiees et ne doivent donc

pas etre diffuses, exploites ou copies sans autorisation. Si vous avez recu ce message par erreur, veuillez le signaler

a l'expediteur et le detruire ainsi que les pieces jointes. Les messages electroniques etant susceptibles d'alteration,

Orange decline toute responsabilite si ce message a ete altere, deforme ou falsifie. Merci.



This message and its attachments may contain confidential or privileged information that may be protected by law;

they should not be distributed, used or copied without authorisation.

If you have received this email in error, please notify the sender and delete this message and its attachments.

As emails may be altered, Orange is not liable for messages that have been modified, changed or falsified.

Thank you.

_________________________________________________________________________________________________________________________

Ce message et ses pieces jointes peuvent contenir des informations confidentielles ou privilegiees et ne doivent donc
pas etre diffuses, exploites ou copies sans autorisation. Si vous avez recu ce message par erreur, veuillez le signaler
a l'expediteur et le detruire ainsi que les pieces jointes. Les messages electroniques etant susceptibles d'alteration,
Orange decline toute responsabilite si ce message a ete altere, deforme ou falsifie. Merci.

This message and its attachments may contain confidential or privileged information that may be protected by law;
they should not be distributed, used or copied without authorisation.
If you have received this email in error, please notify the sender and delete this message and its attachments.
As emails may be altered, Orange is not liable for messages that have been modified, changed or falsified.
Thank you.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161020/bd47eee3/attachment.html>

From Richard.Whitehouse at metaswitch.com  Thu Oct 20 08:48:03 2016
From: Richard.Whitehouse at metaswitch.com (Richard Whitehouse)
Date: Thu, 20 Oct 2016 12:48:03 +0000
Subject: [Project Clearwater] registration authentication
Message-ID: <BY2PR0201MB18160C149C58CEAA147ABAB2F0D50@BY2PR0201MB1816.namprd02.prod.outlook.com>

Gilles,

Is there an earlier bono log than the one attached? The log you've supplied marks the flow as already being present.

                Line 31: 20-10-2016 12:14:54.360 UTC Debug flowtable.cpp:90: Find or create flow for transport udp0x25c4750 (1), remote address 90.32.213.208:48334
                Line 32: 20-10-2016 12:14:54.360 UTC Debug flowtable.cpp:114: Found flow record 0x7f96080028a0
                Line 33: 20-10-2016 12:14:54.360 UTC Debug flowtable.cpp:599: Dialog count now 2 for flow sip:6505550792 at reflexion.nccc

This suggests there was an earlier dialog which created and authenticated the flow. If you look for the flowtable.cpp entries inside the earlier logs, then you can probably work out which transaction authenticated the flow.


Hope this helps.

Richard

From: gilles.lecorgne at orange.com [mailto:gilles.lecorgne at orange.com]
Sent: 20 October 2016 13:31
To: Richard Whitehouse <Richard.Whitehouse at metaswitch.com>
Subject: RE: [Project Clearwater] registration authentication

Richard,

Here are the different files. If you need further information, I can provide you.

Best regards,

Gilles



De : Richard Whitehouse [mailto:Richard.Whitehouse at metaswitch.com]
Envoy? : jeudi 20 octobre 2016 12:16
? : clearwater at lists.projectclearwater.org<mailto:clearwater at lists.projectclearwater.org>; LECORGNE Gilles IMT/OLN
Objet : RE: [Project Clearwater] registration authentication

Gilles,

Can you clarify what you are seeing?

The expected behaviour is that if a client sets up a TCP connection and successfully authenticates on that connection, then future requests are unchallenged. The first request on each connection should be challenged, and if it isn't that's probably a bug.

This is because once a successful authentication is completed on a TCP connection, the client behind it is known to be authenticated, and so the flow is authenticated, and so there is no need to challenge the authentication.

We don't have any configuration to disable this behaviour in Bono.

Richard

From: Clearwater [mailto:clearwater-bounces at lists.projectclearwater.org] On Behalf Of gilles.lecorgne at orange.com<mailto:gilles.lecorgne at orange.com>
Sent: 20 October 2016 08:57
To: clearwater at lists.projectclearwater.org<mailto:clearwater at lists.projectclearwater.org>
Subject: [Project Clearwater] registration authentication

Dear all,

I deleted my existing installation in order to  install the new release-108. I have an issue with 'registration' procedure as there is  no more the challenge of authentication for the registration.

>From the Bono log, I saw that there is the following line,
"20-10-2016 07:39:33.304 UTC Info pjutils.cpp:389: Adding integrity-protected=ip-assoc-yes indicator to message"

which is, I suppose, the reason why sprout node doesn't authenticate:
"20-10-2016 07:49:02.911 UTC Info authentication.cpp:771: SIP Digest authenticated request integrity protected by edge proxy
20-10-2016 07:49:02.911 UTC Debug authentication.cpp:868: Request does not need authentication"

What is the configuration to disable the 'integrity-protected=ip-assoc-yes' on Bono node?

Best regards,

Gilles

_________________________________________________________________________________________________________________________



Ce message et ses pieces jointes peuvent contenir des informations confidentielles ou privilegiees et ne doivent donc

pas etre diffuses, exploites ou copies sans autorisation. Si vous avez recu ce message par erreur, veuillez le signaler

a l'expediteur et le detruire ainsi que les pieces jointes. Les messages electroniques etant susceptibles d'alteration,

Orange decline toute responsabilite si ce message a ete altere, deforme ou falsifie. Merci.



This message and its attachments may contain confidential or privileged information that may be protected by law;

they should not be distributed, used or copied without authorisation.

If you have received this email in error, please notify the sender and delete this message and its attachments.

As emails may be altered, Orange is not liable for messages that have been modified, changed or falsified.

Thank you.

_________________________________________________________________________________________________________________________



Ce message et ses pieces jointes peuvent contenir des informations confidentielles ou privilegiees et ne doivent donc

pas etre diffuses, exploites ou copies sans autorisation. Si vous avez recu ce message par erreur, veuillez le signaler

a l'expediteur et le detruire ainsi que les pieces jointes. Les messages electroniques etant susceptibles d'alteration,

Orange decline toute responsabilite si ce message a ete altere, deforme ou falsifie. Merci.



This message and its attachments may contain confidential or privileged information that may be protected by law;

they should not be distributed, used or copied without authorisation.

If you have received this email in error, please notify the sender and delete this message and its attachments.

As emails may be altered, Orange is not liable for messages that have been modified, changed or falsified.

Thank you.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161020/5619e9da/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: initial_reg_without_auth_20161020.pcapng
Type: application/octet-stream
Size: 900324 bytes
Desc: initial_reg_without_auth_20161020.pcapng
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161020/5619e9da/attachment.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: local_config
Type: application/octet-stream
Size: 142 bytes
Desc: local_config
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161020/5619e9da/attachment-0001.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: shared_config
Type: application/octet-stream
Size: 624 bytes
Desc: shared_config
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161020/5619e9da/attachment-0002.obj>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: sprout_log_20161020_initial_reg_wo_challenge.txt
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161020/5619e9da/attachment.txt>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: user_settings
Type: application/octet-stream
Size: 12 bytes
Desc: user_settings
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161020/5619e9da/attachment-0003.obj>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: bono_log_20161020_initial_reg_wo_challenge.txt
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161020/5619e9da/attachment-0001.txt>

From gilles.lecorgne at orange.com  Thu Oct 20 09:05:48 2016
From: gilles.lecorgne at orange.com (gilles.lecorgne at orange.com)
Date: Thu, 20 Oct 2016 13:05:48 +0000
Subject: [Project Clearwater] registration authentication
In-Reply-To: <BY2PR0201MB18160C149C58CEAA147ABAB2F0D50@BY2PR0201MB1816.namprd02.prod.outlook.com>
References: <BY2PR0201MB18160C149C58CEAA147ABAB2F0D50@BY2PR0201MB1816.namprd02.prod.outlook.com>
Message-ID: <14657_1476968753_5808C130_14657_134_1_3D8CCA413E49D6439A7E95F805D77A4C21F85995@OPEXCLILM43.corporate.adroot.infra.ftgroup>

Richard,

I reproduce the test, but this time with a new subscriber, and I re-try multiple times the initial registrations (I did multiple  'initial registration', 'de-registration'): see relevant log and trace.

My understanding is that only the first initial registration is challenged, but not the others initial registrations.

Best regards,

Gilles

De : Richard Whitehouse [mailto:Richard.Whitehouse at metaswitch.com]
Envoy? : jeudi 20 octobre 2016 14:48
? : clearwater at lists.projectclearwater.org; LECORGNE Gilles IMT/OLN
Objet : Re: [Project Clearwater] registration authentication

Gilles,

Is there an earlier bono log than the one attached? The log you've supplied marks the flow as already being present.

                Line 31: 20-10-2016 12:14:54.360 UTC Debug flowtable.cpp:90: Find or create flow for transport udp0x25c4750 (1), remote address 90.32.213.208:48334
                Line 32: 20-10-2016 12:14:54.360 UTC Debug flowtable.cpp:114: Found flow record 0x7f96080028a0
                Line 33: 20-10-2016 12:14:54.360 UTC Debug flowtable.cpp:599: Dialog count now 2 for flow sip:6505550792 at reflexion.nccc

This suggests there was an earlier dialog which created and authenticated the flow. If you look for the flowtable.cpp entries inside the earlier logs, then you can probably work out which transaction authenticated the flow.


Hope this helps.

Richard

From: gilles.lecorgne at orange.com<mailto:gilles.lecorgne at orange.com> [mailto:gilles.lecorgne at orange.com]
Sent: 20 October 2016 13:31
To: Richard Whitehouse <Richard.Whitehouse at metaswitch.com<mailto:Richard.Whitehouse at metaswitch.com>>
Subject: RE: [Project Clearwater] registration authentication

Richard,

Here are the different files. If you need further information, I can provide you.

Best regards,

Gilles



De : Richard Whitehouse [mailto:Richard.Whitehouse at metaswitch.com]
Envoy? : jeudi 20 octobre 2016 12:16
? : clearwater at lists.projectclearwater.org<mailto:clearwater at lists.projectclearwater.org>; LECORGNE Gilles IMT/OLN
Objet : RE: [Project Clearwater] registration authentication

Gilles,

Can you clarify what you are seeing?

The expected behaviour is that if a client sets up a TCP connection and successfully authenticates on that connection, then future requests are unchallenged. The first request on each connection should be challenged, and if it isn't that's probably a bug.

This is because once a successful authentication is completed on a TCP connection, the client behind it is known to be authenticated, and so the flow is authenticated, and so there is no need to challenge the authentication.

We don't have any configuration to disable this behaviour in Bono.

Richard

From: Clearwater [mailto:clearwater-bounces at lists.projectclearwater.org] On Behalf Of gilles.lecorgne at orange.com<mailto:gilles.lecorgne at orange.com>
Sent: 20 October 2016 08:57
To: clearwater at lists.projectclearwater.org<mailto:clearwater at lists.projectclearwater.org>
Subject: [Project Clearwater] registration authentication

Dear all,

I deleted my existing installation in order to  install the new release-108. I have an issue with 'registration' procedure as there is  no more the challenge of authentication for the registration.

>From the Bono log, I saw that there is the following line,
"20-10-2016 07:39:33.304 UTC Info pjutils.cpp:389: Adding integrity-protected=ip-assoc-yes indicator to message"

which is, I suppose, the reason why sprout node doesn't authenticate:
"20-10-2016 07:49:02.911 UTC Info authentication.cpp:771: SIP Digest authenticated request integrity protected by edge proxy
20-10-2016 07:49:02.911 UTC Debug authentication.cpp:868: Request does not need authentication"

What is the configuration to disable the 'integrity-protected=ip-assoc-yes' on Bono node?

Best regards,

Gilles

_________________________________________________________________________________________________________________________



Ce message et ses pieces jointes peuvent contenir des informations confidentielles ou privilegiees et ne doivent donc

pas etre diffuses, exploites ou copies sans autorisation. Si vous avez recu ce message par erreur, veuillez le signaler

a l'expediteur et le detruire ainsi que les pieces jointes. Les messages electroniques etant susceptibles d'alteration,

Orange decline toute responsabilite si ce message a ete altere, deforme ou falsifie. Merci.



This message and its attachments may contain confidential or privileged information that may be protected by law;

they should not be distributed, used or copied without authorisation.

If you have received this email in error, please notify the sender and delete this message and its attachments.

As emails may be altered, Orange is not liable for messages that have been modified, changed or falsified.

Thank you.

_________________________________________________________________________________________________________________________



Ce message et ses pieces jointes peuvent contenir des informations confidentielles ou privilegiees et ne doivent donc

pas etre diffuses, exploites ou copies sans autorisation. Si vous avez recu ce message par erreur, veuillez le signaler

a l'expediteur et le detruire ainsi que les pieces jointes. Les messages electroniques etant susceptibles d'alteration,

Orange decline toute responsabilite si ce message a ete altere, deforme ou falsifie. Merci.



This message and its attachments may contain confidential or privileged information that may be protected by law;

they should not be distributed, used or copied without authorisation.

If you have received this email in error, please notify the sender and delete this message and its attachments.

As emails may be altered, Orange is not liable for messages that have been modified, changed or falsified.

Thank you.

_________________________________________________________________________________________________________________________

Ce message et ses pieces jointes peuvent contenir des informations confidentielles ou privilegiees et ne doivent donc
pas etre diffuses, exploites ou copies sans autorisation. Si vous avez recu ce message par erreur, veuillez le signaler
a l'expediteur et le detruire ainsi que les pieces jointes. Les messages electroniques etant susceptibles d'alteration,
Orange decline toute responsabilite si ce message a ete altere, deforme ou falsifie. Merci.

This message and its attachments may contain confidential or privileged information that may be protected by law;
they should not be distributed, used or copied without authorisation.
If you have received this email in error, please notify the sender and delete this message and its attachments.
As emails may be altered, Orange is not liable for messages that have been modified, changed or falsified.
Thank you.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161020/a7df1816/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: initial_reg_without_auth_20161020_v2.pcapng
Type: application/octet-stream
Size: 2360852 bytes
Desc: initial_reg_without_auth_20161020_v2.pcapng
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161020/a7df1816/attachment.obj>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: bono_log_20161020_initial_reg_wo_challenge_v2.txt
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161020/a7df1816/attachment.txt>

From Jace.Liang at itri.org.tw  Thu Oct 20 22:23:00 2016
From: Jace.Liang at itri.org.tw (Jace.Liang at itri.org.tw)
Date: Fri, 21 Oct 2016 02:23:00 +0000
Subject: [Project Clearwater] etcd_process execution failed on each node.
Message-ID: <441a6eb1beb6484f97397818dd6f3254@EXMB03.ITRI.DS>

Dear All,

Recently I found out my 6 VMs of each node have trouble of executing etcd_process
I think I did the config file right, because at first their etcd_process was running well and the ?clearwater-etcdctl cluster health? shows all healthly.
But somehow they suddenly

I tried ?monit restart etcd_process? but still failed.

Here are some command result for more information. (on the node ellis)

root at ellis1:/var/log# clearwater-etcdctl cluster-health
cluster may be unhealthy: failed to list members
Error:  client: etcd cluster is unavailable or misconfigured
error #0: dial tcp 192.168.2.206:4000: getsockopt: connection refused  (.206 is homestead?s ip)

cat /var/log/boot.log
???..
???..
???..
zmq_msg_recv: Resource temporarily unavailable
Configuring monit for only localhost access
Error:  dial tcp 192.168.2.205:4000: getsockopt: no route to host
Rejoining cluster...
Etcd failed to come up - exiting

root at ellis1:/var/log/clearwater-etcd# cat clearwater-etcd.log
????.
????.
????
2016-10-21 10:11:46.686827 I | etcdmain: etcd Version: 2.2.5
2016-10-21 10:11:46.686888 I | etcdmain: Git SHA: bc9ddf2
2016-10-21 10:11:46.686895 I | etcdmain: Go Version: go1.5.3
2016-10-21 10:11:46.686902 I | etcdmain: Go OS/Arch: linux/amd64
2016-10-21 10:11:46.686913 I | etcdmain: setting maximum number of CPUs to 4, total number of available CPUs is 4
2016-10-21 10:11:46.686953 N | etcdmain: the server is already initialized as member before, starting as etcd member...
2016-10-21 10:11:46.687015 I | etcdmain: listening for peers on http://192.168.2.206:2380
2016-10-21 10:11:46.687039 I | etcdmain: listening for client requests on http://192.168.2.206:4000
2016-10-21 10:11:46.689639 I | etcdserver: recovered store from snapshot at index 10001
2016-10-21 10:11:46.689654 I | etcdserver: name = 192-168-2-206
2016-10-21 10:11:46.689660 I | etcdserver: data dir = /var/lib/clearwater-etcd/192.168.2.206
2016-10-21 10:11:46.689668 I | etcdserver: member dir = /var/lib/clearwater-etcd/192.168.2.206/member
2016-10-21 10:11:46.689674 I | etcdserver: heartbeat = 100ms
2016-10-21 10:11:46.689680 I | etcdserver: election = 1000ms
2016-10-21 10:11:46.689686 I | etcdserver: snapshot count = 10000
2016-10-21 10:11:46.689696 I | etcdserver: advertise client URLs = http://192.168.2.206:4000
2016-10-21 10:11:46.689717 I | etcdserver: loaded cluster information from store: <nil>
2016-10-21 10:11:46.726159 I | etcdserver: restarting member 4cb5fd19beaa1750 in cluster 877b90a46cdaaa83 at commit index 14044
2016-10-21 10:11:46.727646 I | raft: 4cb5fd19beaa1750 became follower at term 814
2016-10-21 10:11:46.727690 I | raft: newRaft 4cb5fd19beaa1750 [peers: [1226bb321c91a88e,4cb5fd19beaa1750,8ac8820f24de7303,a4a5d4f826d5740a], term: 814, commit: 14044, applied: 10001, lastindex: 14045, lastterm: 814]
2016-10-21 10:11:46.734589 I | rafthttp: the connection with 1226bb321c91a88e became active
2016-10-21 10:11:46.739284 E | rafthttp: failed to dial 8ac8820f24de7303 on stream Message (dial tcp 192.168.2.202:2380: getsockopt: connection refused)
2016-10-21 10:11:46.740156 E | rafthttp: failed to dial 8ac8820f24de7303 on stream MsgApp v2 (dial tcp 192.168.2.202:2380: getsockopt: connection refused)
2016-10-21 10:11:46.745962 I | etcdserver: starting server... [version: 2.2.5, cluster version: 2.2]
2016-10-21 10:11:46.747252 E | rafthttp: failed to dial a4a5d4f826d5740a on stream Message (dial tcp 192.168.2.203:2380: getsockopt: connection refused)
2016-10-21 10:11:46.747394 E | rafthttp: failed to dial a4a5d4f826d5740a on stream MsgApp v2 (dial tcp 192.168.2.203:2380: getsockopt: connection refused)
2016-10-21 10:11:46.756637 I | rafthttp: the connection with 1226bb321c91a88e became inactive
2016-10-21 10:11:46.756660 E | rafthttp: failed to read 1226bb321c91a88e on stream Message (net/http: request canceled)
2016-10-21 10:11:46.756687 N | etcdserver: removed member 1226bb321c91a88e from cluster 877b90a46cdaaa83
2016-10-21 10:11:46.756766 D | etcdserver: skipped updating attributes of removed member 1226bb321c91a88e
2016-10-21 10:11:46.756853 C | etcdserver: nodeToMember should never fail: raftAttributes key doesn't exist
panic: nodeToMember should never fail: raftAttributes key doesn't exist


Seems like the nodes cannot connect to each other, but I test it with ping, they still ping to each other.
Can anyone give us some advice or solution?
Thank you.


--
???????????????????????????????????????????? This email may contain confidential information. Please do not use or disclose it in any way and delete it if you are not the intended recipient.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161021/94909d22/attachment.html>

From Richard.Whitehouse at metaswitch.com  Fri Oct 21 05:42:49 2016
From: Richard.Whitehouse at metaswitch.com (Richard Whitehouse)
Date: Fri, 21 Oct 2016 09:42:49 +0000
Subject: [Project Clearwater] etcd_process execution failed on each node.
In-Reply-To: <441a6eb1beb6484f97397818dd6f3254@EXMB03.ITRI.DS>
References: <441a6eb1beb6484f97397818dd6f3254@EXMB03.ITRI.DS>
Message-ID: <BY2PR0201MB1816D78ADB1376ADDAD8F0D5F0D40@BY2PR0201MB1816.namprd02.prod.outlook.com>

Jace Liang,

What version of Project Clearwater are you running?

From your problem description, you might be hitting https://github.com/Metaswitch/clearwater-etcd/issues/320 which we?ve fixed in the latest release, Onix, release 108.

This can cause the etcd cluster to lose quorum and thus prevent it starting up correctly.

If this is the case, you?ve got two options:

1) You can delete your existing installation, and install release-108 instead. That?s probably the simplest solution, but you?ll lose all of your data.

2) Alternatively, you can upgrade your nodes to release-108, and then restore the cluster. As it?s lost quorum, you?ll need to follow the instructions for multiple node recovery, which are documented in the docs at http://clearwater.readthedocs.io/en/stable/Handling_Failed_Nodes.html#multiple-failed-nodes

Hope this helps,


Richard

From: Clearwater [mailto:clearwater-bounces at lists.projectclearwater.org] On Behalf Of Jace.Liang at itri.org.tw
Sent: 21 October 2016 03:23
To: clearwater at lists.projectclearwater.org
Subject: [Project Clearwater] etcd_process execution failed on each node.

Dear All,

Recently I found out my 6 VMs of each node have trouble of executing etcd_process
I think I did the config file right, because at first their etcd_process was running well and the ?clearwater-etcdctl cluster health? shows all healthly.
But somehow they suddenly

I tried ?monit restart etcd_process? but still failed.

Here are some command result for more information. (on the node ellis)

root at ellis1:/var/log# clearwater-etcdctl cluster-health
cluster may be unhealthy: failed to list members
Error:  client: etcd cluster is unavailable or misconfigured
error #0: dial tcp 192.168.2.206:4000: getsockopt: connection refused  (.206 is homestead?s ip)

cat /var/log/boot.log
???..
???..
???..
zmq_msg_recv: Resource temporarily unavailable
Configuring monit for only localhost access
Error:  dial tcp 192.168.2.205:4000: getsockopt: no route to host
Rejoining cluster...
Etcd failed to come up - exiting

root at ellis1:/var/log/clearwater-etcd# cat clearwater-etcd.log
????.
????.
????
2016-10-21 10:11:46.686827 I | etcdmain: etcd Version: 2.2.5
2016-10-21 10:11:46.686888 I | etcdmain: Git SHA: bc9ddf2
2016-10-21 10:11:46.686895 I | etcdmain: Go Version: go1.5.3
2016-10-21 10:11:46.686902 I | etcdmain: Go OS/Arch: linux/amd64
2016-10-21 10:11:46.686913 I | etcdmain: setting maximum number of CPUs to 4, total number of available CPUs is 4
2016-10-21 10:11:46.686953 N | etcdmain: the server is already initialized as member before, starting as etcd member...
2016-10-21 10:11:46.687015 I | etcdmain: listening for peers on http://192.168.2.206:2380
2016-10-21 10:11:46.687039 I | etcdmain: listening for client requests on http://192.168.2.206:4000
2016-10-21 10:11:46.689639 I | etcdserver: recovered store from snapshot at index 10001
2016-10-21 10:11:46.689654 I | etcdserver: name = 192-168-2-206
2016-10-21 10:11:46.689660 I | etcdserver: data dir = /var/lib/clearwater-etcd/192.168.2.206
2016-10-21 10:11:46.689668 I | etcdserver: member dir = /var/lib/clearwater-etcd/192.168.2.206/member
2016-10-21 10:11:46.689674 I | etcdserver: heartbeat = 100ms
2016-10-21 10:11:46.689680 I | etcdserver: election = 1000ms
2016-10-21 10:11:46.689686 I | etcdserver: snapshot count = 10000
2016-10-21 10:11:46.689696 I | etcdserver: advertise client URLs = http://192.168.2.206:4000
2016-10-21 10:11:46.689717 I | etcdserver: loaded cluster information from store: <nil>
2016-10-21 10:11:46.726159 I | etcdserver: restarting member 4cb5fd19beaa1750 in cluster 877b90a46cdaaa83 at commit index 14044
2016-10-21 10:11:46.727646 I | raft: 4cb5fd19beaa1750 became follower at term 814
2016-10-21 10:11:46.727690 I | raft: newRaft 4cb5fd19beaa1750 [peers: [1226bb321c91a88e,4cb5fd19beaa1750,8ac8820f24de7303,a4a5d4f826d5740a], term: 814, commit: 14044, applied: 10001, lastindex: 14045, lastterm: 814]
2016-10-21 10:11:46.734589 I | rafthttp: the connection with 1226bb321c91a88e became active
2016-10-21 10:11:46.739284 E | rafthttp: failed to dial 8ac8820f24de7303 on stream Message (dial tcp 192.168.2.202:2380: getsockopt: connection refused)
2016-10-21 10:11:46.740156 E | rafthttp: failed to dial 8ac8820f24de7303 on stream MsgApp v2 (dial tcp 192.168.2.202:2380: getsockopt: connection refused)
2016-10-21 10:11:46.745962 I | etcdserver: starting server... [version: 2.2.5, cluster version: 2.2]
2016-10-21 10:11:46.747252 E | rafthttp: failed to dial a4a5d4f826d5740a on stream Message (dial tcp 192.168.2.203:2380: getsockopt: connection refused)
2016-10-21 10:11:46.747394 E | rafthttp: failed to dial a4a5d4f826d5740a on stream MsgApp v2 (dial tcp 192.168.2.203:2380: getsockopt: connection refused)
2016-10-21 10:11:46.756637 I | rafthttp: the connection with 1226bb321c91a88e became inactive
2016-10-21 10:11:46.756660 E | rafthttp: failed to read 1226bb321c91a88e on stream Message (net/http: request canceled)
2016-10-21 10:11:46.756687 N | etcdserver: removed member 1226bb321c91a88e from cluster 877b90a46cdaaa83
2016-10-21 10:11:46.756766 D | etcdserver: skipped updating attributes of removed member 1226bb321c91a88e
2016-10-21 10:11:46.756853 C | etcdserver: nodeToMember should never fail: raftAttributes key doesn't exist
panic: nodeToMember should never fail: raftAttributes key doesn't exist


Seems like the nodes cannot connect to each other, but I test it with ping, they still ping to each other.
Can anyone give us some advice or solution?
Thank you.


--
???????????????????????????????????????????? This email may contain confidential information. Please do not use or disclose it in any way and delete it if you are not the intended recipient.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161021/5342bab7/attachment.html>

From Jace.Liang at itri.org.tw  Mon Oct 24 21:45:00 2016
From: Jace.Liang at itri.org.tw (Jace.Liang at itri.org.tw)
Date: Tue, 25 Oct 2016 01:45:00 +0000
Subject: [Project Clearwater] etcd_process execution failed on each node.
In-Reply-To: <BY2PR0201MB1816D78ADB1376ADDAD8F0D5F0D40@BY2PR0201MB1816.namprd02.prod.outlook.com>
References: <441a6eb1beb6484f97397818dd6f3254@EXMB03.ITRI.DS>
	<BY2PR0201MB1816D78ADB1376ADDAD8F0D5F0D40@BY2PR0201MB1816.namprd02.prod.outlook.com>
Message-ID: <838c5a2ea6af4676a20374d2ea529c9e@EXMB03.ITRI.DS>

Hi Richard,

I think my problem here is not the issue<https://github.com/Metaswitch/clearwater-etcd/issues/320> you mentioned in last mail.
As my clearwater-etcd.log is quite different with that one. And my clearwater version is already the latest Onix, release 108.
PS: I followed the manual install instruction and try the upgrade procedure but nothing had to be updated.

In my case, my ctcd-process looks like unable to use the socket to successfully start and communicate with each other.
As the boot.log shows
cat /var/log/boot.log
???..
???..
zmq_msg_recv: Resource temporarily unavailable
Configuring monit for only localhost access
Error:  dial tcp 192.168.2.205:4000: getsockopt: no route to host
Rejoining cluster...
Etcd failed to come up ? exiting

I think the root cause is about ?zmq_msg_recv: Resource temporarily unavailable?.  (this is something about socket error)

Since I did the two test on two deployment.
-------------------First   deployment ---------------
(1). Six new VM with Ubuntu official 14.04.02 64-bits server
(2). Reboot the system when OS is finished
(there is no zmq_msg_recv: Resource temporarily unavailable in the boot.log)
(3.) Run the manual installation of clearwater then restart VMs.
the zmq_msg_recv info shows! Etcd_process failed to start.
(4.) Try to upgrade to the release Onix 108, but everything is newest.
(5.) the eted-process is still unfunctional.

------------------Second  deployment-----------------
(1). In this deployment, I used my 6 VM images of Clearwater nodes that I setup in about 2015 Oct.
And this deployment was running smoothly.
(2). Run the upgrade procedure to the latest version Onix 108.
(3). The zmq_msg_recv: Resource temporarily unavailable shows during the upgrade process.
(4.) Reboot after the upgrade finished.
(5.) The zmq_msg_recv: Resource temporarily unavailable shows during the boot step.
        And the etcd_process became unfunctional.

I would like to know what?s version of your python? Seems like zmq_msg_recv is from a python binary.
And how do I check my clearwater release version? And Install the new machine with certain version?
I think the old version might just good for me.

Thank you very much!


Jace.


From: Richard Whitehouse [mailto:Richard.Whitehouse at metaswitch.com]
Sent: Friday, October 21, 2016 5:43 PM
To: clearwater at lists.projectclearwater.org; ??? <Jace.Liang at itri.org.tw>
Subject: RE: etcd_process execution failed on each node.

Jace Liang,

What version of Project Clearwater are you running?

From your problem description, you might be hitting https://github.com/Metaswitch/clearwater-etcd/issues/320 which we?ve fixed in the latest release, Onix, release 108.

This can cause the etcd cluster to lose quorum and thus prevent it starting up correctly.

If this is the case, you?ve got two options:

1) You can delete your existing installation, and install release-108 instead. That?s probably the simplest solution, but you?ll lose all of your data.

2) Alternatively, you can upgrade your nodes to release-108, and then restore the cluster. As it?s lost quorum, you?ll need to follow the instructions for multiple node recovery, which are documented in the docs at http://clearwater.readthedocs.io/en/stable/Handling_Failed_Nodes.html#multiple-failed-nodes

Hope this helps,


Richard

From: Clearwater [mailto:clearwater-bounces at lists.projectclearwater.org] On Behalf Of Jace.Liang at itri.org.tw<mailto:Jace.Liang at itri.org.tw>
Sent: 21 October 2016 03:23
To: clearwater at lists.projectclearwater.org<mailto:clearwater at lists.projectclearwater.org>
Subject: [Project Clearwater] etcd_process execution failed on each node.

Dear All,

Recently I found out my 6 VMs of each node have trouble of executing etcd_process
I think I did the config file right, because at first their etcd_process was running well and the ?clearwater-etcdctl cluster health? shows all healthly.
But somehow they suddenly

I tried ?monit restart etcd_process? but still failed.

Here are some command result for more information. (on the node ellis)

root at ellis1:/var/log# clearwater-etcdctl cluster-health
cluster may be unhealthy: failed to list members
Error:  client: etcd cluster is unavailable or misconfigured
error #0: dial tcp 192.168.2.206:4000: getsockopt: connection refused  (.206 is homestead?s ip)

cat /var/log/boot.log
???..
???..
???..
zmq_msg_recv: Resource temporarily unavailable
Configuring monit for only localhost access
Error:  dial tcp 192.168.2.205:4000: getsockopt: no route to host
Rejoining cluster...
Etcd failed to come up - exiting

root at ellis1:/var/log/clearwater-etcd# cat clearwater-etcd.log
????.
????.
????
2016-10-21 10:11:46.686827 I | etcdmain: etcd Version: 2.2.5
2016-10-21 10:11:46.686888 I | etcdmain: Git SHA: bc9ddf2
2016-10-21 10:11:46.686895 I | etcdmain: Go Version: go1.5.3
2016-10-21 10:11:46.686902 I | etcdmain: Go OS/Arch: linux/amd64
2016-10-21 10:11:46.686913 I | etcdmain: setting maximum number of CPUs to 4, total number of available CPUs is 4
2016-10-21 10:11:46.686953 N | etcdmain: the server is already initialized as member before, starting as etcd member...
2016-10-21 10:11:46.687015 I | etcdmain: listening for peers on http://192.168.2.206:2380
2016-10-21 10:11:46.687039 I | etcdmain: listening for client requests on http://192.168.2.206:4000
2016-10-21 10:11:46.689639 I | etcdserver: recovered store from snapshot at index 10001
2016-10-21 10:11:46.689654 I | etcdserver: name = 192-168-2-206
2016-10-21 10:11:46.689660 I | etcdserver: data dir = /var/lib/clearwater-etcd/192.168.2.206
2016-10-21 10:11:46.689668 I | etcdserver: member dir = /var/lib/clearwater-etcd/192.168.2.206/member
2016-10-21 10:11:46.689674 I | etcdserver: heartbeat = 100ms
2016-10-21 10:11:46.689680 I | etcdserver: election = 1000ms
2016-10-21 10:11:46.689686 I | etcdserver: snapshot count = 10000
2016-10-21 10:11:46.689696 I | etcdserver: advertise client URLs = http://192.168.2.206:4000
2016-10-21 10:11:46.689717 I | etcdserver: loaded cluster information from store: <nil>
2016-10-21 10:11:46.726159 I | etcdserver: restarting member 4cb5fd19beaa1750 in cluster 877b90a46cdaaa83 at commit index 14044
2016-10-21 10:11:46.727646 I | raft: 4cb5fd19beaa1750 became follower at term 814
2016-10-21 10:11:46.727690 I | raft: newRaft 4cb5fd19beaa1750 [peers: [1226bb321c91a88e,4cb5fd19beaa1750,8ac8820f24de7303,a4a5d4f826d5740a], term: 814, commit: 14044, applied: 10001, lastindex: 14045, lastterm: 814]
2016-10-21 10:11:46.734589 I | rafthttp: the connection with 1226bb321c91a88e became active
2016-10-21 10:11:46.739284 E | rafthttp: failed to dial 8ac8820f24de7303 on stream Message (dial tcp 192.168.2.202:2380: getsockopt: connection refused)
2016-10-21 10:11:46.740156 E | rafthttp: failed to dial 8ac8820f24de7303 on stream MsgApp v2 (dial tcp 192.168.2.202:2380: getsockopt: connection refused)
2016-10-21 10:11:46.745962 I | etcdserver: starting server... [version: 2.2.5, cluster version: 2.2]
2016-10-21 10:11:46.747252 E | rafthttp: failed to dial a4a5d4f826d5740a on stream Message (dial tcp 192.168.2.203:2380: getsockopt: connection refused)
2016-10-21 10:11:46.747394 E | rafthttp: failed to dial a4a5d4f826d5740a on stream MsgApp v2 (dial tcp 192.168.2.203:2380: getsockopt: connection refused)
2016-10-21 10:11:46.756637 I | rafthttp: the connection with 1226bb321c91a88e became inactive
2016-10-21 10:11:46.756660 E | rafthttp: failed to read 1226bb321c91a88e on stream Message (net/http: request canceled)
2016-10-21 10:11:46.756687 N | etcdserver: removed member 1226bb321c91a88e from cluster 877b90a46cdaaa83
2016-10-21 10:11:46.756766 D | etcdserver: skipped updating attributes of removed member 1226bb321c91a88e
2016-10-21 10:11:46.756853 C | etcdserver: nodeToMember should never fail: raftAttributes key doesn't exist
panic: nodeToMember should never fail: raftAttributes key doesn't exist


Seems like the nodes cannot connect to each other, but I test it with ping, they still ping to each other.
Can anyone give us some advice or solution?
Thank you.


--
???????????????????????????????????????????? This email may contain confidential information. Please do not use or disclose it in any way and delete it if you are not the intended recipient.


--
???????????????????????????????????????????? This email may contain confidential information. Please do not use or disclose it in any way and delete it if you are not the intended recipient.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161025/7c42588b/attachment.html>

From Jace.Liang at itri.org.tw  Tue Oct 25 04:38:09 2016
From: Jace.Liang at itri.org.tw (Jace.Liang at itri.org.tw)
Date: Tue, 25 Oct 2016 08:38:09 +0000
Subject: [Project Clearwater] How to reconfigure the cluster members?
Message-ID: <d13ac7c5ae9644488c436fb4fd68f099@EXMB03.ITRI.DS>

Dear All,

I recently changed the IP of VMs (use manual installation if Clearwater)
I change the etcd_cluster in /etc/clearwater/local_config and reboot the node so that etc_process will get the new config.
But seems like it is still gets the old config as the clearwater-etcdctl cluster-health and clearwater-etcdctl member list all gets the old setting.

Am I miss some step or did something wrong?

Thank you.

Jace.


--
???????????????????????????????????????????? This email may contain confidential information. Please do not use or disclose it in any way and delete it if you are not the intended recipient.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161025/f6419a7a/attachment.html>

From eleanor at projectclearwater.org  Tue Oct 25 11:33:54 2016
From: eleanor at projectclearwater.org (Eleanor Merry (projectclearwater.org))
Date: Tue, 25 Oct 2016 15:33:54 +0000
Subject: [Project Clearwater] Sprint Porygon Release Note
Message-ID: <BL2PR02MB20845814533B3731F6BBFC359BA80@BL2PR02MB2084.namprd02.prod.outlook.com>

The release for Project Clearwater sprint "Porygon" has been cut. The code for this release is tagged as release-109 in github.
In this release:

  *   We've added audit logs to track what changes have been made to shared configuration. Now when a change is made to /etc/clearwater/shared_config and uploaded to etcd, we log to /var/log/syslog details of the change.
  *   We also spent some time working out ways to improve our automated testing of Clearwater.
This release also includes the following bug fixes:

*         Clearwater Alarm Agent stops working if you upgrade clearwater-snmpd but not clearwater-snmp-alarm-agent (https://github.com/Metaswitch/clearwater-infrastructure/issues/384)

*         Not all scripts in /usr/share/clearwater/infrastructure/scripts/ should be there (https://github.com/Metaswitch/clearwater-infrastructure/issues/362)

*         Several Docker build errors (https://github.com/Metaswitch/clearwater-docker/issues/31, https://github.com/Metaswitch/clearwater-docker/issues/32, https://github.com/Metaswitch/clearwater-docker/issues/33, https://github.com/Metaswitch/clearwater-docker/issues/34)

To upgrade to this release, follow the instructions at http://docs.projectclearwater.org/en/stable/Upgrading_a_Clearwater_deployment.html. If you are deploying an all-in-one node, the standard image (http://vm-images.cw-ngv.com/cw-aio.ova) has been updated for this release.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161025/9b0591f0/attachment.html>

From eleanor at projectclearwater.org  Fri Oct 28 09:30:47 2016
From: eleanor at projectclearwater.org (Eleanor Merry (projectclearwater.org))
Date: Fri, 28 Oct 2016 13:30:47 +0000
Subject: [Project Clearwater] etcd_process execution failed on each node.
In-Reply-To: <838c5a2ea6af4676a20374d2ea529c9e@EXMB03.ITRI.DS>
References: <441a6eb1beb6484f97397818dd6f3254@EXMB03.ITRI.DS>
	<BY2PR0201MB1816D78ADB1376ADDAD8F0D5F0D40@BY2PR0201MB1816.namprd02.prod.outlook.com>
	<838c5a2ea6af4676a20374d2ea529c9e@EXMB03.ITRI.DS>
Message-ID: <BL2PR02MB208426996DF2986004B56E169BAD0@BL2PR02MB2084.namprd02.prod.outlook.com>

Hi Jace,

We see the zmq_msg_recv message when the clearwater alarm agent isn?t running. This is benign as we don?t mandate that the clearwater alarm agent is installed (and we?re tracking this issue at https://github.com/Metaswitch/clearwater-infrastructure/issues/391). I don?t think it?s the cause of your etcd issues therefore.

To help resolve this then, can you send me some more information?

?         Can you send me the clearwater-etcd.log?

?         What are the values of etcd_cluster on your nodes?

?         When you restart your VMs, does this change the IP addresses of your VMs at all?

You can run /usr/share/clearwater/bin/clearwater-version (in release 108 onwards) to show when the Project Clearwater packages were built ? we don?t have anything that reports what specific Project Clearwater release you?re running though.

Thanks,

Ellie

From: Clearwater [mailto:clearwater-bounces at lists.projectclearwater.org] On Behalf Of Jace.Liang at itri.org.tw
Sent: 25 October 2016 02:45
To: Richard Whitehouse; clearwater at lists.projectclearwater.org
Subject: Re: [Project Clearwater] etcd_process execution failed on each node.

Hi Richard,

I think my problem here is not the issue<https://github.com/Metaswitch/clearwater-etcd/issues/320> you mentioned in last mail.
As my clearwater-etcd.log is quite different with that one. And my clearwater version is already the latest Onix, release 108.
PS: I followed the manual install instruction and try the upgrade procedure but nothing had to be updated.

In my case, my ctcd-process looks like unable to use the socket to successfully start and communicate with each other.
As the boot.log shows
cat /var/log/boot.log
???..
???..
zmq_msg_recv: Resource temporarily unavailable
Configuring monit for only localhost access
Error:  dial tcp 192.168.2.205:4000: getsockopt: no route to host
Rejoining cluster...
Etcd failed to come up ? exiting

I think the root cause is about ?zmq_msg_recv: Resource temporarily unavailable?.  (this is something about socket error)

Since I did the two test on two deployment.
-------------------First   deployment ---------------
(1). Six new VM with Ubuntu official 14.04.02 64-bits server
(2). Reboot the system when OS is finished
(there is no zmq_msg_recv: Resource temporarily unavailable in the boot.log)
(3.) Run the manual installation of clearwater then restart VMs.
the zmq_msg_recv info shows! Etcd_process failed to start.
(4.) Try to upgrade to the release Onix 108, but everything is newest.
(5.) the eted-process is still unfunctional.

------------------Second  deployment-----------------
(1). In this deployment, I used my 6 VM images of Clearwater nodes that I setup in about 2015 Oct.
And this deployment was running smoothly.
(2). Run the upgrade procedure to the latest version Onix 108.
(3). The zmq_msg_recv: Resource temporarily unavailable shows during the upgrade process.
(4.) Reboot after the upgrade finished.
(5.) The zmq_msg_recv: Resource temporarily unavailable shows during the boot step.
        And the etcd_process became unfunctional.

I would like to know what?s version of your python? Seems like zmq_msg_recv is from a python binary.
And how do I check my clearwater release version? And Install the new machine with certain version?
I think the old version might just good for me.

Thank you very much!


Jace.


From: Richard Whitehouse [mailto:Richard.Whitehouse at metaswitch.com]
Sent: Friday, October 21, 2016 5:43 PM
To: clearwater at lists.projectclearwater.org<mailto:clearwater at lists.projectclearwater.org>; ??? <Jace.Liang at itri.org.tw<mailto:Jace.Liang at itri.org.tw>>
Subject: RE: etcd_process execution failed on each node.

Jace Liang,

What version of Project Clearwater are you running?

From your problem description, you might be hitting https://github.com/Metaswitch/clearwater-etcd/issues/320 which we?ve fixed in the latest release, Onix, release 108.

This can cause the etcd cluster to lose quorum and thus prevent it starting up correctly.

If this is the case, you?ve got two options:

1) You can delete your existing installation, and install release-108 instead. That?s probably the simplest solution, but you?ll lose all of your data.

2) Alternatively, you can upgrade your nodes to release-108, and then restore the cluster. As it?s lost quorum, you?ll need to follow the instructions for multiple node recovery, which are documented in the docs at http://clearwater.readthedocs.io/en/stable/Handling_Failed_Nodes.html#multiple-failed-nodes

Hope this helps,


Richard

From: Clearwater [mailto:clearwater-bounces at lists.projectclearwater.org] On Behalf Of Jace.Liang at itri.org.tw<mailto:Jace.Liang at itri.org.tw>
Sent: 21 October 2016 03:23
To: clearwater at lists.projectclearwater.org<mailto:clearwater at lists.projectclearwater.org>
Subject: [Project Clearwater] etcd_process execution failed on each node.

Dear All,

Recently I found out my 6 VMs of each node have trouble of executing etcd_process
I think I did the config file right, because at first their etcd_process was running well and the ?clearwater-etcdctl cluster health? shows all healthly.
But somehow they suddenly

I tried ?monit restart etcd_process? but still failed.

Here are some command result for more information. (on the node ellis)

root at ellis1:/var/log# clearwater-etcdctl cluster-health
cluster may be unhealthy: failed to list members
Error:  client: etcd cluster is unavailable or misconfigured
error #0: dial tcp 192.168.2.206:4000: getsockopt: connection refused  (.206 is homestead?s ip)

cat /var/log/boot.log
???..
???..
???..
zmq_msg_recv: Resource temporarily unavailable
Configuring monit for only localhost access
Error:  dial tcp 192.168.2.205:4000: getsockopt: no route to host
Rejoining cluster...
Etcd failed to come up - exiting

root at ellis1:/var/log/clearwater-etcd# cat clearwater-etcd.log
????.
????.
????
2016-10-21 10:11:46.686827 I | etcdmain: etcd Version: 2.2.5
2016-10-21 10:11:46.686888 I | etcdmain: Git SHA: bc9ddf2
2016-10-21 10:11:46.686895 I | etcdmain: Go Version: go1.5.3
2016-10-21 10:11:46.686902 I | etcdmain: Go OS/Arch: linux/amd64
2016-10-21 10:11:46.686913 I | etcdmain: setting maximum number of CPUs to 4, total number of available CPUs is 4
2016-10-21 10:11:46.686953 N | etcdmain: the server is already initialized as member before, starting as etcd member...
2016-10-21 10:11:46.687015 I | etcdmain: listening for peers on http://192.168.2.206:2380
2016-10-21 10:11:46.687039 I | etcdmain: listening for client requests on http://192.168.2.206:4000
2016-10-21 10:11:46.689639 I | etcdserver: recovered store from snapshot at index 10001
2016-10-21 10:11:46.689654 I | etcdserver: name = 192-168-2-206
2016-10-21 10:11:46.689660 I | etcdserver: data dir = /var/lib/clearwater-etcd/192.168.2.206
2016-10-21 10:11:46.689668 I | etcdserver: member dir = /var/lib/clearwater-etcd/192.168.2.206/member
2016-10-21 10:11:46.689674 I | etcdserver: heartbeat = 100ms
2016-10-21 10:11:46.689680 I | etcdserver: election = 1000ms
2016-10-21 10:11:46.689686 I | etcdserver: snapshot count = 10000
2016-10-21 10:11:46.689696 I | etcdserver: advertise client URLs = http://192.168.2.206:4000
2016-10-21 10:11:46.689717 I | etcdserver: loaded cluster information from store: <nil>
2016-10-21 10:11:46.726159 I | etcdserver: restarting member 4cb5fd19beaa1750 in cluster 877b90a46cdaaa83 at commit index 14044
2016-10-21 10:11:46.727646 I | raft: 4cb5fd19beaa1750 became follower at term 814
2016-10-21 10:11:46.727690 I | raft: newRaft 4cb5fd19beaa1750 [peers: [1226bb321c91a88e,4cb5fd19beaa1750,8ac8820f24de7303,a4a5d4f826d5740a], term: 814, commit: 14044, applied: 10001, lastindex: 14045, lastterm: 814]
2016-10-21 10:11:46.734589 I | rafthttp: the connection with 1226bb321c91a88e became active
2016-10-21 10:11:46.739284 E | rafthttp: failed to dial 8ac8820f24de7303 on stream Message (dial tcp 192.168.2.202:2380: getsockopt: connection refused)
2016-10-21 10:11:46.740156 E | rafthttp: failed to dial 8ac8820f24de7303 on stream MsgApp v2 (dial tcp 192.168.2.202:2380: getsockopt: connection refused)
2016-10-21 10:11:46.745962 I | etcdserver: starting server... [version: 2.2.5, cluster version: 2.2]
2016-10-21 10:11:46.747252 E | rafthttp: failed to dial a4a5d4f826d5740a on stream Message (dial tcp 192.168.2.203:2380: getsockopt: connection refused)
2016-10-21 10:11:46.747394 E | rafthttp: failed to dial a4a5d4f826d5740a on stream MsgApp v2 (dial tcp 192.168.2.203:2380: getsockopt: connection refused)
2016-10-21 10:11:46.756637 I | rafthttp: the connection with 1226bb321c91a88e became inactive
2016-10-21 10:11:46.756660 E | rafthttp: failed to read 1226bb321c91a88e on stream Message (net/http: request canceled)
2016-10-21 10:11:46.756687 N | etcdserver: removed member 1226bb321c91a88e from cluster 877b90a46cdaaa83
2016-10-21 10:11:46.756766 D | etcdserver: skipped updating attributes of removed member 1226bb321c91a88e
2016-10-21 10:11:46.756853 C | etcdserver: nodeToMember should never fail: raftAttributes key doesn't exist
panic: nodeToMember should never fail: raftAttributes key doesn't exist


Seems like the nodes cannot connect to each other, but I test it with ping, they still ping to each other.
Can anyone give us some advice or solution?
Thank you.


--
???????????????????????????????????????????? This email may contain confidential information. Please do not use or disclose it in any way and delete it if you are not the intended recipient.


--
???????????????????????????????????????????? This email may contain confidential information. Please do not use or disclose it in any way and delete it if you are not the intended recipient.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161028/2c088679/attachment.html>

From eleanor at projectclearwater.org  Fri Oct 28 09:30:54 2016
From: eleanor at projectclearwater.org (Eleanor Merry (projectclearwater.org))
Date: Fri, 28 Oct 2016 13:30:54 +0000
Subject: [Project Clearwater] How to reconfigure the cluster members?
In-Reply-To: <d13ac7c5ae9644488c436fb4fd68f099@EXMB03.ITRI.DS>
References: <d13ac7c5ae9644488c436fb4fd68f099@EXMB03.ITRI.DS>
Message-ID: <BL2PR02MB2084A73A3610B4AB16F78D159BAD0@BL2PR02MB2084.namprd02.prod.outlook.com>

Hi Jace,

We don?t support changing the IPs of VMs in Project Clearwater. If you find yourself needing to change the IP of a VM, we recommend just deleting and recreating the VM (making sure to remove the VM from the clearwater deployment first, following the instructions in http://clearwater.readthedocs.io/en/latest/Clearwater_Elastic_Scaling.html).

In your case, clearwater-etcd only looks at the value of etcd_cluster on the initial boot ? if it restarts it uses the information it?s saved to disk instead.

Ellie

From: Clearwater [mailto:clearwater-bounces at lists.projectclearwater.org] On Behalf Of Jace.Liang at itri.org.tw
Sent: 25 October 2016 09:38
To: clearwater at lists.projectclearwater.org
Subject: [Project Clearwater] How to reconfigure the cluster members?

Dear All,

I recently changed the IP of VMs (use manual installation if Clearwater)
I change the etcd_cluster in /etc/clearwater/local_config and reboot the node so that etc_process will get the new config.
But seems like it is still gets the old config as the clearwater-etcdctl cluster-health and clearwater-etcdctl member list all gets the old setting.

Am I miss some step or did something wrong?

Thank you.

Jace.


--
???????????????????????????????????????????? This email may contain confidential information. Please do not use or disclose it in any way and delete it if you are not the intended recipient.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161028/bd26c796/attachment.html>

From Jace.Liang at itri.org.tw  Mon Oct 31 23:44:34 2016
From: Jace.Liang at itri.org.tw (Jace.Liang at itri.org.tw)
Date: Tue, 1 Nov 2016 03:44:34 +0000
Subject: [Project Clearwater] etcd_process execution failed on each node.
In-Reply-To: <BL2PR02MB208426996DF2986004B56E169BAD0@BL2PR02MB2084.namprd02.prod.outlook.com>
References: <441a6eb1beb6484f97397818dd6f3254@EXMB03.ITRI.DS>
	<BY2PR0201MB1816D78ADB1376ADDAD8F0D5F0D40@BY2PR0201MB1816.namprd02.prod.outlook.com>
	<838c5a2ea6af4676a20374d2ea529c9e@EXMB03.ITRI.DS>
	<BL2PR02MB208426996DF2986004B56E169BAD0@BL2PR02MB2084.namprd02.prod.outlook.com>
Message-ID: <c02e1833a598462586d48c9a82e7a700@EXMB03.ITRI.DS>

Hi Ellie,
Thanks for your reply, Recently I reinstalled my deployment with newest version Porygon. (Origionaly Onix).
But the issues still appears. Even I tried reboot the nodes and use monit restart <process>.



?         Can you send me the clearwater-etcd.log?
My clearwater-etcd.log (on node homestead ip: 192.168.2.205)
root at hs1:/var/log/clearwater-etcd# cat clearwater-etcd.log
2016-11-01 11:27:54.603372 I | etcdmain: etcd Version: 2.2.5
2016-11-01 11:27:54.603449 I | etcdmain: Git SHA: bc9ddf2
2016-11-01 11:27:54.603457 I | etcdmain: Go Version: go1.5.3
2016-11-01 11:27:54.603463 I | etcdmain: Go OS/Arch: linux/amd64
2016-11-01 11:27:54.603478 I | etcdmain: setting maximum number of CPUs to 4, total number of available CPUs is 4
2016-11-01 11:27:54.603528 N | etcdmain: the server is already initialized as member before, starting as etcd member...
2016-11-01 11:27:54.603622 I | etcdmain: listening for peers on http://192.168.2.205:2380
2016-11-01 11:27:54.603664 I | etcdmain: listening for client requests on http://0.0.0.0:4000
2016-11-01 11:27:54.606028 I | etcdserver: recovered store from snapshot at index 1060134
2016-11-01 11:27:54.606049 I | etcdserver: name = 192-168-2-205
2016-11-01 11:27:54.606056 I | etcdserver: data dir = /var/lib/clearwater-etcd/192.168.2.205
2016-11-01 11:27:54.606063 I | etcdserver: member dir = /var/lib/clearwater-etcd/192.168.2.205/member
2016-11-01 11:27:54.606070 I | etcdserver: heartbeat = 100ms
2016-11-01 11:27:54.606076 I | etcdserver: election = 1000ms
2016-11-01 11:27:54.606082 I | etcdserver: snapshot count = 10000
2016-11-01 11:27:54.606096 I | etcdserver: advertise client URLs = http://192.168.2.205:4000
2016-11-01 11:27:54.606124 I | etcdserver: loaded cluster information from store: <nil>
2016-11-01 11:27:54.720487 I | etcdserver: restarting member 1226bb321c91a88e in cluster 877b90a46cdaaa83 at commit index 1069551
2016-11-01 11:27:54.721099 I | raft: 1226bb321c91a88e became follower at term 1125
2016-11-01 11:27:54.721123 I | raft: newRaft 1226bb321c91a88e [peers: [1226bb321c91a88e,4cb5fd19beaa1750,59c1b019f66e6a49,8ac8820f24de7303,96a11f6c3323dc6b,a4a5d4f826d5740a], term: 1125, commit: 1069551, applied: 1060134, lastindex: 1069555, lastterm: 1125]
2016-11-01 11:27:54.744919 E | rafthttp: failed to dial 4cb5fd19beaa1750 on stream Message (the member has been permanently removed from the cluster)
2016-11-01 11:27:54.745228 E | rafthttp: failed to dial 4cb5fd19beaa1750 on stream MsgApp v2 (the member has been permanently removed from the cluster)
2016-11-01 11:27:54.746580 E | rafthttp: failed to dial 59c1b019f66e6a49 on stream Message (the member has been permanently removed from the cluster)
2016-11-01 11:27:54.747532 I | etcdserver: starting server... [version: 2.2.5, cluster version: 2.2]
2016-11-01 11:27:54.748399 E | etcdserver: the member has been permanently removed from the cluster
2016-11-01 11:27:54.748418 I | etcdserver: the data-dir used by this member must be removed.
2016-11-01 11:27:54.748503 E | rafthttp: failed to dial a4a5d4f826d5740a on stream MsgApp v2 (net/http: request canceled while waiting for connection)
2016-11-01 11:27:54.748526 E | rafthttp: failed to dial a4a5d4f826d5740a on stream Message (net/http: request canceled while waiting for connection)
2016-11-01 11:27:54.748544 D | etcdhttp: [GET] /v2/keys/clearwater/site1/configuration/apply_config?quorum=true remote:192.168.2.205:38261
2016-11-01 11:27:54.748642 E | rafthttp: failed to dial 59c1b019f66e6a49 on stream MsgApp v2 (net/http: request canceled)
2016-11-01 11:27:54.748702 E | rafthttp: failed to dial 8ac8820f24de7303 on stream MsgApp v2 (net/http: request canceled while waiting for connection)
2016-11-01 11:27:54.748723 E | rafthttp: failed to dial 8ac8820f24de7303 on stream Message (net/http: request canceled while waiting for connection)
2016-11-01 11:27:54.748761 E | rafthttp: failed to dial 96a11f6c3323dc6b on stream MsgApp v2 (net/http: request canceled)
2016-11-01 11:27:54.748788 E | rafthttp: failed to dial 96a11f6c3323dc6b on stream Message (net/http: request canceled)
2016-11-01 11:27:54.910648 E | etcdhttp: got unexpected response error (etcdserver: server stopped)
2016-11-01 11:27:56.614126 I | etcdmain: etcd Version: 2.2.5
2016-11-01 11:27:56.614168 I | etcdmain: Git SHA: bc9ddf2
2016-11-01 11:27:56.614175 I | etcdmain: Go Version: go1.5.3
2016-11-01 11:27:56.614181 I | etcdmain: Go OS/Arch: linux/amd64
2016-11-01 11:27:56.614191 I | etcdmain: setting maximum number of CPUs to 4, total number of available CPUs is 4
2016-11-01 11:27:56.614239 N | etcdmain: the server is already initialized as member before, starting as etcd member...
2016-11-01 11:27:56.614331 I | etcdmain: listening for peers on http://192.168.2.205:2380
2016-11-01 11:27:56.614377 I | etcdmain: listening for client requests on http://0.0.0.0:4000
2016-11-01 11:27:56.616237 I | etcdserver: recovered store from snapshot at index 1060134
2016-11-01 11:27:56.616251 I | etcdserver: name = 192-168-2-205
2016-11-01 11:27:56.616257 I | etcdserver: data dir = /var/lib/clearwater-etcd/192.168.2.205
2016-11-01 11:27:56.616264 I | etcdserver: member dir = /var/lib/clearwater-etcd/192.168.2.205/member
2016-11-01 11:27:56.616270 I | etcdserver: heartbeat = 100ms
2016-11-01 11:27:56.616275 I | etcdserver: election = 1000ms
2016-11-01 11:27:56.616287 I | etcdserver: snapshot count = 10000
2016-11-01 11:27:56.616297 I | etcdserver: advertise client URLs = http://192.168.2.205:4000
2016-11-01 11:27:56.616317 I | etcdserver: loaded cluster information from store: <nil>
2016-11-01 11:27:56.714780 I | etcdserver: restarting member 1226bb321c91a88e in cluster 877b90a46cdaaa83 at commit index 1069551
2016-11-01 11:27:56.717156 I | raft: 1226bb321c91a88e became follower at term 1125
2016-11-01 11:27:56.717202 I | raft: newRaft 1226bb321c91a88e [peers: [1226bb321c91a88e,4cb5fd19beaa1750,59c1b019f66e6a49,8ac8820f24de7303,96a11f6c3323dc6b,a4a5d4f826d5740a], term: 1125, commit: 1069551, applied: 1060134, lastindex: 1069555, lastterm: 1125]
2016-11-01 11:27:56.729486 E | rafthttp: failed to dial 4cb5fd19beaa1750 on stream MsgApp v2 (the member has been permanently removed from the cluster)
2016-11-01 11:27:56.729790 E | rafthttp: failed to dial 4cb5fd19beaa1750 on stream Message (the member has been permanently removed from the cluster)
2016-11-01 11:27:56.743622 E | rafthttp: failed to dial 8ac8820f24de7303 on stream Message (dial tcp 192.168.2.202:2380: getsockopt: connection refused)
2016-11-01 11:27:56.743702 E | rafthttp: failed to dial 8ac8820f24de7303 on stream MsgApp v2 (dial tcp 192.168.2.202:2380: getsockopt: connection refused)
2016-11-01 11:27:56.744016 E | rafthttp: failed to dial 59c1b019f66e6a49 on stream Message (the member has been permanently removed from the cluster)
2016-11-01 11:27:56.744319 E | rafthttp: failed to dial 59c1b019f66e6a49 on stream MsgApp v2 (the member has been permanently removed from the cluster)
2016-11-01 11:27:56.744598 I | etcdserver: starting server... [version: 2.2.5, cluster version: 2.2]
2016-11-01 11:27:56.745081 E | etcdserver: the member has been permanently removed from the cluster
2016-11-01 11:27:56.745096 I | etcdserver: the data-dir used by this member must be removed.
2016-11-01 11:27:56.745224 E | rafthttp: failed to dial 96a11f6c3323dc6b on stream MsgApp v2 (net/http: request canceled)
2016-11-01 11:27:56.745259 E | rafthttp: failed to dial 96a11f6c3323dc6b on stream Message (net/http: request canceled)
2016-11-01 11:27:56.745302 E | rafthttp: failed to dial a4a5d4f826d5740a on stream MsgApp v2 (net/http: request canceled while waiting for connection)
2016-11-01 11:27:56.745331 E | rafthttp: failed to dial a4a5d4f826d5740a on stream Message (net/http: request canceled while waiting for connection)


?         What are the values of etcd_cluster on your nodes?

Here is the result of Clearwater-etcdctl member list on bono (etcd_process runs well)
Meanwhile, etcd_process on sprout and homestead is failed to start.
4cb5fd19beaa1750: name=192-168-2-206 peerURLs=http://192.168.2.206:2380 clientURLs=http://192.168.2.206:4000      (ellis)
59c1b019f66e6a49: name=192-168-2-204 peerURLs=http://192.168.2.204:2380 clientURLs=http://192.168.2.204:4000       (homer)
96a11f6c3323dc6b: name=192-168-2-201 peerURLs=http://192.168.2.201:2380 clientURLs=http://192.168.2.201:4000        (bono)
a4a5d4f826d5740a: name=192-168-2-203 peerURLs=http://192.168.2.203:2380 clientURLs=http://192.168.2.203:4000       (ralf)

And on the Homestead node (where etcd_process failed to start)
root at hs1:/var/log/clearwater-etcd# clearwater-etcdctl member list
Error:  dial tcp 192.168.2.205:4000: getsockopt: connection refused

I think the value of node homestead is 1226bb321c91a88e as it is shown in etcd.log and member list before the etcd_process failed.


?         When you restart your VMs, does this change the IP addresses of your VMs at all?
I assigned the static IP for my VMs, the IPs stay same as I assigned.

Wish these information helps.

Jace.

From: Clearwater [mailto:clearwater-bounces at lists.projectclearwater.org] On Behalf Of Eleanor Merry (projectclearwater.org)
Sent: Friday, October 28, 2016 9:31 PM
To: clearwater at lists.projectclearwater.org
Subject: Re: [Project Clearwater] etcd_process execution failed on each node.

Hi Jace,

We see the zmq_msg_recv message when the clearwater alarm agent isn?t running. This is benign as we don?t mandate that the clearwater alarm agent is installed (and we?re tracking this issue at https://github.com/Metaswitch/clearwater-infrastructure/issues/391). I don?t think it?s the cause of your etcd issues therefore.

To help resolve this then, can you send me some more information?

?         Can you send me the clearwater-etcd.log?

?         What are the values of etcd_cluster on your nodes?

?         When you restart your VMs, does this change the IP addresses of your VMs at all?

You can run /usr/share/clearwater/bin/clearwater-version (in release 108 onwards) to show when the Project Clearwater packages were built ? we don?t have anything that reports what specific Project Clearwater release you?re running though.

Thanks,

Ellie

From: Clearwater [mailto:clearwater-bounces at lists.projectclearwater.org] On Behalf Of Jace.Liang at itri.org.tw<mailto:Jace.Liang at itri.org.tw>
Sent: 25 October 2016 02:45
To: Richard Whitehouse; clearwater at lists.projectclearwater.org<mailto:clearwater at lists.projectclearwater.org>
Subject: Re: [Project Clearwater] etcd_process execution failed on each node.

Hi Richard,

I think my problem here is not the issue<https://github.com/Metaswitch/clearwater-etcd/issues/320> you mentioned in last mail.
As my clearwater-etcd.log is quite different with that one. And my clearwater version is already the latest Onix, release 108.
PS: I followed the manual install instruction and try the upgrade procedure but nothing had to be updated.

In my case, my ctcd-process looks like unable to use the socket to successfully start and communicate with each other.
As the boot.log shows
cat /var/log/boot.log
???..
???..
zmq_msg_recv: Resource temporarily unavailable
Configuring monit for only localhost access
Error:  dial tcp 192.168.2.205:4000: getsockopt: no route to host
Rejoining cluster...
Etcd failed to come up ? exiting

I think the root cause is about ?zmq_msg_recv: Resource temporarily unavailable?.  (this is something about socket error)

Since I did the two test on two deployment.
-------------------First   deployment ---------------
(1). Six new VM with Ubuntu official 14.04.02 64-bits server
(2). Reboot the system when OS is finished
(there is no zmq_msg_recv: Resource temporarily unavailable in the boot.log)
(3.) Run the manual installation of clearwater then restart VMs.
the zmq_msg_recv info shows! Etcd_process failed to start.
(4.) Try to upgrade to the release Onix 108, but everything is newest.
(5.) the eted-process is still unfunctional.

------------------Second  deployment-----------------
(1). In this deployment, I used my 6 VM images of Clearwater nodes that I setup in about 2015 Oct.
And this deployment was running smoothly.
(2). Run the upgrade procedure to the latest version Onix 108.
(3). The zmq_msg_recv: Resource temporarily unavailable shows during the upgrade process.
(4.) Reboot after the upgrade finished.
(5.) The zmq_msg_recv: Resource temporarily unavailable shows during the boot step.
        And the etcd_process became unfunctional.

I would like to know what?s version of your python? Seems like zmq_msg_recv is from a python binary.
And how do I check my clearwater release version? And Install the new machine with certain version?
I think the old version might just good for me.

Thank you very much!


Jace.


From: Richard Whitehouse [mailto:Richard.Whitehouse at metaswitch.com]
Sent: Friday, October 21, 2016 5:43 PM
To: clearwater at lists.projectclearwater.org<mailto:clearwater at lists.projectclearwater.org>; ??? <Jace.Liang at itri.org.tw<mailto:Jace.Liang at itri.org.tw>>
Subject: RE: etcd_process execution failed on each node.

Jace Liang,

What version of Project Clearwater are you running?

From your problem description, you might be hitting https://github.com/Metaswitch/clearwater-etcd/issues/320 which we?ve fixed in the latest release, Onix, release 108.

This can cause the etcd cluster to lose quorum and thus prevent it starting up correctly.

If this is the case, you?ve got two options:

1) You can delete your existing installation, and install release-108 instead. That?s probably the simplest solution, but you?ll lose all of your data.

2) Alternatively, you can upgrade your nodes to release-108, and then restore the cluster. As it?s lost quorum, you?ll need to follow the instructions for multiple node recovery, which are documented in the docs at http://clearwater.readthedocs.io/en/stable/Handling_Failed_Nodes.html#multiple-failed-nodes

Hope this helps,


Richard

From: Clearwater [mailto:clearwater-bounces at lists.projectclearwater.org] On Behalf Of Jace.Liang at itri.org.tw<mailto:Jace.Liang at itri.org.tw>
Sent: 21 October 2016 03:23
To: clearwater at lists.projectclearwater.org<mailto:clearwater at lists.projectclearwater.org>
Subject: [Project Clearwater] etcd_process execution failed on each node.

Dear All,

Recently I found out my 6 VMs of each node have trouble of executing etcd_process
I think I did the config file right, because at first their etcd_process was running well and the ?clearwater-etcdctl cluster health? shows all healthly.
But somehow they suddenly

I tried ?monit restart etcd_process? but still failed.

Here are some command result for more information. (on the node ellis)

root at ellis1:/var/log# clearwater-etcdctl cluster-health
cluster may be unhealthy: failed to list members
Error:  client: etcd cluster is unavailable or misconfigured
error #0: dial tcp 192.168.2.206:4000: getsockopt: connection refused  (.206 is homestead?s ip)

cat /var/log/boot.log
???..
???..
???..
zmq_msg_recv: Resource temporarily unavailable
Configuring monit for only localhost access
Error:  dial tcp 192.168.2.205:4000: getsockopt: no route to host
Rejoining cluster...
Etcd failed to come up - exiting

root at ellis1:/var/log/clearwater-etcd# cat clearwater-etcd.log
????.
????.
????
2016-10-21 10:11:46.686827 I | etcdmain: etcd Version: 2.2.5
2016-10-21 10:11:46.686888 I | etcdmain: Git SHA: bc9ddf2
2016-10-21 10:11:46.686895 I | etcdmain: Go Version: go1.5.3
2016-10-21 10:11:46.686902 I | etcdmain: Go OS/Arch: linux/amd64
2016-10-21 10:11:46.686913 I | etcdmain: setting maximum number of CPUs to 4, total number of available CPUs is 4
2016-10-21 10:11:46.686953 N | etcdmain: the server is already initialized as member before, starting as etcd member...
2016-10-21 10:11:46.687015 I | etcdmain: listening for peers on http://192.168.2.206:2380
2016-10-21 10:11:46.687039 I | etcdmain: listening for client requests on http://192.168.2.206:4000
2016-10-21 10:11:46.689639 I | etcdserver: recovered store from snapshot at index 10001
2016-10-21 10:11:46.689654 I | etcdserver: name = 192-168-2-206
2016-10-21 10:11:46.689660 I | etcdserver: data dir = /var/lib/clearwater-etcd/192.168.2.206
2016-10-21 10:11:46.689668 I | etcdserver: member dir = /var/lib/clearwater-etcd/192.168.2.206/member
2016-10-21 10:11:46.689674 I | etcdserver: heartbeat = 100ms
2016-10-21 10:11:46.689680 I | etcdserver: election = 1000ms
2016-10-21 10:11:46.689686 I | etcdserver: snapshot count = 10000
2016-10-21 10:11:46.689696 I | etcdserver: advertise client URLs = http://192.168.2.206:4000
2016-10-21 10:11:46.689717 I | etcdserver: loaded cluster information from store: <nil>
2016-10-21 10:11:46.726159 I | etcdserver: restarting member 4cb5fd19beaa1750 in cluster 877b90a46cdaaa83 at commit index 14044
2016-10-21 10:11:46.727646 I | raft: 4cb5fd19beaa1750 became follower at term 814
2016-10-21 10:11:46.727690 I | raft: newRaft 4cb5fd19beaa1750 [peers: [1226bb321c91a88e,4cb5fd19beaa1750,8ac8820f24de7303,a4a5d4f826d5740a], term: 814, commit: 14044, applied: 10001, lastindex: 14045, lastterm: 814]
2016-10-21 10:11:46.734589 I | rafthttp: the connection with 1226bb321c91a88e became active
2016-10-21 10:11:46.739284 E | rafthttp: failed to dial 8ac8820f24de7303 on stream Message (dial tcp 192.168.2.202:2380: getsockopt: connection refused)
2016-10-21 10:11:46.740156 E | rafthttp: failed to dial 8ac8820f24de7303 on stream MsgApp v2 (dial tcp 192.168.2.202:2380: getsockopt: connection refused)
2016-10-21 10:11:46.745962 I | etcdserver: starting server... [version: 2.2.5, cluster version: 2.2]
2016-10-21 10:11:46.747252 E | rafthttp: failed to dial a4a5d4f826d5740a on stream Message (dial tcp 192.168.2.203:2380: getsockopt: connection refused)
2016-10-21 10:11:46.747394 E | rafthttp: failed to dial a4a5d4f826d5740a on stream MsgApp v2 (dial tcp 192.168.2.203:2380: getsockopt: connection refused)
2016-10-21 10:11:46.756637 I | rafthttp: the connection with 1226bb321c91a88e became inactive
2016-10-21 10:11:46.756660 E | rafthttp: failed to read 1226bb321c91a88e on stream Message (net/http: request canceled)
2016-10-21 10:11:46.756687 N | etcdserver: removed member 1226bb321c91a88e from cluster 877b90a46cdaaa83
2016-10-21 10:11:46.756766 D | etcdserver: skipped updating attributes of removed member 1226bb321c91a88e
2016-10-21 10:11:46.756853 C | etcdserver: nodeToMember should never fail: raftAttributes key doesn't exist
panic: nodeToMember should never fail: raftAttributes key doesn't exist


Seems like the nodes cannot connect to each other, but I test it with ping, they still ping to each other.
Can anyone give us some advice or solution?
Thank you.


--
???????????????????????????????????????????? This email may contain confidential information. Please do not use or disclose it in any way and delete it if you are not the intended recipient.


--
???????????????????????????????????????????? This email may contain confidential information. Please do not use or disclose it in any way and delete it if you are not the intended recipient.


--
???????????????????????????????????????????? This email may contain confidential information. Please do not use or disclose it in any way and delete it if you are not the intended recipient.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.projectclearwater.org/pipermail/clearwater_lists.projectclearwater.org/attachments/20161101/16000041/attachment.html>

